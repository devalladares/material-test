"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("_pages-dir-browser_components_CanvasContainer_js",{

/***/ "(pages-dir-browser)/./components/CanvasContainer.js":
/*!***************************************!*\
  !*** ./components/CanvasContainer.js ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(pages-dir-browser)/./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(pages-dir-browser)/./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Canvas__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Canvas */ \"(pages-dir-browser)/./components/Canvas.js\");\n/* harmony import */ var _DisplayCanvas__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DisplayCanvas */ \"(pages-dir-browser)/./components/DisplayCanvas.js\");\n/* harmony import */ var _ToolBar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ToolBar */ \"(pages-dir-browser)/./components/ToolBar.js\");\n/* harmony import */ var _StyleSelector__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./StyleSelector */ \"(pages-dir-browser)/./components/StyleSelector.js\");\n/* harmony import */ var _ActionBar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ActionBar */ \"(pages-dir-browser)/./components/ActionBar.js\");\n/* harmony import */ var _ErrorModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ErrorModal */ \"(pages-dir-browser)/./components/ErrorModal.js\");\n/* harmony import */ var _TextInput__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./TextInput */ \"(pages-dir-browser)/./components/TextInput.js\");\n/* harmony import */ var _Header__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Header */ \"(pages-dir-browser)/./components/Header.js\");\n/* harmony import */ var _utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils/canvasUtils */ \"(pages-dir-browser)/./components/utils/canvasUtils.js\");\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\nconst CanvasContainer = ()=>{\n    _s();\n    const canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const displayCanvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const backgroundImageRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [isDrawing, setIsDrawing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [penColor, setPenColor] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"#000000\");\n    const colorInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [prompt, setPrompt] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [generatedImage, setGeneratedImage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showErrorModal, setShowErrorModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [errorMessage, setErrorMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [customApiKey, setCustomApiKey] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [styleMode, setStyleMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('material');\n    const [strokeCount, setStrokeCount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const strokeTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [lastRequestTime, setLastRequestTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const MIN_REQUEST_INTERVAL = 2000; // Minimum 2 seconds between requests\n    const [currentTool, setCurrentTool] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('pencil'); // 'pencil', 'pen', 'eraser', 'text'\n    const [isTyping, setIsTyping] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [undoStack, setUndoStack] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [bezierPoints, setBezierPoints] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [textInput, setTextInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [textPosition, setTextPosition] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        x: 0,\n        y: 0\n    });\n    const textInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [isPenDrawing, setIsPenDrawing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [currentBezierPath, setCurrentBezierPath] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [tempPoints, setTempPoints] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    // Load background image when generatedImage changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasContainer.useEffect\": ()=>{\n            if (generatedImage && canvasRef.current) {\n                // Use the window.Image constructor to avoid conflict with Next.js Image component\n                const img = new window.Image();\n                img.onload = ({\n                    \"CanvasContainer.useEffect\": ()=>{\n                        backgroundImageRef.current = img;\n                        (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.drawImageToCanvas)(canvasRef.current, backgroundImageRef.current);\n                    }\n                })[\"CanvasContainer.useEffect\"];\n                img.src = generatedImage;\n            }\n        }\n    }[\"CanvasContainer.useEffect\"], [\n        generatedImage\n    ]);\n    // Initialize canvas with white background when component mounts\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasContainer.useEffect\": ()=>{\n            if (canvasRef.current) {\n                (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.initializeCanvas)(canvasRef.current);\n            }\n        }\n    }[\"CanvasContainer.useEffect\"], []);\n    const startDrawing = (e)=>{\n        const { x, y } = (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.getCoordinates)(e, canvasRef.current);\n        if (e.type === 'touchstart') {\n            e.preventDefault();\n        }\n        console.log('startDrawing called', {\n            currentTool,\n            x,\n            y\n        });\n        const ctx = canvasRef.current.getContext(\"2d\");\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n        setIsDrawing(true);\n        setStrokeCount((prev)=>prev + 1);\n        // Save canvas state before drawing\n        saveCanvasState();\n    };\n    const draw = (e)=>{\n        if (!isDrawing) return;\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d');\n        const { x, y } = (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.getCoordinates)(e, canvas);\n        // Occasionally log drawing activity\n        if (Math.random() < 0.05) {\n            console.log('draw called', {\n                currentTool,\n                isDrawing,\n                x,\n                y\n            });\n        }\n        ctx.lineWidth = 5;\n        ctx.lineCap = 'round';\n        if (currentTool === 'eraser') {\n            ctx.strokeStyle = '#FFFFFF';\n            ctx.lineWidth = 20;\n        } else {\n            ctx.strokeStyle = '#000000';\n        }\n        if (currentTool === 'pen') {\n            // Show preview line while moving\n            if (tempPoints.length > 0) {\n                const lastPoint = tempPoints[tempPoints.length - 1];\n                ctx.beginPath();\n                ctx.moveTo(lastPoint.x, lastPoint.y);\n                ctx.lineTo(x, y);\n                ctx.stroke();\n            }\n        } else {\n            ctx.lineTo(x, y);\n            ctx.stroke();\n        }\n    };\n    const stopDrawing = async (e)=>{\n        console.log('stopDrawing called in CanvasContainer', {\n            isDrawing,\n            currentTool,\n            hasEvent: !!e,\n            eventType: e ? e.type : 'none'\n        });\n        if (!isDrawing) return;\n        setIsDrawing(false);\n        // Remove the timeout-based generation\n        if (strokeTimeoutRef.current) {\n            clearTimeout(strokeTimeoutRef.current);\n            strokeTimeoutRef.current = null;\n        }\n        // Only generate on mouse/touch up events\n        if (e && (e.type === 'mouseup' || e.type === 'touchend')) {\n            console.log('stopDrawing: detected mouseup/touchend event', {\n                strokeCount\n            });\n            // Check if we have enough strokes to generate (increased to 10 from 3)\n            if (strokeCount >= 10) {\n                console.log('stopDrawing: calling handleGeneration due to stroke count');\n                await handleGeneration();\n                setStrokeCount(0);\n            }\n        // No longer using timeouts for delayed generation\n        }\n    };\n    const clearCanvas = ()=>{\n        const canvas = canvasRef.current;\n        if (!canvas) return;\n        (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.initializeCanvas)(canvas);\n        setGeneratedImage(null);\n        backgroundImageRef.current = null;\n        // Save empty canvas state\n        saveCanvasState();\n    };\n    const handleGeneration = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasContainer.useCallback[handleGeneration]\": async ()=>{\n            console.log('handleGeneration called');\n            const now = Date.now();\n            if (now - lastRequestTime < MIN_REQUEST_INTERVAL) {\n                console.log(\"Request throttled - too soon after last request\");\n                return;\n            }\n            setLastRequestTime(now);\n            if (!canvasRef.current) return;\n            console.log('Starting generation process');\n            setIsLoading(true);\n            try {\n                const canvas = canvasRef.current;\n                const tempCanvas = document.createElement('canvas');\n                tempCanvas.width = canvas.width;\n                tempCanvas.height = canvas.height;\n                const tempCtx = tempCanvas.getContext('2d');\n                tempCtx.fillStyle = '#FFFFFF';\n                tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);\n                tempCtx.drawImage(canvas, 0, 0);\n                const drawingData = tempCanvas.toDataURL(\"image/png\").split(\",\")[1];\n                const requestPayload = {\n                    prompt: (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.getPromptForStyle)(styleMode),\n                    drawingData,\n                    customApiKey\n                };\n                const response = await fetch(\"/api/generate\", {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(requestPayload)\n                });\n                const data = await response.json();\n                if (data.success && data.imageData) {\n                    const imageUrl = \"data:image/png;base64,\".concat(data.imageData);\n                    // Draw the generated image to the display canvas\n                    const displayCanvas = displayCanvasRef.current;\n                    const displayCtx = displayCanvas.getContext('2d');\n                    const img = new Image();\n                    img.onload = ({\n                        \"CanvasContainer.useCallback[handleGeneration]\": ()=>{\n                            displayCtx.clearRect(0, 0, displayCanvas.width, displayCanvas.height);\n                            displayCtx.drawImage(img, 0, 0, displayCanvas.width, displayCanvas.height);\n                        }\n                    })[\"CanvasContainer.useCallback[handleGeneration]\"];\n                    img.src = imageUrl;\n                } else {\n                    console.error(\"Failed to generate image:\", data.error);\n                    if (data.error && (data.error.includes(\"Resource has been exhausted\") || data.error.includes(\"quota\") || response.status === 429 || response.status === 500)) {\n                        setErrorMessage(data.error);\n                        setShowErrorModal(true);\n                    }\n                }\n            } catch (error) {\n                console.error(\"Error generating image:\", error);\n                setErrorMessage(error.message || \"An unexpected error occurred.\");\n                setShowErrorModal(true);\n            } finally{\n                setIsLoading(false);\n            }\n        }\n    }[\"CanvasContainer.useCallback[handleGeneration]\"], [\n        lastRequestTime,\n        styleMode,\n        customApiKey\n    ]);\n    // Close the error modal\n    const closeErrorModal = ()=>{\n        setShowErrorModal(false);\n    };\n    // Handle the custom API key submission\n    const handleApiKeySubmit = (e)=>{\n        e.preventDefault();\n        setShowErrorModal(false);\n    // Will use the customApiKey state in the next API call\n    };\n    // Add this function to handle undo\n    const handleUndo = ()=>{\n        if (undoStack.length > 0) {\n            const canvas = canvasRef.current;\n            const ctx = canvas.getContext('2d');\n            const previousState = undoStack[undoStack.length - 2]; // Get second to last state\n            if (previousState) {\n                const img = new Image();\n                img.onload = ()=>{\n                    ctx.fillStyle = '#FFFFFF';\n                    ctx.fillRect(0, 0, canvas.width, canvas.height);\n                    ctx.drawImage(img, 0, 0);\n                };\n                img.src = previousState;\n            } else {\n                // If no previous state, clear to white\n                ctx.fillStyle = '#FFFFFF';\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n            setUndoStack((prev)=>prev.slice(0, -1));\n        }\n    };\n    // Add this function to save canvas state\n    const saveCanvasState = ()=>{\n        const canvas = canvasRef.current;\n        if (!canvas) return;\n        const dataURL = canvas.toDataURL();\n        setUndoStack((prev)=>[\n                ...prev,\n                dataURL\n            ]);\n    };\n    // Add this function to handle text input\n    const handleTextInput = (e)=>{\n        if (e.key === 'Enter') {\n            const canvas = canvasRef.current;\n            const ctx = canvas.getContext('2d');\n            ctx.font = '24px Arial';\n            ctx.fillStyle = '#000000';\n            ctx.fillText(textInput, textPosition.x, textPosition.y);\n            setTextInput('');\n            setIsTyping(false);\n            saveCanvasState();\n        }\n    };\n    // Modify the canvas click handler to handle text placement\n    const handleCanvasClick = (e)=>{\n        if (currentTool === 'text') {\n            const { x, y } = (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.getCoordinates)(e, canvasRef.current);\n            setTextPosition({\n                x,\n                y\n            });\n            setIsTyping(true);\n            if (textInputRef.current) {\n                textInputRef.current.focus();\n            }\n        }\n    };\n    // Add new function to handle pen clicks\n    const handlePenClick = (e)=>{\n        if (currentTool !== 'pen') return;\n        const { x, y } = (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.getCoordinates)(e, canvasRef.current);\n        const newPoint = {\n            x,\n            y\n        };\n        console.log('handlePenClick called', {\n            x,\n            y,\n            tempPointsCount: tempPoints.length\n        });\n        setTempPoints((prev)=>[\n                ...prev,\n                newPoint\n            ]);\n        // Draw point indicator\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d');\n        ctx.fillStyle = '#000000';\n        ctx.beginPath();\n        ctx.arc(x, y, 3, 0, Math.PI * 2);\n        ctx.fill();\n        // When we have 4 points, draw the bezier curve\n        if (tempPoints.length === 3) {\n            console.log('handlePenClick: Drawing bezier curve with 4 points');\n            const points = [\n                ...tempPoints,\n                newPoint\n            ];\n            (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.drawBezierCurve)(canvas, points);\n            setTempPoints([]); // Reset points for next curve\n            saveCanvasState();\n        }\n    };\n    // Add this new function near your other utility functions\n    const handleSaveImage = ()=>{\n        // For the generated image\n        if (displayCanvasRef.current) {\n            const link = document.createElement('a');\n            link.download = 'chrome-study.png';\n            link.href = displayCanvasRef.current.toDataURL('image/png');\n            link.click();\n        }\n    };\n    // Add this function to handle regeneration\n    const handleRegenerate = async ()=>{\n        if (canvasRef.current) {\n            await handleGeneration();\n        }\n    };\n    // Add useEffect to watch for styleMode changes and regenerate\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasContainer.useEffect\": ()=>{\n            // Only trigger if we have something drawn (check if canvas is not empty)\n            const checkCanvasAndGenerate = {\n                \"CanvasContainer.useEffect.checkCanvasAndGenerate\": async ()=>{\n                    if (!canvasRef.current) return;\n                    const canvas = canvasRef.current;\n                    const ctx = canvas.getContext('2d');\n                    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n                    // Check if canvas has any non-white pixels\n                    const hasDrawing = Array.from(imageData.data).some({\n                        \"CanvasContainer.useEffect.checkCanvasAndGenerate.hasDrawing\": (pixel, index)=>{\n                            // Check only RGB values (skip alpha)\n                            return index % 4 !== 3 && pixel !== 255;\n                        }\n                    }[\"CanvasContainer.useEffect.checkCanvasAndGenerate.hasDrawing\"]);\n                    if (hasDrawing) {\n                        await handleGeneration();\n                    }\n                }\n            }[\"CanvasContainer.useEffect.checkCanvasAndGenerate\"];\n            // Skip on first render\n            if (styleMode) {\n                checkCanvasAndGenerate();\n            }\n        }\n    }[\"CanvasContainer.useEffect\"], [\n        styleMode,\n        handleGeneration\n    ]); // Added handleGeneration to dependency array\n    // Cleanup function - keep this to prevent memory leaks\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasContainer.useEffect\": ()=>{\n            return ({\n                \"CanvasContainer.useEffect\": ()=>{\n                    if (strokeTimeoutRef.current) {\n                        clearTimeout(strokeTimeoutRef.current);\n                        strokeTimeoutRef.current = null;\n                    }\n                }\n            })[\"CanvasContainer.useEffect\"];\n        }\n    }[\"CanvasContainer.useEffect\"], []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex min-h-screen flex-col items-center justify-start bg-gray-100 p-4\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-8\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center justify-between\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Header__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {}, void 0, false, {\n                                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                                    lineNumber: 401,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ToolBar__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                    currentTool: currentTool,\n                                    setCurrentTool: setCurrentTool,\n                                    handleUndo: handleUndo,\n                                    clearCanvas: clearCanvas\n                                }, void 0, false, {\n                                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                                    lineNumber: 402,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                            lineNumber: 400,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"grid grid-cols-1 md:grid-cols-2 gap-8\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Canvas__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                    canvasRef: canvasRef,\n                                    currentTool: currentTool,\n                                    isDrawing: isDrawing,\n                                    startDrawing: startDrawing,\n                                    draw: draw,\n                                    stopDrawing: stopDrawing,\n                                    handleCanvasClick: handleCanvasClick,\n                                    handlePenClick: handlePenClick,\n                                    handleGeneration: handleGeneration\n                                }, void 0, false, {\n                                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                                    lineNumber: 411,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_DisplayCanvas__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                    displayCanvasRef: displayCanvasRef,\n                                    isLoading: isLoading\n                                }, void 0, false, {\n                                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                                    lineNumber: 423,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                            lineNumber: 410,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex flex-col sm:flex-row gap-4 mb-6\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_StyleSelector__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                styleMode: styleMode,\n                                setStyleMode: setStyleMode,\n                                handleGenerate: handleGeneration\n                            }, void 0, false, {\n                                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                                lineNumber: 430,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                            lineNumber: 429,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ActionBar__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                            handleSaveImage: handleSaveImage,\n                            handleRegenerate: handleRegenerate\n                        }, void 0, false, {\n                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                            lineNumber: 437,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                    lineNumber: 399,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                lineNumber: 398,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ErrorModal__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                showErrorModal: showErrorModal,\n                closeErrorModal: closeErrorModal,\n                customApiKey: customApiKey,\n                setCustomApiKey: setCustomApiKey,\n                handleApiKeySubmit: handleApiKeySubmit\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                lineNumber: 444,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_TextInput__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                isTyping: isTyping,\n                textInputRef: textInputRef,\n                textInput: textInput,\n                setTextInput: setTextInput,\n                handleTextInput: handleTextInput,\n                textPosition: textPosition\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                lineNumber: 452,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n        lineNumber: 397,\n        columnNumber: 5\n    }, undefined);\n};\n_s(CanvasContainer, \"Xolvo6y3i59SoyKQ240FYdS9Db0=\");\n_c = CanvasContainer;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CanvasContainer);\nvar _c;\n$RefreshReg$(_c, \"CanvasContainer\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1icm93c2VyKS8uL2NvbXBvbmVudHMvQ2FudmFzQ29udGFpbmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUU7QUFDbkM7QUFDYztBQUNaO0FBQ1k7QUFDUjtBQUNFO0FBQ0Y7QUFDTjtBQUNnRztBQUU5SCxNQUFNaUIsa0JBQWtCOztJQUN0QixNQUFNQyxZQUFZakIsNkNBQU1BLENBQUM7SUFDekIsTUFBTWtCLG1CQUFtQmxCLDZDQUFNQSxDQUFDO0lBQ2hDLE1BQU1tQixxQkFBcUJuQiw2Q0FBTUEsQ0FBQztJQUNsQyxNQUFNLENBQUNvQixXQUFXQyxhQUFhLEdBQUd0QiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUN1QixVQUFVQyxZQUFZLEdBQUd4QiwrQ0FBUUEsQ0FBQztJQUN6QyxNQUFNeUIsZ0JBQWdCeEIsNkNBQU1BLENBQUM7SUFDN0IsTUFBTSxDQUFDeUIsUUFBUUMsVUFBVSxHQUFHM0IsK0NBQVFBLENBQUM7SUFDckMsTUFBTSxDQUFDNEIsZ0JBQWdCQyxrQkFBa0IsR0FBRzdCLCtDQUFRQSxDQUFDO0lBQ3JELE1BQU0sQ0FBQzhCLFdBQVdDLGFBQWEsR0FBRy9CLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQ2dDLGdCQUFnQkMsa0JBQWtCLEdBQUdqQywrQ0FBUUEsQ0FBQztJQUNyRCxNQUFNLENBQUNrQyxjQUFjQyxnQkFBZ0IsR0FBR25DLCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQ29DLGNBQWNDLGdCQUFnQixHQUFHckMsK0NBQVFBLENBQUM7SUFDakQsTUFBTSxDQUFDc0MsV0FBV0MsYUFBYSxHQUFHdkMsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDd0MsYUFBYUMsZUFBZSxHQUFHekMsK0NBQVFBLENBQUM7SUFDL0MsTUFBTTBDLG1CQUFtQnpDLDZDQUFNQSxDQUFDO0lBQ2hDLE1BQU0sQ0FBQzBDLGlCQUFpQkMsbUJBQW1CLEdBQUc1QywrQ0FBUUEsQ0FBQztJQUN2RCxNQUFN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Ozs7Ozs7Ozs7O3NDQUlmLDhEQUFDMkk7NEJBQUlDLFdBQVU7c0NBQ2IsNEVBQUNuSyxzREFBYUE7Z0NBQ1orQixXQUFXQTtnQ0FDWEMsY0FBY0E7Z0NBQ2RvSSxnQkFBZ0J2RTs7Ozs7Ozs7Ozs7c0NBSXBCLDhEQUFDNUYsa0RBQVNBOzRCQUNSbUosaUJBQWlCQTs0QkFDakJLLGtCQUFrQkE7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQUt4Qiw4REFBQ3ZKLG1EQUFVQTtnQkFDVHVCLGdCQUFnQkE7Z0JBQ2hCd0csaUJBQWlCQTtnQkFDakJwRyxjQUFjQTtnQkFDZEMsaUJBQWlCQTtnQkFDakJvRyxvQkFBb0JBOzs7Ozs7MEJBR3RCLDhEQUFDL0gsa0RBQVNBO2dCQUNSc0MsVUFBVUE7Z0JBQ1ZZLGNBQWNBO2dCQUNkTixXQUFXQTtnQkFDWEMsY0FBY0E7Z0JBQ2R1RixpQkFBaUJBO2dCQUNqQnRGLGNBQWNBOzs7Ozs7Ozs7Ozs7QUFJdEI7R0FsY012QztLQUFBQTtBQW9jTixpRUFBZUEsZUFBZUEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3RydWR5cC9EZXNrdG9wL2Rldi1nZW1pbmktMi4wL2NvbXBvbmVudHMvQ2FudmFzQ29udGFpbmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBDYW52YXMgZnJvbSBcIi4vQ2FudmFzXCI7XG5pbXBvcnQgRGlzcGxheUNhbnZhcyBmcm9tIFwiLi9EaXNwbGF5Q2FudmFzXCI7XG5pbXBvcnQgVG9vbEJhciBmcm9tIFwiLi9Ub29sQmFyXCI7XG5pbXBvcnQgU3R5bGVTZWxlY3RvciBmcm9tIFwiLi9TdHlsZVNlbGVjdG9yXCI7XG5pbXBvcnQgQWN0aW9uQmFyIGZyb20gXCIuL0FjdGlvbkJhclwiO1xuaW1wb3J0IEVycm9yTW9kYWwgZnJvbSBcIi4vRXJyb3JNb2RhbFwiO1xuaW1wb3J0IFRleHRJbnB1dCBmcm9tIFwiLi9UZXh0SW5wdXRcIjtcbmltcG9ydCBIZWFkZXIgZnJvbSBcIi4vSGVhZGVyXCI7XG5pbXBvcnQgeyBnZXRDb29yZGluYXRlcywgaW5pdGlhbGl6ZUNhbnZhcywgZHJhd0ltYWdlVG9DYW52YXMsIGRyYXdCZXppZXJDdXJ2ZSwgZ2V0UHJvbXB0Rm9yU3R5bGUgfSBmcm9tIFwiLi91dGlscy9jYW52YXNVdGlsc1wiO1xuXG5jb25zdCBDYW52YXNDb250YWluZXIgPSAoKSA9PiB7XG4gIGNvbnN0IGNhbnZhc1JlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgZGlzcGxheUNhbnZhc1JlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgYmFja2dyb3VuZEltYWdlUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBbaXNEcmF3aW5nLCBzZXRJc0RyYXdpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGVuQ29sb3IsIHNldFBlbkNvbG9yXSA9IHVzZVN0YXRlKFwiIzAwMDAwMFwiKTtcbiAgY29uc3QgY29sb3JJbnB1dFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgW3Byb21wdCwgc2V0UHJvbXB0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZ2VuZXJhdGVkSW1hZ2UsIHNldEdlbmVyYXRlZEltYWdlXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0Vycm9yTW9kYWwsIHNldFNob3dFcnJvck1vZGFsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Vycm9yTWVzc2FnZSwgc2V0RXJyb3JNZXNzYWdlXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbY3VzdG9tQXBpS2V5LCBzZXRDdXN0b21BcGlLZXldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtzdHlsZU1vZGUsIHNldFN0eWxlTW9kZV0gPSB1c2VTdGF0ZSgnbWF0ZXJpYWwnKTtcbiAgY29uc3QgW3N0cm9rZUNvdW50LCBzZXRTdHJva2VDb3VudF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3Qgc3Ryb2tlVGltZW91dFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgW2xhc3RSZXF1ZXN0VGltZSwgc2V0TGFzdFJlcXVlc3RUaW1lXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBNSU5fUkVRVUVTVF9JTlRFUlZBTCA9IDIwMDA7IC8vIE1pbmltdW0gMiBzZWNvbmRzIGJldHdlZW4gcmVxdWVzdHNcbiAgY29uc3QgW2N1cnJlbnRUb29sLCBzZXRDdXJyZW50VG9vbF0gPSB1c2VTdGF0ZSgncGVuY2lsJyk7IC8vICdwZW5jaWwnLCAncGVuJywgJ2VyYXNlcicsICd0ZXh0J1xuICBjb25zdCBbaXNUeXBpbmcsIHNldElzVHlwaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3VuZG9TdGFjaywgc2V0VW5kb1N0YWNrXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2JlemllclBvaW50cywgc2V0QmV6aWVyUG9pbnRzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3RleHRJbnB1dCwgc2V0VGV4dElucHV0XSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW3RleHRQb3NpdGlvbiwgc2V0VGV4dFBvc2l0aW9uXSA9IHVzZVN0YXRlKHsgeDogMCwgeTogMCB9KTtcbiAgY29uc3QgdGV4dElucHV0UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBbaXNQZW5EcmF3aW5nLCBzZXRJc1BlbkRyYXdpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY3VycmVudEJlemllclBhdGgsIHNldEN1cnJlbnRCZXppZXJQYXRoXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3RlbXBQb2ludHMsIHNldFRlbXBQb2ludHNdID0gdXNlU3RhdGUoW10pO1xuXG4gIC8vIExvYWQgYmFja2dyb3VuZCBpbWFnZSB3aGVuIGdlbmVyYXRlZEltYWdlIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZ2VuZXJhdGVkSW1hZ2UgJiYgY2FudmFzUmVmLmN1cnJlbnQpIHtcbiAgICAgIC8vIFVzZSB0aGUgd2luZG93LkltYWdlIGNvbnN0cnVjdG9yIHRvIGF2b2lkIGNvbmZsaWN0IHdpdGggTmV4dC5qcyBJbWFnZSBjb21wb25lbnRcbiAgICAgIGNvbnN0IGltZyA9IG5ldyB3aW5kb3cuSW1hZ2UoKTtcbiAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIGJhY2tncm91bmRJbWFnZVJlZi5jdXJyZW50ID0gaW1nO1xuICAgICAgICBkcmF3SW1hZ2VUb0NhbnZhcyhjYW52YXNSZWYuY3VycmVudCwgYmFja2dyb3VuZEltYWdlUmVmLmN1cnJlbnQpO1xuICAgICAgfTtcbiAgICAgIGltZy5zcmMgPSBnZW5lcmF0ZWRJbWFnZTtcbiAgICB9XG4gIH0sIFtnZW5lcmF0ZWRJbWFnZV0pO1xuXG4gIC8vIEluaXRpYWxpemUgY2FudmFzIHdpdGggd2hpdGUgYmFja2dyb3VuZCB3aGVuIGNvbXBvbmVudCBtb3VudHNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2FudmFzUmVmLmN1cnJlbnQpIHtcbiAgICAgIGluaXRpYWxpemVDYW52YXMoY2FudmFzUmVmLmN1cnJlbnQpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIGNvbnN0IHN0YXJ0RHJhd2luZyA9IChlKSA9PiB7XG4gICAgY29uc3QgeyB4LCB5IH0gPSBnZXRDb29yZGluYXRlcyhlLCBjYW52YXNSZWYuY3VycmVudCk7XG4gICAgXG4gICAgaWYgKGUudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdzdGFydERyYXdpbmcgY2FsbGVkJywgeyBjdXJyZW50VG9vbCwgeCwgeSB9KTtcbiAgICBcbiAgICBjb25zdCBjdHggPSBjYW52YXNSZWYuY3VycmVudC5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5tb3ZlVG8oeCwgeSk7XG4gICAgc2V0SXNEcmF3aW5nKHRydWUpO1xuICAgIHNldFN0cm9rZUNvdW50KHByZXYgPT4gcHJldiArIDEpO1xuICAgIFxuICAgIC8vIFNhdmUgY2FudmFzIHN0YXRlIGJlZm9yZSBkcmF3aW5nXG4gICAgc2F2ZUNhbnZhc1N0YXRlKCk7XG4gIH07XG5cbiAgY29uc3QgZHJhdyA9IChlKSA9PiB7XG4gICAgaWYgKCFpc0RyYXdpbmcpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjb25zdCB7IHgsIHkgfSA9IGdldENvb3JkaW5hdGVzKGUsIGNhbnZhcyk7XG4gICAgXG4gICAgLy8gT2NjYXNpb25hbGx5IGxvZyBkcmF3aW5nIGFjdGl2aXR5XG4gICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjA1KSB7IC8vIE9ubHkgbG9nIH41JSBvZiBtb3ZlIGV2ZW50cyB0byBhdm9pZCBjb25zb2xlIHNwYW1cbiAgICAgIGNvbnNvbGUubG9nKCdkcmF3IGNhbGxlZCcsIHsgY3VycmVudFRvb2wsIGlzRHJhd2luZywgeCwgeSB9KTtcbiAgICB9XG4gICAgXG4gICAgY3R4LmxpbmVXaWR0aCA9IDU7XG4gICAgY3R4LmxpbmVDYXAgPSAncm91bmQnO1xuICAgIFxuICAgIGlmIChjdXJyZW50VG9vbCA9PT0gJ2VyYXNlcicpIHtcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjRkZGRkZGJztcbiAgICAgIGN0eC5saW5lV2lkdGggPSAyMDtcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMwMDAwMDAnO1xuICAgIH1cbiAgICBcbiAgICBpZiAoY3VycmVudFRvb2wgPT09ICdwZW4nKSB7XG4gICAgICAvLyBTaG93IHByZXZpZXcgbGluZSB3aGlsZSBtb3ZpbmdcbiAgICAgIGlmICh0ZW1wUG9pbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgbGFzdFBvaW50ID0gdGVtcFBvaW50c1t0ZW1wUG9pbnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5tb3ZlVG8obGFzdFBvaW50LngsIGxhc3RQb2ludC55KTtcbiAgICAgICAgY3R4LmxpbmVUbyh4LCB5KTtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjdHgubGluZVRvKHgsIHkpO1xuICAgICAgY3R4LnN0cm9rZSgpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzdG9wRHJhd2luZyA9IGFzeW5jIChlKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ3N0b3BEcmF3aW5nIGNhbGxlZCBpbiBDYW52YXNDb250YWluZXInLCB7IFxuICAgICAgaXNEcmF3aW5nLCBcbiAgICAgIGN1cnJlbnRUb29sLCBcbiAgICAgIGhhc0V2ZW50OiAhIWUsXG4gICAgICBldmVudFR5cGU6IGUgPyBlLnR5cGUgOiAnbm9uZSdcbiAgICB9KTtcbiAgICBcbiAgICBpZiAoIWlzRHJhd2luZykgcmV0dXJuO1xuICAgIHNldElzRHJhd2luZyhmYWxzZSk7XG4gICAgXG4gICAgLy8gUmVtb3ZlIHRoZSB0aW1lb3V0LWJhc2VkIGdlbmVyYXRpb25cbiAgICBpZiAoc3Ryb2tlVGltZW91dFJlZi5jdXJyZW50KSB7XG4gICAgICBjbGVhclRpbWVvdXQoc3Ryb2tlVGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgIHN0cm9rZVRpbWVvdXRSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gT25seSBnZW5lcmF0ZSBvbiBtb3VzZS90b3VjaCB1cCBldmVudHNcbiAgICBpZiAoZSAmJiAoZS50eXBlID09PSAnbW91c2V1cCcgfHwgZS50eXBlID09PSAndG91Y2hlbmQnKSkge1xuICAgICAgY29uc29sZS5sb2coJ3N0b3BEcmF3aW5nOiBkZXRlY3RlZCBtb3VzZXVwL3RvdWNoZW5kIGV2ZW50JywgeyBzdHJva2VDb3VudCB9KTtcbiAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgZW5vdWdoIHN0cm9rZXMgdG8gZ2VuZXJhdGUgKGluY3JlYXNlZCB0byAxMCBmcm9tIDMpXG4gICAgICBpZiAoc3Ryb2tlQ291bnQgPj0gMTApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3N0b3BEcmF3aW5nOiBjYWxsaW5nIGhhbmRsZUdlbmVyYXRpb24gZHVlIHRvIHN0cm9rZSBjb3VudCcpO1xuICAgICAgICBhd2FpdCBoYW5kbGVHZW5lcmF0aW9uKCk7XG4gICAgICAgIHNldFN0cm9rZUNvdW50KDApO1xuICAgICAgfVxuICAgICAgLy8gTm8gbG9uZ2VyIHVzaW5nIHRpbWVvdXRzIGZvciBkZWxheWVkIGdlbmVyYXRpb25cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2xlYXJDYW52YXMgPSAoKSA9PiB7XG4gICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7XG4gICAgaWYgKCFjYW52YXMpIHJldHVybjtcbiAgICBcbiAgICBpbml0aWFsaXplQ2FudmFzKGNhbnZhcyk7XG4gICAgXG4gICAgc2V0R2VuZXJhdGVkSW1hZ2UobnVsbCk7XG4gICAgYmFja2dyb3VuZEltYWdlUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIFxuICAgIC8vIFNhdmUgZW1wdHkgY2FudmFzIHN0YXRlXG4gICAgc2F2ZUNhbnZhc1N0YXRlKCk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlR2VuZXJhdGlvbiA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnaGFuZGxlR2VuZXJhdGlvbiBjYWxsZWQnKTtcbiAgICBcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGlmIChub3cgLSBsYXN0UmVxdWVzdFRpbWUgPCBNSU5fUkVRVUVTVF9JTlRFUlZBTCkge1xuICAgICAgY29uc29sZS5sb2coXCJSZXF1ZXN0IHRocm90dGxlZCAtIHRvbyBzb29uIGFmdGVyIGxhc3QgcmVxdWVzdFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgc2V0TGFzdFJlcXVlc3RUaW1lKG5vdyk7XG4gICAgaWYgKCFjYW52YXNSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBnZW5lcmF0aW9uIHByb2Nlc3MnKTtcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50O1xuICAgICAgY29uc3QgdGVtcENhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgdGVtcENhbnZhcy53aWR0aCA9IGNhbnZhcy53aWR0aDtcbiAgICAgIHRlbXBDYW52YXMuaGVpZ2h0ID0gY2FudmFzLmhlaWdodDtcbiAgICAgIGNvbnN0IHRlbXBDdHggPSB0ZW1wQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICBcbiAgICAgIHRlbXBDdHguZmlsbFN0eWxlID0gJyNGRkZGRkYnO1xuICAgICAgdGVtcEN0eC5maWxsUmVjdCgwLCAwLCB0ZW1wQ2FudmFzLndpZHRoLCB0ZW1wQ2FudmFzLmhlaWdodCk7XG4gICAgICB0ZW1wQ3R4LmRyYXdJbWFnZShjYW52YXMsIDAsIDApO1xuICAgICAgXG4gICAgICBjb25zdCBkcmF3aW5nRGF0YSA9IHRlbXBDYW52YXMudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpLnNwbGl0KFwiLFwiKVsxXTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVxdWVzdFBheWxvYWQgPSB7XG4gICAgICAgIHByb21wdDogZ2V0UHJvbXB0Rm9yU3R5bGUoc3R5bGVNb2RlKSxcbiAgICAgICAgZHJhd2luZ0RhdGEsXG4gICAgICAgIGN1c3RvbUFwaUtleVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcIi9hcGkvZ2VuZXJhdGVcIiwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RQYXlsb2FkKSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgXG4gICAgICBpZiAoZGF0YS5zdWNjZXNzICYmIGRhdGEuaW1hZ2VEYXRhKSB7XG4gICAgICAgIGNvbnN0IGltYWdlVXJsID0gYGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwke2RhdGEuaW1hZ2VEYXRhfWA7XG4gICAgICAgIC8vIERyYXcgdGhlIGdlbmVyYXRlZCBpbWFnZSB0byB0aGUgZGlzcGxheSBjYW52YXNcbiAgICAgICAgY29uc3QgZGlzcGxheUNhbnZhcyA9IGRpc3BsYXlDYW52YXNSZWYuY3VycmVudDtcbiAgICAgICAgY29uc3QgZGlzcGxheUN0eCA9IGRpc3BsYXlDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgZGlzcGxheUN0eC5jbGVhclJlY3QoMCwgMCwgZGlzcGxheUNhbnZhcy53aWR0aCwgZGlzcGxheUNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgIGRpc3BsYXlDdHguZHJhd0ltYWdlKGltZywgMCwgMCwgZGlzcGxheUNhbnZhcy53aWR0aCwgZGlzcGxheUNhbnZhcy5oZWlnaHQpO1xuICAgICAgICB9O1xuICAgICAgICBpbWcuc3JjID0gaW1hZ2VVcmw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGdlbmVyYXRlIGltYWdlOlwiLCBkYXRhLmVycm9yKTtcbiAgICAgICAgaWYgKGRhdGEuZXJyb3IgJiYgKFxuICAgICAgICAgIGRhdGEuZXJyb3IuaW5jbHVkZXMoXCJSZXNvdXJjZSBoYXMgYmVlbiBleGhhdXN0ZWRcIikgfHwgXG4gICAgICAgICAgZGF0YS5lcnJvci5pbmNsdWRlcyhcInF1b3RhXCIpIHx8XG4gICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID09PSA0MjkgfHxcbiAgICAgICAgICByZXNwb25zZS5zdGF0dXMgPT09IDUwMFxuICAgICAgICApKSB7XG4gICAgICAgICAgc2V0RXJyb3JNZXNzYWdlKGRhdGEuZXJyb3IpO1xuICAgICAgICAgIHNldFNob3dFcnJvck1vZGFsKHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZW5lcmF0aW5nIGltYWdlOlwiLCBlcnJvcik7XG4gICAgICBzZXRFcnJvck1lc3NhZ2UoZXJyb3IubWVzc2FnZSB8fCBcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpO1xuICAgICAgc2V0U2hvd0Vycm9yTW9kYWwodHJ1ZSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9LCBbXG4gICAgbGFzdFJlcXVlc3RUaW1lLCBcbiAgICBzdHlsZU1vZGUsIFxuICAgIGN1c3RvbUFwaUtleVxuICBdKTtcblxuICAvLyBDbG9zZSB0aGUgZXJyb3IgbW9kYWxcbiAgY29uc3QgY2xvc2VFcnJvck1vZGFsID0gKCkgPT4ge1xuICAgIHNldFNob3dFcnJvck1vZGFsKGZhbHNlKTtcbiAgfTtcblxuICAvLyBIYW5kbGUgdGhlIGN1c3RvbSBBUEkga2V5IHN1Ym1pc3Npb25cbiAgY29uc3QgaGFuZGxlQXBpS2V5U3VibWl0ID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgc2V0U2hvd0Vycm9yTW9kYWwoZmFsc2UpO1xuICAgIC8vIFdpbGwgdXNlIHRoZSBjdXN0b21BcGlLZXkgc3RhdGUgaW4gdGhlIG5leHQgQVBJIGNhbGxcbiAgfTtcblxuICAvLyBBZGQgdGhpcyBmdW5jdGlvbiB0byBoYW5kbGUgdW5kb1xuICBjb25zdCBoYW5kbGVVbmRvID0gKCkgPT4ge1xuICAgIGlmICh1bmRvU3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7XG4gICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgIGNvbnN0IHByZXZpb3VzU3RhdGUgPSB1bmRvU3RhY2tbdW5kb1N0YWNrLmxlbmd0aCAtIDJdOyAvLyBHZXQgc2Vjb25kIHRvIGxhc3Qgc3RhdGVcbiAgICAgIFxuICAgICAgaWYgKHByZXZpb3VzU3RhdGUpIHtcbiAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjRkZGRkZGJztcbiAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7XG4gICAgICAgIH07XG4gICAgICAgIGltZy5zcmMgPSBwcmV2aW91c1N0YXRlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgbm8gcHJldmlvdXMgc3RhdGUsIGNsZWFyIHRvIHdoaXRlXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI0ZGRkZGRic7XG4gICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBzZXRVbmRvU3RhY2socHJldiA9PiBwcmV2LnNsaWNlKDAsIC0xKSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEFkZCB0aGlzIGZ1bmN0aW9uIHRvIHNhdmUgY2FudmFzIHN0YXRlXG4gIGNvbnN0IHNhdmVDYW52YXNTdGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcbiAgICBpZiAoIWNhbnZhcykgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGRhdGFVUkwgPSBjYW52YXMudG9EYXRhVVJMKCk7XG4gICAgc2V0VW5kb1N0YWNrKHByZXYgPT4gWy4uLnByZXYsIGRhdGFVUkxdKTtcbiAgfTtcblxuICAvLyBBZGQgdGhpcyBmdW5jdGlvbiB0byBoYW5kbGUgdGV4dCBpbnB1dFxuICBjb25zdCBoYW5kbGVUZXh0SW5wdXQgPSAoZSkgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7XG4gICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgIGN0eC5mb250ID0gJzI0cHggQXJpYWwnO1xuICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwMDAwJztcbiAgICAgIGN0eC5maWxsVGV4dCh0ZXh0SW5wdXQsIHRleHRQb3NpdGlvbi54LCB0ZXh0UG9zaXRpb24ueSk7XG4gICAgICBzZXRUZXh0SW5wdXQoJycpO1xuICAgICAgc2V0SXNUeXBpbmcoZmFsc2UpO1xuICAgICAgc2F2ZUNhbnZhc1N0YXRlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIE1vZGlmeSB0aGUgY2FudmFzIGNsaWNrIGhhbmRsZXIgdG8gaGFuZGxlIHRleHQgcGxhY2VtZW50XG4gIGNvbnN0IGhhbmRsZUNhbnZhc0NsaWNrID0gKGUpID0+IHtcbiAgICBpZiAoY3VycmVudFRvb2wgPT09ICd0ZXh0Jykge1xuICAgICAgY29uc3QgeyB4LCB5IH0gPSBnZXRDb29yZGluYXRlcyhlLCBjYW52YXNSZWYuY3VycmVudCk7XG4gICAgICBzZXRUZXh0UG9zaXRpb24oeyB4LCB5IH0pO1xuICAgICAgc2V0SXNUeXBpbmcodHJ1ZSk7XG4gICAgICBpZiAodGV4dElucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdGV4dElucHV0UmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gQWRkIG5ldyBmdW5jdGlvbiB0byBoYW5kbGUgcGVuIGNsaWNrc1xuICBjb25zdCBoYW5kbGVQZW5DbGljayA9IChlKSA9PiB7XG4gICAgaWYgKGN1cnJlbnRUb29sICE9PSAncGVuJykgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IHsgeCwgeSB9ID0gZ2V0Q29vcmRpbmF0ZXMoZSwgY2FudmFzUmVmLmN1cnJlbnQpO1xuICAgIGNvbnN0IG5ld1BvaW50ID0geyB4LCB5IH07XG4gICAgXG4gICAgY29uc29sZS5sb2coJ2hhbmRsZVBlbkNsaWNrIGNhbGxlZCcsIHsgeCwgeSwgdGVtcFBvaW50c0NvdW50OiB0ZW1wUG9pbnRzLmxlbmd0aCB9KTtcbiAgICBcbiAgICBzZXRUZW1wUG9pbnRzKHByZXYgPT4gWy4uLnByZXYsIG5ld1BvaW50XSk7XG4gICAgXG4gICAgLy8gRHJhdyBwb2ludCBpbmRpY2F0b3JcbiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAwMDAnO1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHguYXJjKHgsIHksIDMsIDAsIE1hdGguUEkgKiAyKTtcbiAgICBjdHguZmlsbCgpO1xuICAgIFxuICAgIC8vIFdoZW4gd2UgaGF2ZSA0IHBvaW50cywgZHJhdyB0aGUgYmV6aWVyIGN1cnZlXG4gICAgaWYgKHRlbXBQb2ludHMubGVuZ3RoID09PSAzKSB7XG4gICAgICBjb25zb2xlLmxvZygnaGFuZGxlUGVuQ2xpY2s6IERyYXdpbmcgYmV6aWVyIGN1cnZlIHdpdGggNCBwb2ludHMnKTtcbiAgICAgIGNvbnN0IHBvaW50cyA9IFsuLi50ZW1wUG9pbnRzLCBuZXdQb2ludF07XG4gICAgICBkcmF3QmV6aWVyQ3VydmUoY2FudmFzLCBwb2ludHMpO1xuICAgICAgc2V0VGVtcFBvaW50cyhbXSk7IC8vIFJlc2V0IHBvaW50cyBmb3IgbmV4dCBjdXJ2ZVxuICAgICAgc2F2ZUNhbnZhc1N0YXRlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEFkZCB0aGlzIG5ldyBmdW5jdGlvbiBuZWFyIHlvdXIgb3RoZXIgdXRpbGl0eSBmdW5jdGlvbnNcbiAgY29uc3QgaGFuZGxlU2F2ZUltYWdlID0gKCkgPT4ge1xuICAgIC8vIEZvciB0aGUgZ2VuZXJhdGVkIGltYWdlXG4gICAgaWYgKGRpc3BsYXlDYW52YXNSZWYuY3VycmVudCkge1xuICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgIGxpbmsuZG93bmxvYWQgPSAnY2hyb21lLXN0dWR5LnBuZyc7XG4gICAgICBsaW5rLmhyZWYgPSBkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcbiAgICAgIGxpbmsuY2xpY2soKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQWRkIHRoaXMgZnVuY3Rpb24gdG8gaGFuZGxlIHJlZ2VuZXJhdGlvblxuICBjb25zdCBoYW5kbGVSZWdlbmVyYXRlID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmIChjYW52YXNSZWYuY3VycmVudCkge1xuICAgICAgYXdhaXQgaGFuZGxlR2VuZXJhdGlvbigpO1xuICAgIH1cbiAgfTtcblxuICAvLyBBZGQgdXNlRWZmZWN0IHRvIHdhdGNoIGZvciBzdHlsZU1vZGUgY2hhbmdlcyBhbmQgcmVnZW5lcmF0ZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIE9ubHkgdHJpZ2dlciBpZiB3ZSBoYXZlIHNvbWV0aGluZyBkcmF3biAoY2hlY2sgaWYgY2FudmFzIGlzIG5vdCBlbXB0eSlcbiAgICBjb25zdCBjaGVja0NhbnZhc0FuZEdlbmVyYXRlID0gYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKCFjYW52YXNSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgICAgXG4gICAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcbiAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgY29uc3QgaW1hZ2VEYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiBjYW52YXMgaGFzIGFueSBub24td2hpdGUgcGl4ZWxzXG4gICAgICBjb25zdCBoYXNEcmF3aW5nID0gQXJyYXkuZnJvbShpbWFnZURhdGEuZGF0YSkuc29tZSgocGl4ZWwsIGluZGV4KSA9PiB7XG4gICAgICAgIC8vIENoZWNrIG9ubHkgUkdCIHZhbHVlcyAoc2tpcCBhbHBoYSlcbiAgICAgICAgcmV0dXJuIGluZGV4ICUgNCAhPT0gMyAmJiBwaXhlbCAhPT0gMjU1O1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChoYXNEcmF3aW5nKSB7XG4gICAgICAgIGF3YWl0IGhhbmRsZUdlbmVyYXRpb24oKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gU2tpcCBvbiBmaXJzdCByZW5kZXJcbiAgICBpZiAoc3R5bGVNb2RlKSB7XG4gICAgICBjaGVja0NhbnZhc0FuZEdlbmVyYXRlKCk7XG4gICAgfVxuICB9LCBbc3R5bGVNb2RlLCBoYW5kbGVHZW5lcmF0aW9uXSk7IC8vIEFkZGVkIGhhbmRsZUdlbmVyYXRpb24gdG8gZGVwZW5kZW5jeSBhcnJheVxuXG4gIC8vIENsZWFudXAgZnVuY3Rpb24gLSBrZWVwIHRoaXMgdG8gcHJldmVudCBtZW1vcnkgbGVha3NcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHN0cm9rZVRpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoc3Ryb2tlVGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgICAgc3Ryb2tlVGltZW91dFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWluLWgtc2NyZWVuIGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LXN0YXJ0IGJnLWdyYXktMTAwIHAtNFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktOFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICA8SGVhZGVyIC8+XG4gICAgICAgICAgICA8VG9vbEJhciBcbiAgICAgICAgICAgICAgY3VycmVudFRvb2w9e2N1cnJlbnRUb29sfVxuICAgICAgICAgICAgICBzZXRDdXJyZW50VG9vbD17c2V0Q3VycmVudFRvb2x9XG4gICAgICAgICAgICAgIGhhbmRsZVVuZG89e2hhbmRsZVVuZG99XG4gICAgICAgICAgICAgIGNsZWFyQ2FudmFzPXtjbGVhckNhbnZhc31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGdhcC04XCI+XG4gICAgICAgICAgICA8Q2FudmFzIFxuICAgICAgICAgICAgICBjYW52YXNSZWY9e2NhbnZhc1JlZn1cbiAgICAgICAgICAgICAgY3VycmVudFRvb2w9e2N1cnJlbnRUb29sfVxuICAgICAgICAgICAgICBpc0RyYXdpbmc9e2lzRHJhd2luZ31cbiAgICAgICAgICAgICAgc3RhcnREcmF3aW5nPXtzdGFydERyYXdpbmd9XG4gICAgICAgICAgICAgIGRyYXc9e2RyYXd9XG4gICAgICAgICAgICAgIHN0b3BEcmF3aW5nPXtzdG9wRHJhd2luZ31cbiAgICAgICAgICAgICAgaGFuZGxlQ2FudmFzQ2xpY2s9e2hhbmRsZUNhbnZhc0NsaWNrfVxuICAgICAgICAgICAgICBoYW5kbGVQZW5DbGljaz17aGFuZGxlUGVuQ2xpY2t9XG4gICAgICAgICAgICAgIGhhbmRsZUdlbmVyYXRpb249e2hhbmRsZUdlbmVyYXRpb259XG4gICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICA8RGlzcGxheUNhbnZhcyBcbiAgICAgICAgICAgICAgZGlzcGxheUNhbnZhc1JlZj17ZGlzcGxheUNhbnZhc1JlZn1cbiAgICAgICAgICAgICAgaXNMb2FkaW5nPXtpc0xvYWRpbmd9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHNtOmZsZXgtcm93IGdhcC00IG1iLTZcIj5cbiAgICAgICAgICAgIDxTdHlsZVNlbGVjdG9yIFxuICAgICAgICAgICAgICBzdHlsZU1vZGU9e3N0eWxlTW9kZX1cbiAgICAgICAgICAgICAgc2V0U3R5bGVNb2RlPXtzZXRTdHlsZU1vZGV9XG4gICAgICAgICAgICAgIGhhbmRsZUdlbmVyYXRlPXtoYW5kbGVHZW5lcmF0aW9ufVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxBY3Rpb25CYXIgXG4gICAgICAgICAgICBoYW5kbGVTYXZlSW1hZ2U9e2hhbmRsZVNhdmVJbWFnZX1cbiAgICAgICAgICAgIGhhbmRsZVJlZ2VuZXJhdGU9e2hhbmRsZVJlZ2VuZXJhdGV9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPEVycm9yTW9kYWwgXG4gICAgICAgIHNob3dFcnJvck1vZGFsPXtzaG93RXJyb3JNb2RhbH1cbiAgICAgICAgY2xvc2VFcnJvck1vZGFsPXtjbG9zZUVycm9yTW9kYWx9XG4gICAgICAgIGN1c3RvbUFwaUtleT17Y3VzdG9tQXBpS2V5fVxuICAgICAgICBzZXRDdXN0b21BcGlLZXk9e3NldEN1c3RvbUFwaUtleX1cbiAgICAgICAgaGFuZGxlQXBpS2V5U3VibWl0PXtoYW5kbGVBcGlLZXlTdWJtaXR9XG4gICAgICAvPlxuXG4gICAgICA8VGV4dElucHV0IFxuICAgICAgICBpc1R5cGluZz17aXNUeXBpbmd9XG4gICAgICAgIHRleHRJbnB1dFJlZj17dGV4dElucHV0UmVmfVxuICAgICAgICB0ZXh0SW5wdXQ9e3RleHRJbnB1dH1cbiAgICAgICAgc2V0VGV4dElucHV0PXtzZXRUZXh0SW5wdXR9XG4gICAgICAgIGhhbmRsZVRleHRJbnB1dD17aGFuZGxlVGV4dElucHV0fVxuICAgICAgICB0ZXh0UG9zaXRpb249e3RleHRQb3NpdGlvbn1cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNDb250YWluZXI7ICJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZVJlZiIsInVzZUVmZmVjdCIsInVzZUNhbGxiYWNrIiwiQ2FudmFzIiwiRGlzcGxheUNhbnZhcyIsIlRvb2xCYXIiLCJTdHlsZVNlbGVjdG9yIiwiQWN0aW9uQmFyIiwiRXJyb3JNb2RhbCIsIlRleHRJbnB1dCIsIkhlYWRlciIsImdldENvb3JkaW5hdGVzIiwiaW5pdGlhbGl6ZUNhbnZhcyIsImRyYXdJbWFnZVRvQ2FudmFzIiwiZHJhd0JlemllckN1cnZlIiwiZ2V0UHJvbXB0Rm9yU3R5bGUiLCJDYW52YXNDb250YWluZXIiLCJjYW52YXNSZWYiLCJkaXNwbGF5Q2FudmFzUmVmIiwiYmFja2dyb3VuZEltYWdlUmVmIiwiaXNEcmF3aW5nIiwic2V0SXNEcmF3aW5nIiwicGVuQ29sb3IiLCJzZXRQZW5Db2xvciIsImNvbG9ySW5wdXRSZWYiLCJwcm9tcHQiLCJzZXRQcm9tcHQiLCJnZW5lcmF0ZWRJbWFnZSIsInNldEdlbmVyYXRlZEltYWdlIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwic2hvd0Vycm9yTW9kYWwiLCJzZXRTaG93RXJyb3JNb2RhbCIsImVycm9yTWVzc2FnZSIsInNldEVycm9yTWVzc2FnZSIsImN1c3RvbUFwaUtleSIsInNldEN1c3RvbUFwaUtleSIsInN0eWxlTW9kZSIsInNldFN0eWxlTW9kZSIsInN0cm9rZUNvdW50Iiwic2V0U3Ryb2tlQ291bnQiLCJzdHJva2VUaW1lb3V0UmVmIiwibGFzdFJlcXVlc3RUaW1lIiwic2V0TGFzdFJlcXVlc3RUaW1lIiwiTUlOX1JFUVVFU1RfSU5URVJWQUwiLCJjdXJyZW50VG9vbCIsInNldEN1cnJlbnRUb29sIiwiaXNUeXBpbmciLCJzZXRJc1R5cGluZyIsInVuZG9TdGFjayIsInNldFVuZG9TdGFjayIsImJlemllclBvaW50cyIsInNldEJlemllclBvaW50cyIsInRleHRJbnB1dCIsInNldFRleHRJbnB1dCIsInRleHRQb3NpdGlvbiIsInNldFRleHRQb3NpdGlvbiIsIngiLCJ5IiwidGV4dElucHV0UmVmIiwiaXNQZW5EcmF3aW5nIiwic2V0SXNQZW5EcmF3aW5nIiwiY3VycmVudEJlemllclBhdGgiLCJzZXRDdXJyZW50QmV6aWVyUGF0aCIsInRlbXBQb2ludHMiLCJzZXRUZW1wUG9pbnRzIiwiY3VycmVudCIsImltZyIsIndpbmRvdyIsIkltYWdlIiwib25sb2FkIiwic3JjIiwic3RhcnREcmF3aW5nIiwiZSIsInR5cGUiLCJwcmV2ZW50RGVmYXVsdCIsImNvbnNvbGUiLCJsb2ciLCJjdHgiLCJnZXRDb250ZXh0IiwiYmVnaW5QYXRoIiwibW92ZVRvIiwicHJldiIsInNhdmVDYW52YXNTdGF0ZSIsImRyYXciLCJjYW52YXMiLCJNYXRoIiwicmFuZG9tIiwibGluZVdpZHRoIiwibGluZUNhcCIsInN0cm9rZVN0eWxlIiwibGVuZ3RoIiwibGFzdFBvaW50IiwibGluZVRvIiwic3Ryb2tlIiwic3RvcERyYXdpbmciLCJoYXNFdmVudCIsImV2ZW50VHlwZSIsImNsZWFyVGltZW91dCIsImhhbmRsZUdlbmVyYXRpb24iLCJjbGVhckNhbnZhcyIsIm5vdyIsIkRhdGUiLCJ0ZW1wQ2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwid2lkdGgiLCJoZWlnaHQiLCJ0ZW1wQ3R4IiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJkcmF3SW1hZ2UiLCJkcmF3aW5nRGF0YSIsInRvRGF0YVVSTCIsInNwbGl0IiwicmVxdWVzdFBheWxvYWQiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsImpzb24iLCJzdWNjZXNzIiwiaW1hZ2VEYXRhIiwiaW1hZ2VVcmwiLCJkaXNwbGF5Q2FudmFzIiwiZGlzcGxheUN0eCIsImNsZWFyUmVjdCIsImVycm9yIiwiaW5jbHVkZXMiLCJzdGF0dXMiLCJtZXNzYWdlIiwiY2xvc2VFcnJvck1vZGFsIiwiaGFuZGxlQXBpS2V5U3VibWl0IiwiaGFuZGxlVW5kbyIsInByZXZpb3VzU3RhdGUiLCJzbGljZSIsImRhdGFVUkwiLCJoYW5kbGVUZXh0SW5wdXQiLCJrZXkiLCJmb250IiwiZmlsbFRleHQiLCJoYW5kbGVDYW52YXNDbGljayIsImZvY3VzIiwiaGFuZGxlUGVuQ2xpY2siLCJuZXdQb2ludCIsInRlbXBQb2ludHNDb3VudCIsImFyYyIsIlBJIiwiZmlsbCIsInBvaW50cyIsImhhbmRsZVNhdmVJbWFnZSIsImxpbmsiLCJkb3dubG9hZCIsImhyZWYiLCJjbGljayIsImhhbmRsZVJlZ2VuZXJhdGUiLCJjaGVja0NhbnZhc0FuZEdlbmVyYXRlIiwiZ2V0SW1hZ2VEYXRhIiwiaGFzRHJhd2luZyIsIkFycmF5IiwiZnJvbSIsInNvbWUiLCJwaXhlbCIsImluZGV4IiwiZGl2IiwiY2xhc3NOYW1lIiwiaGFuZGxlR2VuZXJhdGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-browser)/./components/CanvasContainer.js\n"));

/***/ })

});