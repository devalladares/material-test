"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("_pages-dir-browser_components_CanvasContainer_js",{

/***/ "(pages-dir-browser)/./components/CanvasContainer.js":
/*!***************************************!*\
  !*** ./components/CanvasContainer.js ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(pages-dir-browser)/./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(pages-dir-browser)/./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Canvas__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Canvas */ \"(pages-dir-browser)/./components/Canvas.js\");\n/* harmony import */ var _DisplayCanvas__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DisplayCanvas */ \"(pages-dir-browser)/./components/DisplayCanvas.js\");\n/* harmony import */ var _ToolBar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ToolBar */ \"(pages-dir-browser)/./components/ToolBar.js\");\n/* harmony import */ var _StyleSelector__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./StyleSelector */ \"(pages-dir-browser)/./components/StyleSelector.js\");\n/* harmony import */ var _ActionBar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ActionBar */ \"(pages-dir-browser)/./components/ActionBar.js\");\n/* harmony import */ var _ErrorModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ErrorModal */ \"(pages-dir-browser)/./components/ErrorModal.js\");\n/* harmony import */ var _TextInput__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./TextInput */ \"(pages-dir-browser)/./components/TextInput.js\");\n/* harmony import */ var _Header__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Header */ \"(pages-dir-browser)/./components/Header.js\");\n/* harmony import */ var _utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils/canvasUtils */ \"(pages-dir-browser)/./components/utils/canvasUtils.js\");\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\nconst CanvasContainer = ()=>{\n    _s();\n    const canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const displayCanvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const backgroundImageRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [isDrawing, setIsDrawing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [penColor, setPenColor] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"#000000\");\n    const colorInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [prompt, setPrompt] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [generatedImage, setGeneratedImage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showErrorModal, setShowErrorModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [errorMessage, setErrorMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [customApiKey, setCustomApiKey] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [styleMode, setStyleMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('material');\n    const [strokeCount, setStrokeCount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const strokeTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [lastRequestTime, setLastRequestTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const MIN_REQUEST_INTERVAL = 2000; // Minimum 2 seconds between requests\n    const [currentTool, setCurrentTool] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('pencil'); // 'pencil', 'pen', 'eraser', 'text'\n    const [isTyping, setIsTyping] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [undoStack, setUndoStack] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [bezierPoints, setBezierPoints] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [textInput, setTextInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [textPosition, setTextPosition] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        x: 0,\n        y: 0\n    });\n    const textInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [isPenDrawing, setIsPenDrawing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [currentBezierPath, setCurrentBezierPath] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [tempPoints, setTempPoints] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    // Load background image when generatedImage changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasContainer.useEffect\": ()=>{\n            if (generatedImage && canvasRef.current) {\n                // Use the window.Image constructor to avoid conflict with Next.js Image component\n                const img = new window.Image();\n                img.onload = ({\n                    \"CanvasContainer.useEffect\": ()=>{\n                        backgroundImageRef.current = img;\n                        (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.drawImageToCanvas)(canvasRef.current, backgroundImageRef.current);\n                    }\n                })[\"CanvasContainer.useEffect\"];\n                img.src = generatedImage;\n            }\n        }\n    }[\"CanvasContainer.useEffect\"], [\n        generatedImage\n    ]);\n    // Initialize canvas with white background when component mounts\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasContainer.useEffect\": ()=>{\n            if (canvasRef.current) {\n                (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.initializeCanvas)(canvasRef.current);\n            }\n        }\n    }[\"CanvasContainer.useEffect\"], []);\n    const startDrawing = (e)=>{\n        const { x, y } = (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.getCoordinates)(e, canvasRef.current);\n        if (e.type === 'touchstart') {\n            e.preventDefault();\n        }\n        console.log('startDrawing called', {\n            currentTool,\n            x,\n            y\n        });\n        const ctx = canvasRef.current.getContext(\"2d\");\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n        setIsDrawing(true);\n        setStrokeCount((prev)=>prev + 1);\n        // Save canvas state before drawing\n        saveCanvasState();\n    };\n    const draw = (e)=>{\n        if (!isDrawing) return;\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d');\n        const { x, y } = (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.getCoordinates)(e, canvas);\n        // Occasionally log drawing activity\n        if (Math.random() < 0.05) {\n            console.log('draw called', {\n                currentTool,\n                isDrawing,\n                x,\n                y\n            });\n        }\n        ctx.lineWidth = 5;\n        ctx.lineCap = 'round';\n        if (currentTool === 'eraser') {\n            ctx.strokeStyle = '#FFFFFF';\n            ctx.lineWidth = 20;\n        } else {\n            ctx.strokeStyle = '#000000';\n        }\n        if (currentTool === 'pen') {\n            // Show preview line while moving\n            if (tempPoints.length > 0) {\n                const lastPoint = tempPoints[tempPoints.length - 1];\n                ctx.beginPath();\n                ctx.moveTo(lastPoint.x, lastPoint.y);\n                ctx.lineTo(x, y);\n                ctx.stroke();\n            }\n        } else {\n            ctx.lineTo(x, y);\n            ctx.stroke();\n        }\n    };\n    const stopDrawing = async (e)=>{\n        console.log('stopDrawing called in CanvasContainer', {\n            isDrawing,\n            currentTool,\n            hasEvent: !!e,\n            eventType: e ? e.type : 'none'\n        });\n        if (!isDrawing) return;\n        setIsDrawing(false);\n        // Remove the timeout-based generation\n        if (strokeTimeoutRef.current) {\n            clearTimeout(strokeTimeoutRef.current);\n            strokeTimeoutRef.current = null;\n        }\n        // The Canvas component will handle generation for pen and pencil tools directly\n        // This function now primarily handles stroke counting for other tools\n        // Only generate on mouse/touch up events when not using the pen or pencil tool\n        // (since those are handled by the Canvas component)\n        if (e && (e.type === 'mouseup' || e.type === 'touchend') && currentTool !== 'pen' && currentTool !== 'pencil') {\n            console.log('stopDrawing: detected mouseup/touchend event', {\n                strokeCount\n            });\n            // Check if we have enough strokes to generate (increased to 10 from 3)\n            if (strokeCount >= 10) {\n                console.log('stopDrawing: calling handleGeneration due to stroke count');\n                await handleGeneration();\n                setStrokeCount(0);\n            }\n        }\n    };\n    const clearCanvas = ()=>{\n        const canvas = canvasRef.current;\n        if (!canvas) return;\n        (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.initializeCanvas)(canvas);\n        setGeneratedImage(null);\n        backgroundImageRef.current = null;\n        // Save empty canvas state\n        saveCanvasState();\n    };\n    const handleGeneration = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasContainer.useCallback[handleGeneration]\": async ()=>{\n            console.log('handleGeneration called');\n            const now = Date.now();\n            if (now - lastRequestTime < MIN_REQUEST_INTERVAL) {\n                console.log(\"Request throttled - too soon after last request\");\n                return;\n            }\n            setLastRequestTime(now);\n            if (!canvasRef.current) return;\n            console.log('Starting generation process');\n            setIsLoading(true);\n            try {\n                const canvas = canvasRef.current;\n                const tempCanvas = document.createElement('canvas');\n                tempCanvas.width = canvas.width;\n                tempCanvas.height = canvas.height;\n                const tempCtx = tempCanvas.getContext('2d');\n                tempCtx.fillStyle = '#FFFFFF';\n                tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);\n                tempCtx.drawImage(canvas, 0, 0);\n                const drawingData = tempCanvas.toDataURL(\"image/png\").split(\",\")[1];\n                const requestPayload = {\n                    prompt: (0,_StyleSelector__WEBPACK_IMPORTED_MODULE_5__.getPromptForStyle)(styleMode),\n                    drawingData,\n                    customApiKey\n                };\n                console.log('Making API request with style:', styleMode);\n                const response = await fetch(\"/api/generate\", {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(requestPayload)\n                });\n                console.log('API response received, status:', response.status);\n                const data = await response.json();\n                if (data.success && data.imageData) {\n                    console.log('Image generated successfully');\n                    const imageUrl = \"data:image/png;base64,\".concat(data.imageData);\n                    // Draw the generated image to the display canvas\n                    const displayCanvas = displayCanvasRef.current;\n                    if (!displayCanvas) {\n                        console.error('Display canvas ref is null');\n                        return;\n                    }\n                    const displayCtx = displayCanvas.getContext('2d');\n                    // Clear the display canvas first\n                    displayCtx.clearRect(0, 0, displayCanvas.width, displayCanvas.height);\n                    displayCtx.fillStyle = '#FFFFFF';\n                    displayCtx.fillRect(0, 0, displayCanvas.width, displayCanvas.height);\n                    // Create and load the new image\n                    const img = new Image();\n                    // Set up the onload handler before setting the src\n                    img.onload = ({\n                        \"CanvasContainer.useCallback[handleGeneration]\": ()=>{\n                            console.log('Generated image loaded, drawing to display canvas');\n                            displayCtx.clearRect(0, 0, displayCanvas.width, displayCanvas.height);\n                            displayCtx.drawImage(img, 0, 0, displayCanvas.width, displayCanvas.height);\n                            console.log('Image drawn to display canvas');\n                        }\n                    })[\"CanvasContainer.useCallback[handleGeneration]\"];\n                    // Set the src to trigger loading\n                    img.src = imageUrl;\n                } else {\n                    console.error(\"Failed to generate image:\", data.error);\n                    // When generation fails, ensure display canvas is cleared\n                    if (displayCanvasRef.current) {\n                        const displayCtx = displayCanvasRef.current.getContext('2d');\n                        displayCtx.clearRect(0, 0, displayCanvasRef.current.width, displayCanvasRef.current.height);\n                        displayCtx.fillStyle = '#FFFFFF';\n                        displayCtx.fillRect(0, 0, displayCanvasRef.current.width, displayCanvasRef.current.height);\n                    }\n                    if (data.error && (data.error.includes(\"Resource has been exhausted\") || data.error.includes(\"quota\") || response.status === 429 || response.status === 500)) {\n                        setErrorMessage(data.error);\n                        setShowErrorModal(true);\n                    }\n                }\n            } catch (error) {\n                console.error(\"Error generating image:\", error);\n                setErrorMessage(error.message || \"An unexpected error occurred.\");\n                setShowErrorModal(true);\n                // When generation errors, ensure display canvas is cleared\n                if (displayCanvasRef.current) {\n                    const displayCtx = displayCanvasRef.current.getContext('2d');\n                    displayCtx.clearRect(0, 0, displayCanvasRef.current.width, displayCanvasRef.current.height);\n                    displayCtx.fillStyle = '#FFFFFF';\n                    displayCtx.fillRect(0, 0, displayCanvasRef.current.width, displayCanvasRef.current.height);\n                }\n            } finally{\n                setIsLoading(false);\n                console.log('Generation process completed');\n            }\n        }\n    }[\"CanvasContainer.useCallback[handleGeneration]\"], [\n        lastRequestTime,\n        styleMode,\n        customApiKey\n    ]);\n    // Close the error modal\n    const closeErrorModal = ()=>{\n        setShowErrorModal(false);\n    };\n    // Handle the custom API key submission\n    const handleApiKeySubmit = (e)=>{\n        e.preventDefault();\n        setShowErrorModal(false);\n    // Will use the customApiKey state in the next API call\n    };\n    // Add this function to handle undo\n    const handleUndo = ()=>{\n        if (undoStack.length > 0) {\n            const canvas = canvasRef.current;\n            const ctx = canvas.getContext('2d');\n            const previousState = undoStack[undoStack.length - 2]; // Get second to last state\n            if (previousState) {\n                const img = new Image();\n                img.onload = ()=>{\n                    ctx.fillStyle = '#FFFFFF';\n                    ctx.fillRect(0, 0, canvas.width, canvas.height);\n                    ctx.drawImage(img, 0, 0);\n                };\n                img.src = previousState;\n            } else {\n                // If no previous state, clear to white\n                ctx.fillStyle = '#FFFFFF';\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n            setUndoStack((prev)=>prev.slice(0, -1));\n        }\n    };\n    // Add this function to save canvas state\n    const saveCanvasState = ()=>{\n        const canvas = canvasRef.current;\n        if (!canvas) return;\n        const dataURL = canvas.toDataURL();\n        setUndoStack((prev)=>[\n                ...prev,\n                dataURL\n            ]);\n    };\n    // Add this function to handle text input\n    const handleTextInput = (e)=>{\n        if (e.key === 'Enter') {\n            const canvas = canvasRef.current;\n            const ctx = canvas.getContext('2d');\n            ctx.font = '24px Arial';\n            ctx.fillStyle = '#000000';\n            ctx.fillText(textInput, textPosition.x, textPosition.y);\n            setTextInput('');\n            setIsTyping(false);\n            saveCanvasState();\n        }\n    };\n    // Modify the canvas click handler to handle text placement\n    const handleCanvasClick = (e)=>{\n        if (currentTool === 'text') {\n            const { x, y } = (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.getCoordinates)(e, canvasRef.current);\n            setTextPosition({\n                x,\n                y\n            });\n            setIsTyping(true);\n            if (textInputRef.current) {\n                textInputRef.current.focus();\n            }\n        }\n    };\n    // Handle pen click for bezier curve tool\n    const handlePenClick = (e)=>{\n        if (currentTool !== 'pen') return;\n        // Note: Actual point creation is now handled in the Canvas component\n        // This function is primarily used as a callback to inform the CanvasContainer\n        // that a pen action happened\n        console.log('handlePenClick called in CanvasContainer');\n        // Set isDrawing flag to true when using pen tool\n        // This ensures handleStopDrawing knows we're in drawing mode with the pen\n        setIsDrawing(true);\n        // Save canvas state when adding new points\n        saveCanvasState();\n    };\n    // Add this new function near your other utility functions\n    const handleSaveImage = ()=>{\n        // For the generated image\n        if (displayCanvasRef.current) {\n            const link = document.createElement('a');\n            link.download = 'chrome-study.png';\n            link.href = displayCanvasRef.current.toDataURL('image/png');\n            link.click();\n        }\n    };\n    // Add this function to handle regeneration\n    const handleRegenerate = async ()=>{\n        if (canvasRef.current) {\n            await handleGeneration();\n        }\n    };\n    // Add useEffect to watch for styleMode changes and regenerate\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasContainer.useEffect\": ()=>{\n            // Only trigger if we have something drawn (check if canvas is not empty)\n            const checkCanvasAndGenerate = {\n                \"CanvasContainer.useEffect.checkCanvasAndGenerate\": async ()=>{\n                    if (!canvasRef.current) return;\n                    const canvas = canvasRef.current;\n                    const ctx = canvas.getContext('2d');\n                    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n                    // Check if canvas has any non-white pixels\n                    const hasDrawing = Array.from(imageData.data).some({\n                        \"CanvasContainer.useEffect.checkCanvasAndGenerate.hasDrawing\": (pixel, index)=>{\n                            // Check only RGB values (skip alpha)\n                            return index % 4 !== 3 && pixel !== 255;\n                        }\n                    }[\"CanvasContainer.useEffect.checkCanvasAndGenerate.hasDrawing\"]);\n                    if (hasDrawing) {\n                        await handleGeneration();\n                    }\n                }\n            }[\"CanvasContainer.useEffect.checkCanvasAndGenerate\"];\n            // Skip on first render\n            if (styleMode) {\n                checkCanvasAndGenerate();\n            }\n        }\n    }[\"CanvasContainer.useEffect\"], [\n        styleMode,\n        handleGeneration\n    ]); // Added handleGeneration to dependency array\n    // Cleanup function - keep this to prevent memory leaks\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasContainer.useEffect\": ()=>{\n            return ({\n                \"CanvasContainer.useEffect\": ()=>{\n                    if (strokeTimeoutRef.current) {\n                        clearTimeout(strokeTimeoutRef.current);\n                        strokeTimeoutRef.current = null;\n                    }\n                }\n            })[\"CanvasContainer.useEffect\"];\n        }\n    }[\"CanvasContainer.useEffect\"], []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex min-h-screen flex-col items-center justify-start bg-gray-100 p-8\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-2\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center justify-between\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Header__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {}, void 0, false, {\n                                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                                lineNumber: 437,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                            lineNumber: 436,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"grid grid-cols-1 md:grid-cols-2 gap-8\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Canvas__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                    canvasRef: canvasRef,\n                                    currentTool: currentTool,\n                                    isDrawing: isDrawing,\n                                    startDrawing: startDrawing,\n                                    draw: draw,\n                                    stopDrawing: stopDrawing,\n                                    handleCanvasClick: handleCanvasClick,\n                                    handlePenClick: handlePenClick,\n                                    handleGeneration: handleGeneration,\n                                    tempPoints: tempPoints,\n                                    setTempPoints: setTempPoints,\n                                    handleUndo: handleUndo,\n                                    clearCanvas: clearCanvas,\n                                    setCurrentTool: setCurrentTool\n                                }, void 0, false, {\n                                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                                    lineNumber: 441,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_DisplayCanvas__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                    displayCanvasRef: displayCanvasRef,\n                                    isLoading: isLoading,\n                                    handleSaveImage: handleSaveImage,\n                                    handleRegenerate: handleRegenerate\n                                }, void 0, false, {\n                                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                                    lineNumber: 458,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                            lineNumber: 440,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-full mt-2 mb-6\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_StyleSelector__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                styleMode: styleMode,\n                                setStyleMode: setStyleMode,\n                                handleGenerate: handleGeneration\n                            }, void 0, false, {\n                                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                                lineNumber: 467,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                            lineNumber: 466,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                    lineNumber: 435,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                lineNumber: 434,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ErrorModal__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                showErrorModal: showErrorModal,\n                closeErrorModal: closeErrorModal,\n                customApiKey: customApiKey,\n                setCustomApiKey: setCustomApiKey,\n                handleApiKeySubmit: handleApiKeySubmit\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                lineNumber: 476,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_TextInput__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                isTyping: isTyping,\n                textInputRef: textInputRef,\n                textInput: textInput,\n                setTextInput: setTextInput,\n                handleTextInput: handleTextInput,\n                textPosition: textPosition\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                lineNumber: 484,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n        lineNumber: 433,\n        columnNumber: 5\n    }, undefined);\n};\n_s(CanvasContainer, \"Xolvo6y3i59SoyKQ240FYdS9Db0=\");\n_c = CanvasContainer;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CanvasContainer);\nvar _c;\n$RefreshReg$(_c, \"CanvasContainer\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1icm93c2VyKS8uL2NvbXBvbmVudHMvQ2FudmFzQ29udGFpbmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUU7QUFDbkM7QUFDYztBQUNaO0FBQ1k7QUFDUTtBQUNoQjtBQUNFO0FBQ0Y7QUFDTjtBQUM2RTtBQUUzRyxNQUFNaUIsa0JBQWtCOztJQUN0QixNQUFNQyxZQUFZakIsNkNBQU1BLENBQUM7SUFDekIsTUFBTWtCLG1CQUFtQmxCLDZDQUFNQSxDQUFDO0lBQ2hDLE1BQU1tQixxQkFBcUJuQiw2Q0FBTUEsQ0FBQztJQUNsQyxNQUFNLENBQUNvQixXQUFXQyxhQUFhLEdBQUd0QiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUN1QixVQUFVQyxZQUFZLEdBQUd4QiwrQ0FBUUEsQ0FBQztJQUN6QyxNQUFNeUIsZ0JBQWdCeEIsNkNBQU1BLENBQUM7SUFDN0IsTUFBTSxDQUFDeUIsUUFBUUMsVUFBVSxHQUFHM0IsK0NBQVFBLENBQUM7SUFDckMsTUFBTSxDQUFDNEIsZ0JBQWdCQyxrQkFBa0IsR0FBRzdCLCtDQUFRQSxDQUFDO0lBQ3JELE1BQU0sQ0FBQzhCLFdBQVdDLGFBQWEsR0FBRy9CLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQ2dDLGdCQUFnQkMsa0JBQWtCLEdBQUdqQywrQ0FBUUEsQ0FBQztJQUNyRCxNQUFNLENBQUNrQyxjQUFjQyxnQkFBZ0IsR0FBR25DLCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQ29DLGNBQWNDLGdCQUFnQixHQUFHckMsK0NBQVFBLENBQUM7SUFDakQsTUFBTSxDQUFDc0MsV0FBV0MsYUFBYSxHQUFHdkMsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDd0MsYUFBYUMsZUFBZSxHQUFHekMsK0NBQVFBLENBQUM7SUFDL0MsTUFBTTBDLG1CQUFtQnpDLDZDQUFNQSxDQUFDO0lBQ2hDLE1BQU0sQ0FBQzBDLGlCQUFpQkMsbUJBQW1CLEdBQUc1QywrQ0FBUUEsQ0FBQztJQUN2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Ozs7OzBCQUd0Qiw4REFBQzlILGtEQUFTQTtnQkFDUnFDLFVBQVVBO2dCQUNWWSxjQUFjQTtnQkFDZE4sV0FBV0E7Z0JBQ1hDLGNBQWNBO2dCQUNkdUYsaUJBQWlCQTtnQkFDakJ0RixjQUFjQTs7Ozs7Ozs7Ozs7O0FBSXRCO0dBamVNdkM7S0FBQUE7QUFtZU4saUVBQWVBLGVBQWVBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy90cnVkeXAvRGVza3RvcC9kZXYtZ2VtaW5pLTIuMC9jb21wb25lbnRzL0NhbnZhc0NvbnRhaW5lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgQ2FudmFzIGZyb20gXCIuL0NhbnZhc1wiO1xuaW1wb3J0IERpc3BsYXlDYW52YXMgZnJvbSBcIi4vRGlzcGxheUNhbnZhc1wiO1xuaW1wb3J0IFRvb2xCYXIgZnJvbSBcIi4vVG9vbEJhclwiO1xuaW1wb3J0IFN0eWxlU2VsZWN0b3IgZnJvbSBcIi4vU3R5bGVTZWxlY3RvclwiO1xuaW1wb3J0IHsgZ2V0UHJvbXB0Rm9yU3R5bGUgfSBmcm9tIFwiLi9TdHlsZVNlbGVjdG9yXCI7XG5pbXBvcnQgQWN0aW9uQmFyIGZyb20gXCIuL0FjdGlvbkJhclwiO1xuaW1wb3J0IEVycm9yTW9kYWwgZnJvbSBcIi4vRXJyb3JNb2RhbFwiO1xuaW1wb3J0IFRleHRJbnB1dCBmcm9tIFwiLi9UZXh0SW5wdXRcIjtcbmltcG9ydCBIZWFkZXIgZnJvbSBcIi4vSGVhZGVyXCI7XG5pbXBvcnQgeyBnZXRDb29yZGluYXRlcywgaW5pdGlhbGl6ZUNhbnZhcywgZHJhd0ltYWdlVG9DYW52YXMsIGRyYXdCZXppZXJDdXJ2ZSB9IGZyb20gXCIuL3V0aWxzL2NhbnZhc1V0aWxzXCI7XG5cbmNvbnN0IENhbnZhc0NvbnRhaW5lciA9ICgpID0+IHtcbiAgY29uc3QgY2FudmFzUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBkaXNwbGF5Q2FudmFzUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBiYWNrZ3JvdW5kSW1hZ2VSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IFtpc0RyYXdpbmcsIHNldElzRHJhd2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwZW5Db2xvciwgc2V0UGVuQ29sb3JdID0gdXNlU3RhdGUoXCIjMDAwMDAwXCIpO1xuICBjb25zdCBjb2xvcklucHV0UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBbcHJvbXB0LCBzZXRQcm9tcHRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtnZW5lcmF0ZWRJbWFnZSwgc2V0R2VuZXJhdGVkSW1hZ2VdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93RXJyb3JNb2RhbCwgc2V0U2hvd0Vycm9yTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZXJyb3JNZXNzYWdlLCBzZXRFcnJvck1lc3NhZ2VdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtjdXN0b21BcGlLZXksIHNldEN1c3RvbUFwaUtleV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3N0eWxlTW9kZSwgc2V0U3R5bGVNb2RlXSA9IHVzZVN0YXRlKCdtYXRlcmlhbCcpO1xuICBjb25zdCBbc3Ryb2tlQ291bnQsIHNldFN0cm9rZUNvdW50XSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBzdHJva2VUaW1lb3V0UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBbbGFzdFJlcXVlc3RUaW1lLCBzZXRMYXN0UmVxdWVzdFRpbWVdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IE1JTl9SRVFVRVNUX0lOVEVSVkFMID0gMjAwMDsgLy8gTWluaW11bSAyIHNlY29uZHMgYmV0d2VlbiByZXF1ZXN0c1xuICBjb25zdCBbY3VycmVudFRvb2wsIHNldEN1cnJlbnRUb29sXSA9IHVzZVN0YXRlKCdwZW5jaWwnKTsgLy8gJ3BlbmNpbCcsICdwZW4nLCAnZXJhc2VyJywgJ3RleHQnXG4gIGNvbnN0IFtpc1R5cGluZywgc2V0SXNUeXBpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdW5kb1N0YWNrLCBzZXRVbmRvU3RhY2tdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYmV6aWVyUG9pbnRzLCBzZXRCZXppZXJQb2ludHNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbdGV4dElucHV0LCBzZXRUZXh0SW5wdXRdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbdGV4dFBvc2l0aW9uLCBzZXRUZXh0UG9zaXRpb25dID0gdXNlU3RhdGUoeyB4OiAwLCB5OiAwIH0pO1xuICBjb25zdCB0ZXh0SW5wdXRSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IFtpc1BlbkRyYXdpbmcsIHNldElzUGVuRHJhd2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjdXJyZW50QmV6aWVyUGF0aCwgc2V0Q3VycmVudEJlemllclBhdGhdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbdGVtcFBvaW50cywgc2V0VGVtcFBvaW50c10gPSB1c2VTdGF0ZShbXSk7XG5cbiAgLy8gTG9hZCBiYWNrZ3JvdW5kIGltYWdlIHdoZW4gZ2VuZXJhdGVkSW1hZ2UgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChnZW5lcmF0ZWRJbWFnZSAmJiBjYW52YXNSZWYuY3VycmVudCkge1xuICAgICAgLy8gVXNlIHRoZSB3aW5kb3cuSW1hZ2UgY29uc3RydWN0b3IgdG8gYXZvaWQgY29uZmxpY3Qgd2l0aCBOZXh0LmpzIEltYWdlIGNvbXBvbmVudFxuICAgICAgY29uc3QgaW1nID0gbmV3IHdpbmRvdy5JbWFnZSgpO1xuICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgYmFja2dyb3VuZEltYWdlUmVmLmN1cnJlbnQgPSBpbWc7XG4gICAgICAgIGRyYXdJbWFnZVRvQ2FudmFzKGNhbnZhc1JlZi5jdXJyZW50LCBiYWNrZ3JvdW5kSW1hZ2VSZWYuY3VycmVudCk7XG4gICAgICB9O1xuICAgICAgaW1nLnNyYyA9IGdlbmVyYXRlZEltYWdlO1xuICAgIH1cbiAgfSwgW2dlbmVyYXRlZEltYWdlXSk7XG5cbiAgLy8gSW5pdGlhbGl6ZSBjYW52YXMgd2l0aCB3aGl0ZSBiYWNrZ3JvdW5kIHdoZW4gY29tcG9uZW50IG1vdW50c1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjYW52YXNSZWYuY3VycmVudCkge1xuICAgICAgaW5pdGlhbGl6ZUNhbnZhcyhjYW52YXNSZWYuY3VycmVudCk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3Qgc3RhcnREcmF3aW5nID0gKGUpID0+IHtcbiAgICBjb25zdCB7IHgsIHkgfSA9IGdldENvb3JkaW5hdGVzKGUsIGNhbnZhc1JlZi5jdXJyZW50KTtcbiAgICBcbiAgICBpZiAoZS50eXBlID09PSAndG91Y2hzdGFydCcpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ3N0YXJ0RHJhd2luZyBjYWxsZWQnLCB7IGN1cnJlbnRUb29sLCB4LCB5IH0pO1xuICAgIFxuICAgIGNvbnN0IGN0eCA9IGNhbnZhc1JlZi5jdXJyZW50LmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4Lm1vdmVUbyh4LCB5KTtcbiAgICBzZXRJc0RyYXdpbmcodHJ1ZSk7XG4gICAgc2V0U3Ryb2tlQ291bnQocHJldiA9PiBwcmV2ICsgMSk7XG4gICAgXG4gICAgLy8gU2F2ZSBjYW52YXMgc3RhdGUgYmVmb3JlIGRyYXdpbmdcbiAgICBzYXZlQ2FudmFzU3RhdGUoKTtcbiAgfTtcblxuICBjb25zdCBkcmF3ID0gKGUpID0+IHtcbiAgICBpZiAoIWlzRHJhd2luZykgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50O1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gZ2V0Q29vcmRpbmF0ZXMoZSwgY2FudmFzKTtcbiAgICBcbiAgICAvLyBPY2Nhc2lvbmFsbHkgbG9nIGRyYXdpbmcgYWN0aXZpdHlcbiAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMDUpIHsgLy8gT25seSBsb2cgfjUlIG9mIG1vdmUgZXZlbnRzIHRvIGF2b2lkIGNvbnNvbGUgc3BhbVxuICAgICAgY29uc29sZS5sb2coJ2RyYXcgY2FsbGVkJywgeyBjdXJyZW50VG9vbCwgaXNEcmF3aW5nLCB4LCB5IH0pO1xuICAgIH1cbiAgICBcbiAgICBjdHgubGluZVdpZHRoID0gNTtcbiAgICBjdHgubGluZUNhcCA9ICdyb3VuZCc7XG4gICAgXG4gICAgaWYgKGN1cnJlbnRUb29sID09PSAnZXJhc2VyJykge1xuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNGRkZGRkYnO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IDIwO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzAwMDAwMCc7XG4gICAgfVxuICAgIFxuICAgIGlmIChjdXJyZW50VG9vbCA9PT0gJ3BlbicpIHtcbiAgICAgIC8vIFNob3cgcHJldmlldyBsaW5lIHdoaWxlIG1vdmluZ1xuICAgICAgaWYgKHRlbXBQb2ludHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBsYXN0UG9pbnQgPSB0ZW1wUG9pbnRzW3RlbXBQb2ludHMubGVuZ3RoIC0gMV07XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lm1vdmVUbyhsYXN0UG9pbnQueCwgbGFzdFBvaW50LnkpO1xuICAgICAgICBjdHgubGluZVRvKHgsIHkpO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGN0eC5saW5lVG8oeCwgeSk7XG4gICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHN0b3BEcmF3aW5nID0gYXN5bmMgKGUpID0+IHtcbiAgICBjb25zb2xlLmxvZygnc3RvcERyYXdpbmcgY2FsbGVkIGluIENhbnZhc0NvbnRhaW5lcicsIHsgXG4gICAgICBpc0RyYXdpbmcsIFxuICAgICAgY3VycmVudFRvb2wsIFxuICAgICAgaGFzRXZlbnQ6ICEhZSxcbiAgICAgIGV2ZW50VHlwZTogZSA/IGUudHlwZSA6ICdub25lJ1xuICAgIH0pO1xuICAgIFxuICAgIGlmICghaXNEcmF3aW5nKSByZXR1cm47XG4gICAgc2V0SXNEcmF3aW5nKGZhbHNlKTtcbiAgICBcbiAgICAvLyBSZW1vdmUgdGhlIHRpbWVvdXQtYmFzZWQgZ2VuZXJhdGlvblxuICAgIGlmIChzdHJva2VUaW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNsZWFyVGltZW91dChzdHJva2VUaW1lb3V0UmVmLmN1cnJlbnQpO1xuICAgICAgc3Ryb2tlVGltZW91dFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBUaGUgQ2FudmFzIGNvbXBvbmVudCB3aWxsIGhhbmRsZSBnZW5lcmF0aW9uIGZvciBwZW4gYW5kIHBlbmNpbCB0b29scyBkaXJlY3RseVxuICAgIC8vIFRoaXMgZnVuY3Rpb24gbm93IHByaW1hcmlseSBoYW5kbGVzIHN0cm9rZSBjb3VudGluZyBmb3Igb3RoZXIgdG9vbHNcbiAgICBcbiAgICAvLyBPbmx5IGdlbmVyYXRlIG9uIG1vdXNlL3RvdWNoIHVwIGV2ZW50cyB3aGVuIG5vdCB1c2luZyB0aGUgcGVuIG9yIHBlbmNpbCB0b29sXG4gICAgLy8gKHNpbmNlIHRob3NlIGFyZSBoYW5kbGVkIGJ5IHRoZSBDYW52YXMgY29tcG9uZW50KVxuICAgIGlmIChlICYmIChlLnR5cGUgPT09ICdtb3VzZXVwJyB8fCBlLnR5cGUgPT09ICd0b3VjaGVuZCcpICYmIFxuICAgICAgICBjdXJyZW50VG9vbCAhPT0gJ3BlbicgJiYgY3VycmVudFRvb2wgIT09ICdwZW5jaWwnKSB7XG4gICAgICBjb25zb2xlLmxvZygnc3RvcERyYXdpbmc6IGRldGVjdGVkIG1vdXNldXAvdG91Y2hlbmQgZXZlbnQnLCB7IHN0cm9rZUNvdW50IH0pO1xuICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBlbm91Z2ggc3Ryb2tlcyB0byBnZW5lcmF0ZSAoaW5jcmVhc2VkIHRvIDEwIGZyb20gMylcbiAgICAgIGlmIChzdHJva2VDb3VudCA+PSAxMCkge1xuICAgICAgICBjb25zb2xlLmxvZygnc3RvcERyYXdpbmc6IGNhbGxpbmcgaGFuZGxlR2VuZXJhdGlvbiBkdWUgdG8gc3Ryb2tlIGNvdW50Jyk7XG4gICAgICAgIGF3YWl0IGhhbmRsZUdlbmVyYXRpb24oKTtcbiAgICAgICAgc2V0U3Ryb2tlQ291bnQoMCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNsZWFyQ2FudmFzID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50O1xuICAgIGlmICghY2FudmFzKSByZXR1cm47XG4gICAgXG4gICAgaW5pdGlhbGl6ZUNhbnZhcyhjYW52YXMpO1xuICAgIFxuICAgIHNldEdlbmVyYXRlZEltYWdlKG51bGwpO1xuICAgIGJhY2tncm91bmRJbWFnZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICBcbiAgICAvLyBTYXZlIGVtcHR5IGNhbnZhcyBzdGF0ZVxuICAgIHNhdmVDYW52YXNTdGF0ZSgpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUdlbmVyYXRpb24gPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2hhbmRsZUdlbmVyYXRpb24gY2FsbGVkJyk7XG4gICAgXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAobm93IC0gbGFzdFJlcXVlc3RUaW1lIDwgTUlOX1JFUVVFU1RfSU5URVJWQUwpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiUmVxdWVzdCB0aHJvdHRsZWQgLSB0b28gc29vbiBhZnRlciBsYXN0IHJlcXVlc3RcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHNldExhc3RSZXF1ZXN0VGltZShub3cpO1xuICAgIGlmICghY2FudmFzUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgZ2VuZXJhdGlvbiBwcm9jZXNzJyk7XG4gICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcbiAgICAgIGNvbnN0IHRlbXBDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgIHRlbXBDYW52YXMud2lkdGggPSBjYW52YXMud2lkdGg7XG4gICAgICB0ZW1wQ2FudmFzLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XG4gICAgICBjb25zdCB0ZW1wQ3R4ID0gdGVtcENhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgXG4gICAgICB0ZW1wQ3R4LmZpbGxTdHlsZSA9ICcjRkZGRkZGJztcbiAgICAgIHRlbXBDdHguZmlsbFJlY3QoMCwgMCwgdGVtcENhbnZhcy53aWR0aCwgdGVtcENhbnZhcy5oZWlnaHQpO1xuICAgICAgdGVtcEN0eC5kcmF3SW1hZ2UoY2FudmFzLCAwLCAwKTtcbiAgICAgIFxuICAgICAgY29uc3QgZHJhd2luZ0RhdGEgPSB0ZW1wQ2FudmFzLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKS5zcGxpdChcIixcIilbMV07XG4gICAgICBcbiAgICAgIGNvbnN0IHJlcXVlc3RQYXlsb2FkID0ge1xuICAgICAgICBwcm9tcHQ6IGdldFByb21wdEZvclN0eWxlKHN0eWxlTW9kZSksXG4gICAgICAgIGRyYXdpbmdEYXRhLFxuICAgICAgICBjdXN0b21BcGlLZXlcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdNYWtpbmcgQVBJIHJlcXVlc3Qgd2l0aCBzdHlsZTonLCBzdHlsZU1vZGUpO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2FwaS9nZW5lcmF0ZVwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdFBheWxvYWQpLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdBUEkgcmVzcG9uc2UgcmVjZWl2ZWQsIHN0YXR1czonLCByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgXG4gICAgICBpZiAoZGF0YS5zdWNjZXNzICYmIGRhdGEuaW1hZ2VEYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdJbWFnZSBnZW5lcmF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgIGNvbnN0IGltYWdlVXJsID0gYGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwke2RhdGEuaW1hZ2VEYXRhfWA7XG4gICAgICAgIFxuICAgICAgICAvLyBEcmF3IHRoZSBnZW5lcmF0ZWQgaW1hZ2UgdG8gdGhlIGRpc3BsYXkgY2FudmFzXG4gICAgICAgIGNvbnN0IGRpc3BsYXlDYW52YXMgPSBkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmICghZGlzcGxheUNhbnZhcykge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Rpc3BsYXkgY2FudmFzIHJlZiBpcyBudWxsJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkaXNwbGF5Q3R4ID0gZGlzcGxheUNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xlYXIgdGhlIGRpc3BsYXkgY2FudmFzIGZpcnN0XG4gICAgICAgIGRpc3BsYXlDdHguY2xlYXJSZWN0KDAsIDAsIGRpc3BsYXlDYW52YXMud2lkdGgsIGRpc3BsYXlDYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgZGlzcGxheUN0eC5maWxsU3R5bGUgPSAnI0ZGRkZGRic7XG4gICAgICAgIGRpc3BsYXlDdHguZmlsbFJlY3QoMCwgMCwgZGlzcGxheUNhbnZhcy53aWR0aCwgZGlzcGxheUNhbnZhcy5oZWlnaHQpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGFuZCBsb2FkIHRoZSBuZXcgaW1hZ2VcbiAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgdXAgdGhlIG9ubG9hZCBoYW5kbGVyIGJlZm9yZSBzZXR0aW5nIHRoZSBzcmNcbiAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnR2VuZXJhdGVkIGltYWdlIGxvYWRlZCwgZHJhd2luZyB0byBkaXNwbGF5IGNhbnZhcycpO1xuICAgICAgICAgIGRpc3BsYXlDdHguY2xlYXJSZWN0KDAsIDAsIGRpc3BsYXlDYW52YXMud2lkdGgsIGRpc3BsYXlDYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICBkaXNwbGF5Q3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIGRpc3BsYXlDYW52YXMud2lkdGgsIGRpc3BsYXlDYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnSW1hZ2UgZHJhd24gdG8gZGlzcGxheSBjYW52YXMnKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCB0aGUgc3JjIHRvIHRyaWdnZXIgbG9hZGluZ1xuICAgICAgICBpbWcuc3JjID0gaW1hZ2VVcmw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGdlbmVyYXRlIGltYWdlOlwiLCBkYXRhLmVycm9yKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFdoZW4gZ2VuZXJhdGlvbiBmYWlscywgZW5zdXJlIGRpc3BsYXkgY2FudmFzIGlzIGNsZWFyZWRcbiAgICAgICAgaWYgKGRpc3BsYXlDYW52YXNSZWYuY3VycmVudCkge1xuICAgICAgICAgIGNvbnN0IGRpc3BsYXlDdHggPSBkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICBkaXNwbGF5Q3R4LmNsZWFyUmVjdCgwLCAwLCBkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQud2lkdGgsIGRpc3BsYXlDYW52YXNSZWYuY3VycmVudC5oZWlnaHQpO1xuICAgICAgICAgIGRpc3BsYXlDdHguZmlsbFN0eWxlID0gJyNGRkZGRkYnO1xuICAgICAgICAgIGRpc3BsYXlDdHguZmlsbFJlY3QoMCwgMCwgZGlzcGxheUNhbnZhc1JlZi5jdXJyZW50LndpZHRoLCBkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQuaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRhdGEuZXJyb3IgJiYgKFxuICAgICAgICAgIGRhdGEuZXJyb3IuaW5jbHVkZXMoXCJSZXNvdXJjZSBoYXMgYmVlbiBleGhhdXN0ZWRcIikgfHwgXG4gICAgICAgICAgZGF0YS5lcnJvci5pbmNsdWRlcyhcInF1b3RhXCIpIHx8XG4gICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID09PSA0MjkgfHxcbiAgICAgICAgICByZXNwb25zZS5zdGF0dXMgPT09IDUwMFxuICAgICAgICApKSB7XG4gICAgICAgICAgc2V0RXJyb3JNZXNzYWdlKGRhdGEuZXJyb3IpO1xuICAgICAgICAgIHNldFNob3dFcnJvck1vZGFsKHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZW5lcmF0aW5nIGltYWdlOlwiLCBlcnJvcik7XG4gICAgICBzZXRFcnJvck1lc3NhZ2UoZXJyb3IubWVzc2FnZSB8fCBcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpO1xuICAgICAgc2V0U2hvd0Vycm9yTW9kYWwodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIFdoZW4gZ2VuZXJhdGlvbiBlcnJvcnMsIGVuc3VyZSBkaXNwbGF5IGNhbnZhcyBpcyBjbGVhcmVkXG4gICAgICBpZiAoZGlzcGxheUNhbnZhc1JlZi5jdXJyZW50KSB7XG4gICAgICAgIGNvbnN0IGRpc3BsYXlDdHggPSBkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgZGlzcGxheUN0eC5jbGVhclJlY3QoMCwgMCwgZGlzcGxheUNhbnZhc1JlZi5jdXJyZW50LndpZHRoLCBkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQuaGVpZ2h0KTtcbiAgICAgICAgZGlzcGxheUN0eC5maWxsU3R5bGUgPSAnI0ZGRkZGRic7XG4gICAgICAgIGRpc3BsYXlDdHguZmlsbFJlY3QoMCwgMCwgZGlzcGxheUNhbnZhc1JlZi5jdXJyZW50LndpZHRoLCBkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQuaGVpZ2h0KTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIGNvbnNvbGUubG9nKCdHZW5lcmF0aW9uIHByb2Nlc3MgY29tcGxldGVkJyk7XG4gICAgfVxuICB9LCBbXG4gICAgbGFzdFJlcXVlc3RUaW1lLCBcbiAgICBzdHlsZU1vZGUsIFxuICAgIGN1c3RvbUFwaUtleVxuICBdKTtcblxuICAvLyBDbG9zZSB0aGUgZXJyb3IgbW9kYWxcbiAgY29uc3QgY2xvc2VFcnJvck1vZGFsID0gKCkgPT4ge1xuICAgIHNldFNob3dFcnJvck1vZGFsKGZhbHNlKTtcbiAgfTtcblxuICAvLyBIYW5kbGUgdGhlIGN1c3RvbSBBUEkga2V5IHN1Ym1pc3Npb25cbiAgY29uc3QgaGFuZGxlQXBpS2V5U3VibWl0ID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgc2V0U2hvd0Vycm9yTW9kYWwoZmFsc2UpO1xuICAgIC8vIFdpbGwgdXNlIHRoZSBjdXN0b21BcGlLZXkgc3RhdGUgaW4gdGhlIG5leHQgQVBJIGNhbGxcbiAgfTtcblxuICAvLyBBZGQgdGhpcyBmdW5jdGlvbiB0byBoYW5kbGUgdW5kb1xuICBjb25zdCBoYW5kbGVVbmRvID0gKCkgPT4ge1xuICAgIGlmICh1bmRvU3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7XG4gICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgIGNvbnN0IHByZXZpb3VzU3RhdGUgPSB1bmRvU3RhY2tbdW5kb1N0YWNrLmxlbmd0aCAtIDJdOyAvLyBHZXQgc2Vjb25kIHRvIGxhc3Qgc3RhdGVcbiAgICAgIFxuICAgICAgaWYgKHByZXZpb3VzU3RhdGUpIHtcbiAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjRkZGRkZGJztcbiAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7XG4gICAgICAgIH07XG4gICAgICAgIGltZy5zcmMgPSBwcmV2aW91c1N0YXRlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgbm8gcHJldmlvdXMgc3RhdGUsIGNsZWFyIHRvIHdoaXRlXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI0ZGRkZGRic7XG4gICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBzZXRVbmRvU3RhY2socHJldiA9PiBwcmV2LnNsaWNlKDAsIC0xKSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEFkZCB0aGlzIGZ1bmN0aW9uIHRvIHNhdmUgY2FudmFzIHN0YXRlXG4gIGNvbnN0IHNhdmVDYW52YXNTdGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcbiAgICBpZiAoIWNhbnZhcykgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGRhdGFVUkwgPSBjYW52YXMudG9EYXRhVVJMKCk7XG4gICAgc2V0VW5kb1N0YWNrKHByZXYgPT4gWy4uLnByZXYsIGRhdGFVUkxdKTtcbiAgfTtcblxuICAvLyBBZGQgdGhpcyBmdW5jdGlvbiB0byBoYW5kbGUgdGV4dCBpbnB1dFxuICBjb25zdCBoYW5kbGVUZXh0SW5wdXQgPSAoZSkgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7XG4gICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgIGN0eC5mb250ID0gJzI0cHggQXJpYWwnO1xuICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwMDAwJztcbiAgICAgIGN0eC5maWxsVGV4dCh0ZXh0SW5wdXQsIHRleHRQb3NpdGlvbi54LCB0ZXh0UG9zaXRpb24ueSk7XG4gICAgICBzZXRUZXh0SW5wdXQoJycpO1xuICAgICAgc2V0SXNUeXBpbmcoZmFsc2UpO1xuICAgICAgc2F2ZUNhbnZhc1N0YXRlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIE1vZGlmeSB0aGUgY2FudmFzIGNsaWNrIGhhbmRsZXIgdG8gaGFuZGxlIHRleHQgcGxhY2VtZW50XG4gIGNvbnN0IGhhbmRsZUNhbnZhc0NsaWNrID0gKGUpID0+IHtcbiAgICBpZiAoY3VycmVudFRvb2wgPT09ICd0ZXh0Jykge1xuICAgICAgY29uc3QgeyB4LCB5IH0gPSBnZXRDb29yZGluYXRlcyhlLCBjYW52YXNSZWYuY3VycmVudCk7XG4gICAgICBzZXRUZXh0UG9zaXRpb24oeyB4LCB5IH0pO1xuICAgICAgc2V0SXNUeXBpbmcodHJ1ZSk7XG4gICAgICBpZiAodGV4dElucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdGV4dElucHV0UmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gSGFuZGxlIHBlbiBjbGljayBmb3IgYmV6aWVyIGN1cnZlIHRvb2xcbiAgY29uc3QgaGFuZGxlUGVuQ2xpY2sgPSAoZSkgPT4ge1xuICAgIGlmIChjdXJyZW50VG9vbCAhPT0gJ3BlbicpIHJldHVybjtcbiAgICBcbiAgICAvLyBOb3RlOiBBY3R1YWwgcG9pbnQgY3JlYXRpb24gaXMgbm93IGhhbmRsZWQgaW4gdGhlIENhbnZhcyBjb21wb25lbnRcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHByaW1hcmlseSB1c2VkIGFzIGEgY2FsbGJhY2sgdG8gaW5mb3JtIHRoZSBDYW52YXNDb250YWluZXJcbiAgICAvLyB0aGF0IGEgcGVuIGFjdGlvbiBoYXBwZW5lZFxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdoYW5kbGVQZW5DbGljayBjYWxsZWQgaW4gQ2FudmFzQ29udGFpbmVyJyk7XG4gICAgXG4gICAgLy8gU2V0IGlzRHJhd2luZyBmbGFnIHRvIHRydWUgd2hlbiB1c2luZyBwZW4gdG9vbFxuICAgIC8vIFRoaXMgZW5zdXJlcyBoYW5kbGVTdG9wRHJhd2luZyBrbm93cyB3ZSdyZSBpbiBkcmF3aW5nIG1vZGUgd2l0aCB0aGUgcGVuXG4gICAgc2V0SXNEcmF3aW5nKHRydWUpO1xuICAgIFxuICAgIC8vIFNhdmUgY2FudmFzIHN0YXRlIHdoZW4gYWRkaW5nIG5ldyBwb2ludHNcbiAgICBzYXZlQ2FudmFzU3RhdGUoKTtcbiAgfTtcblxuICAvLyBBZGQgdGhpcyBuZXcgZnVuY3Rpb24gbmVhciB5b3VyIG90aGVyIHV0aWxpdHkgZnVuY3Rpb25zXG4gIGNvbnN0IGhhbmRsZVNhdmVJbWFnZSA9ICgpID0+IHtcbiAgICAvLyBGb3IgdGhlIGdlbmVyYXRlZCBpbWFnZVxuICAgIGlmIChkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICBsaW5rLmRvd25sb2FkID0gJ2Nocm9tZS1zdHVkeS5wbmcnO1xuICAgICAgbGluay5ocmVmID0gZGlzcGxheUNhbnZhc1JlZi5jdXJyZW50LnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7XG4gICAgICBsaW5rLmNsaWNrKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEFkZCB0aGlzIGZ1bmN0aW9uIHRvIGhhbmRsZSByZWdlbmVyYXRpb25cbiAgY29uc3QgaGFuZGxlUmVnZW5lcmF0ZSA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoY2FudmFzUmVmLmN1cnJlbnQpIHtcbiAgICAgIGF3YWl0IGhhbmRsZUdlbmVyYXRpb24oKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQWRkIHVzZUVmZmVjdCB0byB3YXRjaCBmb3Igc3R5bGVNb2RlIGNoYW5nZXMgYW5kIHJlZ2VuZXJhdGVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBPbmx5IHRyaWdnZXIgaWYgd2UgaGF2ZSBzb21ldGhpbmcgZHJhd24gKGNoZWNrIGlmIGNhbnZhcyBpcyBub3QgZW1wdHkpXG4gICAgY29uc3QgY2hlY2tDYW52YXNBbmRHZW5lcmF0ZSA9IGFzeW5jICgpID0+IHtcbiAgICAgIGlmICghY2FudmFzUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICAgIFxuICAgICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7XG4gICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgY2FudmFzIGhhcyBhbnkgbm9uLXdoaXRlIHBpeGVsc1xuICAgICAgY29uc3QgaGFzRHJhd2luZyA9IEFycmF5LmZyb20oaW1hZ2VEYXRhLmRhdGEpLnNvbWUoKHBpeGVsLCBpbmRleCkgPT4ge1xuICAgICAgICAvLyBDaGVjayBvbmx5IFJHQiB2YWx1ZXMgKHNraXAgYWxwaGEpXG4gICAgICAgIHJldHVybiBpbmRleCAlIDQgIT09IDMgJiYgcGl4ZWwgIT09IDI1NTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaGFzRHJhd2luZykge1xuICAgICAgICBhd2FpdCBoYW5kbGVHZW5lcmF0aW9uKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFNraXAgb24gZmlyc3QgcmVuZGVyXG4gICAgaWYgKHN0eWxlTW9kZSkge1xuICAgICAgY2hlY2tDYW52YXNBbmRHZW5lcmF0ZSgpO1xuICAgIH1cbiAgfSwgW3N0eWxlTW9kZSwgaGFuZGxlR2VuZXJhdGlvbl0pOyAvLyBBZGRlZCBoYW5kbGVHZW5lcmF0aW9uIHRvIGRlcGVuZGVuY3kgYXJyYXlcblxuICAvLyBDbGVhbnVwIGZ1bmN0aW9uIC0ga2VlcCB0aGlzIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChzdHJva2VUaW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHN0cm9rZVRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgICAgIHN0cm9rZVRpbWVvdXRSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1pbi1oLXNjcmVlbiBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1zdGFydCBiZy1ncmF5LTEwMCBwLThcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgICAgPEhlYWRlciAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBnYXAtOFwiPlxuICAgICAgICAgICAgPENhbnZhcyBcbiAgICAgICAgICAgICAgY2FudmFzUmVmPXtjYW52YXNSZWZ9XG4gICAgICAgICAgICAgIGN1cnJlbnRUb29sPXtjdXJyZW50VG9vbH1cbiAgICAgICAgICAgICAgaXNEcmF3aW5nPXtpc0RyYXdpbmd9XG4gICAgICAgICAgICAgIHN0YXJ0RHJhd2luZz17c3RhcnREcmF3aW5nfVxuICAgICAgICAgICAgICBkcmF3PXtkcmF3fVxuICAgICAgICAgICAgICBzdG9wRHJhd2luZz17c3RvcERyYXdpbmd9XG4gICAgICAgICAgICAgIGhhbmRsZUNhbnZhc0NsaWNrPXtoYW5kbGVDYW52YXNDbGlja31cbiAgICAgICAgICAgICAgaGFuZGxlUGVuQ2xpY2s9e2hhbmRsZVBlbkNsaWNrfVxuICAgICAgICAgICAgICBoYW5kbGVHZW5lcmF0aW9uPXtoYW5kbGVHZW5lcmF0aW9ufVxuICAgICAgICAgICAgICB0ZW1wUG9pbnRzPXt0ZW1wUG9pbnRzfVxuICAgICAgICAgICAgICBzZXRUZW1wUG9pbnRzPXtzZXRUZW1wUG9pbnRzfVxuICAgICAgICAgICAgICBoYW5kbGVVbmRvPXtoYW5kbGVVbmRvfVxuICAgICAgICAgICAgICBjbGVhckNhbnZhcz17Y2xlYXJDYW52YXN9XG4gICAgICAgICAgICAgIHNldEN1cnJlbnRUb29sPXtzZXRDdXJyZW50VG9vbH1cbiAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgIDxEaXNwbGF5Q2FudmFzIFxuICAgICAgICAgICAgICBkaXNwbGF5Q2FudmFzUmVmPXtkaXNwbGF5Q2FudmFzUmVmfVxuICAgICAgICAgICAgICBpc0xvYWRpbmc9e2lzTG9hZGluZ31cbiAgICAgICAgICAgICAgaGFuZGxlU2F2ZUltYWdlPXtoYW5kbGVTYXZlSW1hZ2V9XG4gICAgICAgICAgICAgIGhhbmRsZVJlZ2VuZXJhdGU9e2hhbmRsZVJlZ2VuZXJhdGV9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgbXQtMiBtYi02XCI+XG4gICAgICAgICAgICA8U3R5bGVTZWxlY3RvciBcbiAgICAgICAgICAgICAgc3R5bGVNb2RlPXtzdHlsZU1vZGV9XG4gICAgICAgICAgICAgIHNldFN0eWxlTW9kZT17c2V0U3R5bGVNb2RlfVxuICAgICAgICAgICAgICBoYW5kbGVHZW5lcmF0ZT17aGFuZGxlR2VuZXJhdGlvbn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxFcnJvck1vZGFsIFxuICAgICAgICBzaG93RXJyb3JNb2RhbD17c2hvd0Vycm9yTW9kYWx9XG4gICAgICAgIGNsb3NlRXJyb3JNb2RhbD17Y2xvc2VFcnJvck1vZGFsfVxuICAgICAgICBjdXN0b21BcGlLZXk9e2N1c3RvbUFwaUtleX1cbiAgICAgICAgc2V0Q3VzdG9tQXBpS2V5PXtzZXRDdXN0b21BcGlLZXl9XG4gICAgICAgIGhhbmRsZUFwaUtleVN1Ym1pdD17aGFuZGxlQXBpS2V5U3VibWl0fVxuICAgICAgLz5cblxuICAgICAgPFRleHRJbnB1dCBcbiAgICAgICAgaXNUeXBpbmc9e2lzVHlwaW5nfVxuICAgICAgICB0ZXh0SW5wdXRSZWY9e3RleHRJbnB1dFJlZn1cbiAgICAgICAgdGV4dElucHV0PXt0ZXh0SW5wdXR9XG4gICAgICAgIHNldFRleHRJbnB1dD17c2V0VGV4dElucHV0fVxuICAgICAgICBoYW5kbGVUZXh0SW5wdXQ9e2hhbmRsZVRleHRJbnB1dH1cbiAgICAgICAgdGV4dFBvc2l0aW9uPXt0ZXh0UG9zaXRpb259XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzQ29udGFpbmVyOyAiXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJ1c2VDYWxsYmFjayIsIkNhbnZhcyIsIkRpc3BsYXlDYW52YXMiLCJUb29sQmFyIiwiU3R5bGVTZWxlY3RvciIsImdldFByb21wdEZvclN0eWxlIiwiQWN0aW9uQmFyIiwiRXJyb3JNb2RhbCIsIlRleHRJbnB1dCIsIkhlYWRlciIsImdldENvb3JkaW5hdGVzIiwiaW5pdGlhbGl6ZUNhbnZhcyIsImRyYXdJbWFnZVRvQ2FudmFzIiwiZHJhd0JlemllckN1cnZlIiwiQ2FudmFzQ29udGFpbmVyIiwiY2FudmFzUmVmIiwiZGlzcGxheUNhbnZhc1JlZiIsImJhY2tncm91bmRJbWFnZVJlZiIsImlzRHJhd2luZyIsInNldElzRHJhd2luZyIsInBlbkNvbG9yIiwic2V0UGVuQ29sb3IiLCJjb2xvcklucHV0UmVmIiwicHJvbXB0Iiwic2V0UHJvbXB0IiwiZ2VuZXJhdGVkSW1hZ2UiLCJzZXRHZW5lcmF0ZWRJbWFnZSIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsInNob3dFcnJvck1vZGFsIiwic2V0U2hvd0Vycm9yTW9kYWwiLCJlcnJvck1lc3NhZ2UiLCJzZXRFcnJvck1lc3NhZ2UiLCJjdXN0b21BcGlLZXkiLCJzZXRDdXN0b21BcGlLZXkiLCJzdHlsZU1vZGUiLCJzZXRTdHlsZU1vZGUiLCJzdHJva2VDb3VudCIsInNldFN0cm9rZUNvdW50Iiwic3Ryb2tlVGltZW91dFJlZiIsImxhc3RSZXF1ZXN0VGltZSIsInNldExhc3RSZXF1ZXN0VGltZSIsIk1JTl9SRVFVRVNUX0lOVEVSVkFMIiwiY3VycmVudFRvb2wiLCJzZXRDdXJyZW50VG9vbCIsImlzVHlwaW5nIiwic2V0SXNUeXBpbmciLCJ1bmRvU3RhY2siLCJzZXRVbmRvU3RhY2siLCJiZXppZXJQb2ludHMiLCJzZXRCZXppZXJQb2ludHMiLCJ0ZXh0SW5wdXQiLCJzZXRUZXh0SW5wdXQiLCJ0ZXh0UG9zaXRpb24iLCJzZXRUZXh0UG9zaXRpb24iLCJ4IiwieSIsInRleHRJbnB1dFJlZiIsImlzUGVuRHJhd2luZyIsInNldElzUGVuRHJhd2luZyIsImN1cnJlbnRCZXppZXJQYXRoIiwic2V0Q3VycmVudEJlemllclBhdGgiLCJ0ZW1wUG9pbnRzIiwic2V0VGVtcFBvaW50cyIsImN1cnJlbnQiLCJpbWciLCJ3aW5kb3ciLCJJbWFnZSIsIm9ubG9hZCIsInNyYyIsInN0YXJ0RHJhd2luZyIsImUiLCJ0eXBlIiwicHJldmVudERlZmF1bHQiLCJjb25zb2xlIiwibG9nIiwiY3R4IiwiZ2V0Q29udGV4dCIsImJlZ2luUGF0aCIsIm1vdmVUbyIsInByZXYiLCJzYXZlQ2FudmFzU3RhdGUiLCJkcmF3IiwiY2FudmFzIiwiTWF0aCIsInJhbmRvbSIsImxpbmVXaWR0aCIsImxpbmVDYXAiLCJzdHJva2VTdHlsZSIsImxlbmd0aCIsImxhc3RQb2ludCIsImxpbmVUbyIsInN0cm9rZSIsInN0b3BEcmF3aW5nIiwiaGFzRXZlbnQiLCJldmVudFR5cGUiLCJjbGVhclRpbWVvdXQiLCJoYW5kbGVHZW5lcmF0aW9uIiwiY2xlYXJDYW52YXMiLCJub3ciLCJEYXRlIiwidGVtcENhbnZhcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIndpZHRoIiwiaGVpZ2h0IiwidGVtcEN0eCIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiZHJhd0ltYWdlIiwiZHJhd2luZ0RhdGEiLCJ0b0RhdGFVUkwiLCJzcGxpdCIsInJlcXVlc3RQYXlsb2FkIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXR1cyIsImRhdGEiLCJqc29uIiwic3VjY2VzcyIsImltYWdlRGF0YSIsImltYWdlVXJsIiwiZGlzcGxheUNhbnZhcyIsImVycm9yIiwiZGlzcGxheUN0eCIsImNsZWFyUmVjdCIsImluY2x1ZGVzIiwibWVzc2FnZSIsImNsb3NlRXJyb3JNb2RhbCIsImhhbmRsZUFwaUtleVN1Ym1pdCIsImhhbmRsZVVuZG8iLCJwcmV2aW91c1N0YXRlIiwic2xpY2UiLCJkYXRhVVJMIiwiaGFuZGxlVGV4dElucHV0Iiwia2V5IiwiZm9udCIsImZpbGxUZXh0IiwiaGFuZGxlQ2FudmFzQ2xpY2siLCJmb2N1cyIsImhhbmRsZVBlbkNsaWNrIiwiaGFuZGxlU2F2ZUltYWdlIiwibGluayIsImRvd25sb2FkIiwiaHJlZiIsImNsaWNrIiwiaGFuZGxlUmVnZW5lcmF0ZSIsImNoZWNrQ2FudmFzQW5kR2VuZXJhdGUiLCJnZXRJbWFnZURhdGEiLCJoYXNEcmF3aW5nIiwiQXJyYXkiLCJmcm9tIiwic29tZSIsInBpeGVsIiwiaW5kZXgiLCJkaXYiLCJjbGFzc05hbWUiLCJoYW5kbGVHZW5lcmF0ZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-browser)/./components/CanvasContainer.js\n"));

/***/ })

});