"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_pages-dir-node_components_CanvasContainer_js";
exports.ids = ["_pages-dir-node_components_CanvasContainer_js"];
exports.modules = {

/***/ "(pages-dir-node)/./components/ActionBar.js":
/*!*********************************!*\
  !*** ./components/ActionBar.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _barrel_optimize_names_Download_RefreshCw_lucide_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! __barrel_optimize__?names=Download,RefreshCw!=!lucide-react */ \"(pages-dir-node)/__barrel_optimize__?names=Download,RefreshCw!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\n\n\nconst ActionBar = ({ handleSaveImage, handleRegenerate })=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex justify-end mb-4\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"menu\", {\n            className: \"flex items-center bg-gray-200 rounded-full p-2 shadow-soft gap-2\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    type: \"button\",\n                    onClick: handleSaveImage,\n                    className: \"w-10 h-10 rounded-full flex items-center justify-center bg-white text-gray-600 shadow-soft transition-all hover:scale-110 hover:bg-gray-50\",\n                    \"aria-label\": \"Save Image\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Download_RefreshCw_lucide_react__WEBPACK_IMPORTED_MODULE_1__.Download, {\n                        className: \"w-5 h-5\"\n                    }, void 0, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ActionBar.js\",\n                        lineNumber: 13,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ActionBar.js\",\n                    lineNumber: 7,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    type: \"button\",\n                    onClick: handleRegenerate,\n                    className: \"w-10 h-10 rounded-full flex items-center justify-center bg-white text-gray-600 shadow-soft transition-all hover:scale-110 hover:bg-gray-50\",\n                    \"aria-label\": \"Regenerate\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Download_RefreshCw_lucide_react__WEBPACK_IMPORTED_MODULE_1__.RefreshCw, {\n                        className: \"w-5 h-5\"\n                    }, void 0, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ActionBar.js\",\n                        lineNumber: 22,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ActionBar.js\",\n                    lineNumber: 16,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ActionBar.js\",\n            lineNumber: 6,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ActionBar.js\",\n        lineNumber: 5,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ActionBar);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvQWN0aW9uQmFyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQW1EO0FBRW5ELE1BQU1FLFlBQVksQ0FBQyxFQUFFQyxlQUFlLEVBQUVDLGdCQUFnQixFQUFFO0lBQ3RELHFCQUNFLDhEQUFDQztRQUFJQyxXQUFVO2tCQUNiLDRFQUFDQztZQUFLRCxXQUFVOzs4QkFDZCw4REFBQ0U7b0JBQ0NDLE1BQUs7b0JBQ0xDLFNBQVNQO29CQUNURyxXQUFVO29CQUNWSyxjQUFXOzhCQUVYLDRFQUFDWCw0RkFBUUE7d0JBQUNNLFdBQVU7Ozs7Ozs7Ozs7OzhCQUd0Qiw4REFBQ0U7b0JBQ0NDLE1BQUs7b0JBQ0xDLFNBQVNOO29CQUNURSxXQUFVO29CQUNWSyxjQUFXOzhCQUVYLDRFQUFDViw2RkFBU0E7d0JBQUNLLFdBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLL0I7QUFFQSxpRUFBZUosU0FBU0EsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3RydWR5cC9EZXNrdG9wL2Rldi1nZW1pbmktMi4wL2NvbXBvbmVudHMvQWN0aW9uQmFyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERvd25sb2FkLCBSZWZyZXNoQ3cgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuXG5jb25zdCBBY3Rpb25CYXIgPSAoeyBoYW5kbGVTYXZlSW1hZ2UsIGhhbmRsZVJlZ2VuZXJhdGUgfSkgPT4ge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWVuZCBtYi00XCI+XG4gICAgICA8bWVudSBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBiZy1ncmF5LTIwMCByb3VuZGVkLWZ1bGwgcC0yIHNoYWRvdy1zb2Z0IGdhcC0yXCI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVTYXZlSW1hZ2V9XG4gICAgICAgICAgY2xhc3NOYW1lPVwidy0xMCBoLTEwIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy13aGl0ZSB0ZXh0LWdyYXktNjAwIHNoYWRvdy1zb2Z0IHRyYW5zaXRpb24tYWxsIGhvdmVyOnNjYWxlLTExMCBob3ZlcjpiZy1ncmF5LTUwXCJcbiAgICAgICAgICBhcmlhLWxhYmVsPVwiU2F2ZSBJbWFnZVwiXG4gICAgICAgID5cbiAgICAgICAgICA8RG93bmxvYWQgY2xhc3NOYW1lPVwidy01IGgtNVwiIC8+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICBcbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVJlZ2VuZXJhdGV9XG4gICAgICAgICAgY2xhc3NOYW1lPVwidy0xMCBoLTEwIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy13aGl0ZSB0ZXh0LWdyYXktNjAwIHNoYWRvdy1zb2Z0IHRyYW5zaXRpb24tYWxsIGhvdmVyOnNjYWxlLTExMCBob3ZlcjpiZy1ncmF5LTUwXCJcbiAgICAgICAgICBhcmlhLWxhYmVsPVwiUmVnZW5lcmF0ZVwiXG4gICAgICAgID5cbiAgICAgICAgICA8UmVmcmVzaEN3IGNsYXNzTmFtZT1cInctNSBoLTVcIiAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvbWVudT5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFjdGlvbkJhcjsgIl0sIm5hbWVzIjpbIkRvd25sb2FkIiwiUmVmcmVzaEN3IiwiQWN0aW9uQmFyIiwiaGFuZGxlU2F2ZUltYWdlIiwiaGFuZGxlUmVnZW5lcmF0ZSIsImRpdiIsImNsYXNzTmFtZSIsIm1lbnUiLCJidXR0b24iLCJ0eXBlIiwib25DbGljayIsImFyaWEtbGFiZWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/ActionBar.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/Canvas.js":
/*!******************************!*\
  !*** ./components/Canvas.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_canvasUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/canvasUtils */ \"(pages-dir-node)/./components/utils/canvasUtils.js\");\n/* harmony import */ var _barrel_optimize_names_PencilLine_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=PencilLine!=!lucide-react */ \"(pages-dir-node)/__barrel_optimize__?names=PencilLine!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\n/* harmony import */ var _ToolBar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ToolBar */ \"(pages-dir-node)/./components/ToolBar.js\");\n\n\n\n\n\nconst Canvas = ({ canvasRef, currentTool, isDrawing, startDrawing, draw, stopDrawing, handleCanvasClick, handlePenClick, handleGeneration, tempPoints, setTempPoints, handleUndo, clearCanvas, setCurrentTool })=>{\n    const [showBezierGuides, setShowBezierGuides] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [activePoint, setActivePoint] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(-1);\n    const [activeHandle, setActiveHandle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [symmetric, setSymmetric] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [lastMousePos, setLastMousePos] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        x: 0,\n        y: 0\n    });\n    const [hasDrawing, setHasDrawing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [strokeCount, setStrokeCount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    // Add touch event prevention function\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Canvas.useEffect\": ()=>{\n            // Function to prevent default touch behavior on canvas\n            const preventTouchDefault = {\n                \"Canvas.useEffect.preventTouchDefault\": (e)=>{\n                    if (isDrawing) {\n                        e.preventDefault();\n                    }\n                }\n            }[\"Canvas.useEffect.preventTouchDefault\"];\n            // Add event listener when component mounts\n            const canvas = canvasRef.current;\n            if (canvas) {\n                canvas.addEventListener('touchstart', preventTouchDefault, {\n                    passive: false\n                });\n                canvas.addEventListener('touchmove', preventTouchDefault, {\n                    passive: false\n                });\n            }\n            // Remove event listener when component unmounts\n            return ({\n                \"Canvas.useEffect\": ()=>{\n                    if (canvas) {\n                        canvas.removeEventListener('touchstart', preventTouchDefault);\n                        canvas.removeEventListener('touchmove', preventTouchDefault);\n                    }\n                }\n            })[\"Canvas.useEffect\"];\n        }\n    }[\"Canvas.useEffect\"], [\n        isDrawing,\n        canvasRef\n    ]);\n    // Add debugging info to console\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Canvas.useEffect\": ()=>{\n            console.log('Canvas tool changed or isDrawing changed:', {\n                currentTool,\n                isDrawing\n            });\n        }\n    }[\"Canvas.useEffect\"], [\n        currentTool,\n        isDrawing\n    ]);\n    // Redraw bezier guides and control points when tempPoints change\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Canvas.useEffect\": ()=>{\n            if (currentTool === 'pen' && tempPoints.length > 0 && showBezierGuides) {\n                redrawBezierGuides();\n            }\n        }\n    }[\"Canvas.useEffect\"], [\n        tempPoints,\n        showBezierGuides,\n        currentTool\n    ]);\n    // Add useEffect to check if canvas has content\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Canvas.useEffect\": ()=>{\n            const canvas = canvasRef.current;\n            if (!canvas) return;\n            const ctx = canvas.getContext('2d');\n            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n            // Check if canvas has any non-white pixels (i.e., has a drawing)\n            const hasNonWhitePixels = Array.from(imageData.data).some({\n                \"Canvas.useEffect.hasNonWhitePixels\": (pixel, index)=>{\n                    // Check only RGB values (skip alpha)\n                    return index % 4 !== 3 && pixel !== 255;\n                }\n            }[\"Canvas.useEffect.hasNonWhitePixels\"]);\n            setHasDrawing(hasNonWhitePixels);\n        }\n    }[\"Canvas.useEffect\"], [\n        canvasRef\n    ]);\n    const handleKeyDown = (e)=>{\n        // Add keyboard accessibility\n        if (e.key === 'Enter' || e.key === ' ') {\n            handleCanvasClick(e);\n        }\n        // Toggle symmetric handles with Shift key\n        if (e.key === 'Shift') {\n            setSymmetric(!symmetric);\n        }\n    };\n    // Draw bezier control points and guide lines\n    const redrawBezierGuides = ()=>{\n        const canvas = canvasRef.current;\n        if (!canvas) return;\n        // Get the canvas context\n        const ctx = canvas.getContext('2d');\n        // Save the current canvas state to redraw later\n        const canvasImage = new Image();\n        canvasImage.src = canvas.toDataURL();\n        canvasImage.onload = ()=>{\n            // Clear canvas\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            // Redraw the canvas content\n            ctx.drawImage(canvasImage, 0, 0);\n            // Draw the control points and guide lines\n            (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_2__.drawBezierGuides)(ctx, tempPoints);\n        };\n    };\n    // Custom handler for stopping drawing with pen tool\n    const handleStopDrawing = (e)=>{\n        console.log('handleStopDrawing called', {\n            eventType: e?.type,\n            currentTool,\n            isDrawing,\n            activePoint,\n            activeHandle\n        });\n        // If we're using the pen tool with active point or handle\n        if (currentTool === 'pen') {\n            // If we were dragging a handle, just release it\n            if (activeHandle) {\n                setActiveHandle(null);\n                return;\n            }\n            // If we were dragging an anchor point, just release it\n            if (activePoint !== -1) {\n                setActivePoint(-1);\n                return;\n            }\n        }\n        stopDrawing(e);\n        // If using the pencil tool and we've just finished a drag, trigger generation\n        if (currentTool === 'pencil' && isDrawing) {\n            console.log(`${currentTool} tool condition met, will try to trigger generation`);\n            // Small delay to ensure the drawing is complete\n            setTimeout(()=>{\n                console.log('Attempting to call handleGeneration after timeout');\n                if (typeof handleGeneration === 'function') {\n                    console.log('Calling handleGeneration function');\n                    handleGeneration();\n                } else {\n                    console.error('handleGeneration is not a function:', handleGeneration);\n                }\n            }, 100);\n        } else {\n            console.log('Generation not triggered because:', {\n                isPenTool: currentTool === 'pen',\n                isPencilTool: currentTool === 'pencil',\n                wasDrawing: isDrawing\n            });\n        }\n    };\n    // Check if we clicked on an existing point or handle\n    const checkForPointOrHandle = (e)=>{\n        if (currentTool !== 'pen' || !showBezierGuides || tempPoints.length === 0) {\n            return false;\n        }\n        const canvas = canvasRef.current;\n        const { x, y } = (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_2__.getCoordinates)(e, canvas);\n        setLastMousePos({\n            x,\n            y\n        });\n        // Check if we clicked on a handle\n        for(let i = 0; i < tempPoints.length; i++){\n            const point = tempPoints[i];\n            // Check for handleIn\n            if ((0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_2__.isNearHandle)(point, 'handleIn', x, y)) {\n                setActivePoint(i);\n                setActiveHandle('handleIn');\n                return true;\n            }\n            // Check for handleOut\n            if ((0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_2__.isNearHandle)(point, 'handleOut', x, y)) {\n                setActivePoint(i);\n                setActiveHandle('handleOut');\n                return true;\n            }\n            // Check for the anchor point itself\n            const distance = Math.sqrt((point.x - x) ** 2 + (point.y - y) ** 2);\n            if (distance <= 10) {\n                setActivePoint(i);\n                setActiveHandle(null);\n                return true;\n            }\n        }\n        return false;\n    };\n    // Handle mouse move for bezier control point or handle dragging\n    const handleBezierMouseMove = (e)=>{\n        if (currentTool !== 'pen') {\n            return false;\n        }\n        const canvas = canvasRef.current;\n        const { x, y } = (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_2__.getCoordinates)(e, canvas);\n        const dx = x - lastMousePos.x;\n        const dy = y - lastMousePos.y;\n        // If we're dragging a handle\n        if (activePoint !== -1 && activeHandle) {\n            const newPoints = [\n                ...tempPoints\n            ];\n            (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_2__.updateHandle)(newPoints[activePoint], activeHandle, dx, dy, symmetric);\n            setTempPoints(newPoints);\n            setLastMousePos({\n                x,\n                y\n            });\n            return true;\n        }\n        // If we're dragging an anchor point\n        if (activePoint !== -1) {\n            const newPoints = [\n                ...tempPoints\n            ];\n            newPoints[activePoint].x += dx;\n            newPoints[activePoint].y += dy;\n            // If this point has handles, move them with the point\n            if (newPoints[activePoint].handleIn) {\n            // No need to change the handle's offset, just move with the point\n            }\n            if (newPoints[activePoint].handleOut) {\n            // No need to change the handle's offset, just move with the point\n            }\n            setTempPoints(newPoints);\n            setLastMousePos({\n                x,\n                y\n            });\n            return true;\n        }\n        return false;\n    };\n    // Handle clicks for bezier curve tool\n    const handlePenToolClick = (e)=>{\n        const canvas = canvasRef.current;\n        const { x, y } = (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_2__.getCoordinates)(e, canvas);\n        // Add a new point\n        if (tempPoints.length === 0) {\n            // First point has no handles initially\n            const newPoint = {\n                x,\n                y,\n                handleIn: null,\n                handleOut: null\n            };\n            setTempPoints([\n                newPoint\n            ]);\n        } else {\n            // Create a new point with handles relative to the last point\n            const newPoint = (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_2__.createAnchorPoint)(x, y, tempPoints[tempPoints.length - 1]);\n            setTempPoints([\n                ...tempPoints,\n                newPoint\n            ]);\n        }\n        // Always show guides when adding points\n        setShowBezierGuides(true);\n    };\n    // Toggle bezier guide visibility\n    const toggleBezierGuides = ()=>{\n        setShowBezierGuides(!showBezierGuides);\n        if (showBezierGuides) {\n            redrawBezierGuides();\n        }\n    };\n    // Draw the final bezier curve and clear control points\n    const finalizeBezierCurve = ()=>{\n        if (tempPoints.length < 2) {\n            // Need at least 2 points for a path\n            console.log('Need at least 2 control points to draw a path');\n            return;\n        }\n        const canvas = canvasRef.current;\n        // Draw the actual bezier curve\n        (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_2__.drawBezierCurve)(canvas, tempPoints);\n        // Hide guides and reset control points\n        setShowBezierGuides(false);\n        setTempPoints([]);\n        // Trigger generation\n        setTimeout(()=>{\n            if (typeof handleGeneration === 'function') {\n                handleGeneration();\n            }\n        }, 100);\n    };\n    // Add control point to segment\n    const addControlPoint = (e)=>{\n        if (currentTool !== 'pen' || tempPoints.length < 2) return;\n        const canvas = canvasRef.current;\n        const { x, y } = (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_2__.getCoordinates)(e, canvas);\n        // Find the closest segment to add a point to\n        let closestDistance = Number.POSITIVE_INFINITY;\n        let insertIndex = -1;\n        for(let i = 0; i < tempPoints.length - 1; i++){\n            const p1 = tempPoints[i];\n            const p2 = tempPoints[i + 1];\n            // Calculate distance from click to line between points\n            // This is a simplified distance calculation for demo purposes\n            const lineLength = Math.sqrt((p2.x - p1.x) ** 2 + (p2.y - p1.y) ** 2);\n            if (lineLength === 0) continue;\n            // Project point onto line\n            const t = ((x - p1.x) * (p2.x - p1.x) + (y - p1.y) * (p2.y - p1.y)) / (lineLength * lineLength);\n            // If projection is outside the line segment, skip\n            if (t < 0 || t > 1) continue;\n            // Calculate closest point on line\n            const closestX = p1.x + t * (p2.x - p1.x);\n            const closestY = p1.y + t * (p2.y - p1.y);\n            // Calculate distance to closest point\n            const distance = Math.sqrt((x - closestX) ** 2 + (y - closestY) ** 2);\n            if (distance < closestDistance && distance < 20) {\n                closestDistance = distance;\n                insertIndex = i + 1;\n            }\n        }\n        if (insertIndex > 0) {\n            // Create a new array with the new point inserted\n            const newPoints = [\n                ...tempPoints\n            ];\n            const prevPoint = newPoints[insertIndex - 1];\n            const nextPoint = newPoints[insertIndex];\n            // Create a new point at the click position with automatically calculated handles\n            const newPoint = {\n                x,\n                y,\n                // Calculate handles based on the positions of adjacent points\n                handleIn: {\n                    x: (prevPoint.x - x) * 0.25,\n                    y: (prevPoint.y - y) * 0.25\n                },\n                handleOut: {\n                    x: (nextPoint.x - x) * 0.25,\n                    y: (nextPoint.y - y) * 0.25\n                }\n            };\n            // Insert the new point\n            newPoints.splice(insertIndex, 0, newPoint);\n            setTempPoints(newPoints);\n        }\n    };\n    // Wrap the original startDrawing function to handle empty canvas\n    const handleStartDrawing = (e)=>{\n        // Call the original startDrawing function\n        startDrawing(e);\n        setHasDrawing(true);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"relative\",\n        children: [\n            currentTool === 'pen' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-wrap mb-3 gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        type: \"button\",\n                        onClick: toggleBezierGuides,\n                        className: \"px-2 py-1 bg-gray-200 text-gray-700 rounded-lg text-sm shadow-soft hover:bg-gray-300 transition-colors\",\n                        children: showBezierGuides ? 'Hide Guides' : 'Show Guides'\n                    }, void 0, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Canvas.js\",\n                        lineNumber: 390,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        type: \"button\",\n                        onClick: ()=>setSymmetric(!symmetric),\n                        className: `px-2 py-1 ${symmetric ? 'bg-gray-700 text-white' : 'bg-gray-200 text-gray-700'} rounded-lg text-sm shadow-soft hover:bg-gray-300 hover:text-gray-800 transition-colors`,\n                        children: symmetric ? 'Symmetric Handles' : 'Free Handles'\n                    }, void 0, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Canvas.js\",\n                        lineNumber: 398,\n                        columnNumber: 11\n                    }, undefined),\n                    tempPoints.length >= 2 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        type: \"button\",\n                        onClick: finalizeBezierCurve,\n                        className: \"px-2 py-1 bg-gray-700 text-white rounded-lg text-sm shadow-soft hover:bg-gray-800 transition-colors\",\n                        children: \"Draw Path\"\n                    }, void 0, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Canvas.js\",\n                        lineNumber: 407,\n                        columnNumber: 13\n                    }, undefined),\n                    tempPoints.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        type: \"button\",\n                        onClick: ()=>setTempPoints([]),\n                        className: \"px-2 py-1 bg-gray-200 text-gray-700 rounded-lg text-sm shadow-soft hover:bg-gray-300 transition-colors\",\n                        children: \"Clear Points\"\n                    }, void 0, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Canvas.js\",\n                        lineNumber: 417,\n                        columnNumber: 13\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-sm ml-2 text-gray-600\",\n                        children: [\n                            tempPoints.length,\n                            \" point\",\n                            tempPoints.length !== 1 ? 's' : '',\n                            tempPoints.length >= 2 ? ' (ready)' : ' (need 2+)'\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Canvas.js\",\n                        lineNumber: 426,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-full text-xs text-gray-500 mt-1\",\n                        children: \"Tip: Click to add points, click + drag handles to adjust curves, double-click on segments to add points\"\n                    }, void 0, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Canvas.js\",\n                        lineNumber: 431,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Canvas.js\",\n                lineNumber: 389,\n                columnNumber: 9\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute top-4 right-4 z-10\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ToolBar__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                            currentTool: currentTool,\n                            setCurrentTool: setCurrentTool,\n                            handleUndo: handleUndo,\n                            clearCanvas: clearCanvas\n                        }, void 0, false, {\n                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Canvas.js\",\n                            lineNumber: 440,\n                            columnNumber: 11\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Canvas.js\",\n                        lineNumber: 439,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"canvas\", {\n                        ref: canvasRef,\n                        width: 960,\n                        height: 540,\n                        onMouseDown: (e)=>{\n                            console.log('Canvas onMouseDown', {\n                                currentTool,\n                                isDrawing\n                            });\n                            // For pen (bezier) tool, handle differently\n                            if (currentTool === 'pen') {\n                                // Check if we clicked on an existing point or handle\n                                if (!checkForPointOrHandle(e)) {\n                                    // If not interacting with existing points/handles, add a new point\n                                    handlePenToolClick(e);\n                                }\n                            } else {\n                                // For other tools, use the regular drawing behavior\n                                console.log('Executing regular startDrawing handler');\n                                handleStartDrawing(e);\n                            }\n                        },\n                        onMouseMove: (e)=>{\n                            // For pen (bezier) tool, handle control point/handle dragging\n                            if (currentTool === 'pen' && handleBezierMouseMove(e)) {\n                                // If we handled a bezier element move, return early\n                                return;\n                            }\n                            // For other tools, use regular drawing\n                            draw(e);\n                        },\n                        onMouseUp: (e)=>{\n                            console.log('onMouseUp event triggered', {\n                                currentTool,\n                                isDrawing\n                            });\n                            handleStopDrawing(e);\n                        },\n                        onMouseLeave: (e)=>{\n                            console.log('onMouseLeave event triggered', {\n                                currentTool,\n                                isDrawing\n                            });\n                            handleStopDrawing(e);\n                        },\n                        onDoubleClick: (e)=>{\n                            if (currentTool === 'pen') {\n                                addControlPoint(e);\n                            } else {\n                                handleCanvasClick(e);\n                            }\n                        },\n                        onClick: handleCanvasClick,\n                        onTouchStart: handleStartDrawing,\n                        onTouchMove: draw,\n                        onTouchEnd: handleStopDrawing,\n                        onKeyDown: handleKeyDown,\n                        tabIndex: 0,\n                        className: `border border-gray-300 w-full sm:h-[60vh] h-[30vh] min-h-[320px] bg-white rounded-xl shadow-soft touch-none ${currentTool === 'pen' ? 'cursor-crosshair' : 'hover:cursor-crosshair'}`,\n                        \"aria-label\": \"Drawing canvas\"\n                    }, void 0, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Canvas.js\",\n                        lineNumber: 448,\n                        columnNumber: 9\n                    }, undefined),\n                    !hasDrawing && !isDrawing && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute inset-0 flex flex-col items-center justify-center pointer-events-none\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_PencilLine_lucide_react__WEBPACK_IMPORTED_MODULE_4__.PencilLine, {\n                                className: \"w-12 h-12 text-gray-300 mb-3\"\n                            }, void 0, false, {\n                                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Canvas.js\",\n                                lineNumber: 508,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-gray-500 text-xl font-medium\",\n                                children: \"Draw here\"\n                            }, void 0, false, {\n                                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Canvas.js\",\n                                lineNumber: 509,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Canvas.js\",\n                        lineNumber: 507,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Canvas.js\",\n                lineNumber: 437,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Canvas.js\",\n        lineNumber: 387,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Canvas);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvQ2FudmFzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFvRDtBQVF2QjtBQUNhO0FBQ1Y7QUFFaEMsTUFBTVcsU0FBUyxDQUFDLEVBQ2RDLFNBQVMsRUFDVEMsV0FBVyxFQUNYQyxTQUFTLEVBQ1RDLFlBQVksRUFDWkMsSUFBSSxFQUNKQyxXQUFXLEVBQ1hDLGlCQUFpQixFQUNqQkMsY0FBYyxFQUNkQyxnQkFBZ0IsRUFDaEJDLFVBQVUsRUFDVkMsYUFBYSxFQUNiQyxVQUFVLEVBQ1ZDLFdBQVcsRUFDWEMsY0FBYyxFQUNmO0lBQ0MsTUFBTSxDQUFDQyxrQkFBa0JDLG9CQUFvQixHQUFHekIsK0NBQVFBLENBQUM7SUFDekQsTUFBTSxDQUFDMEIsYUFBYUMsZUFBZSxHQUFHM0IsK0NBQVFBLENBQUMsQ0FBQztJQUNoRCxNQUFNLENBQUM0QixjQUFjQyxnQkFBZ0IsR0FBRzdCLCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQzhCLFdBQVdDLGFBQWEsR0FBRy9CLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQ2dDLGNBQWNDLGdCQUFnQixHQUFHakMsK0NBQVFBLENBQUM7UUFBRWtDLEdBQUc7UUFBR0MsR0FBRztJQUFFO0lBQzlELE1BQU0sQ0FBQ0MsWUFBWUMsY0FBYyxHQUFHckMsK0NBQVFBLENBQUM7SUFDN0MsTUFBTSxDQUFDc0MsYUFBYUMsZUFBZSxHQUFHdkMsK0NBQVFBLENBQUM7SUFFL0Msc0NBQXNDO0lBQ3RDRCxnREFBU0E7NEJBQUM7WUFDUix1REFBdUQ7WUFDdkQsTUFBTXlDO3dEQUFzQixDQUFDQztvQkFDM0IsSUFBSTdCLFdBQVc7d0JBQ2I2QixFQUFFQyxjQUFjO29CQUNsQjtnQkFDRjs7WUFFQSwyQ0FBMkM7WUFDM0MsTUFBTUMsU0FBU2pDLFVBQVVrQyxPQUFPO1lBQ2hDLElBQUlELFFBQVE7Z0JBQ1ZBLE9BQU9FLGdCQUFnQixDQUFDLGNBQWNMLHFCQUFxQjtvQkFBRU0sU0FB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cUIsMEJBQzdDO3dCQUNGc0gsY0FBVzs7Ozs7O29CQUlaLENBQUM3RixjQUFjLENBQUN4QiwyQkFDZiw4REFBQ3FHO3dCQUFJQyxXQUFVOzswQ0FDYiw4REFBQzNHLHNGQUFVQTtnQ0FBQzJHLFdBQVU7Ozs7OzswQ0FDdEIsOERBQUNnQjtnQ0FBRWhCLFdBQVU7MENBQW9DOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNN0Q7QUFFQSxpRUFBZXpHLE1BQU1BLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy90cnVkeXAvRGVza3RvcC9kZXYtZ2VtaW5pLTIuMC9jb21wb25lbnRzL0NhbnZhcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBcbiAgZ2V0Q29vcmRpbmF0ZXMsIFxuICBkcmF3QmV6aWVyQ3VydmUsIFxuICBkcmF3QmV6aWVyR3VpZGVzLCBcbiAgY3JlYXRlQW5jaG9yUG9pbnQsXG4gIGlzTmVhckhhbmRsZSxcbiAgdXBkYXRlSGFuZGxlXG59IGZyb20gJy4vdXRpbHMvY2FudmFzVXRpbHMnO1xuaW1wb3J0IHsgUGVuY2lsTGluZSB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgVG9vbEJhciBmcm9tICcuL1Rvb2xCYXInO1xuXG5jb25zdCBDYW52YXMgPSAoe1xuICBjYW52YXNSZWYsXG4gIGN1cnJlbnRUb29sLFxuICBpc0RyYXdpbmcsXG4gIHN0YXJ0RHJhd2luZyxcbiAgZHJhdyxcbiAgc3RvcERyYXdpbmcsXG4gIGhhbmRsZUNhbnZhc0NsaWNrLFxuICBoYW5kbGVQZW5DbGljayxcbiAgaGFuZGxlR2VuZXJhdGlvbixcbiAgdGVtcFBvaW50cyxcbiAgc2V0VGVtcFBvaW50cyxcbiAgaGFuZGxlVW5kbyxcbiAgY2xlYXJDYW52YXMsXG4gIHNldEN1cnJlbnRUb29sXG59KSA9PiB7XG4gIGNvbnN0IFtzaG93QmV6aWVyR3VpZGVzLCBzZXRTaG93QmV6aWVyR3VpZGVzXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbYWN0aXZlUG9pbnQsIHNldEFjdGl2ZVBvaW50XSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FjdGl2ZUhhbmRsZSwgc2V0QWN0aXZlSGFuZGxlXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbc3ltbWV0cmljLCBzZXRTeW1tZXRyaWNdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsYXN0TW91c2VQb3MsIHNldExhc3RNb3VzZVBvc10gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7XG4gIGNvbnN0IFtoYXNEcmF3aW5nLCBzZXRIYXNEcmF3aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3N0cm9rZUNvdW50LCBzZXRTdHJva2VDb3VudF0gPSB1c2VTdGF0ZSgwKTtcblxuICAvLyBBZGQgdG91Y2ggZXZlbnQgcHJldmVudGlvbiBmdW5jdGlvblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIEZ1bmN0aW9uIHRvIHByZXZlbnQgZGVmYXVsdCB0b3VjaCBiZWhhdmlvciBvbiBjYW52YXNcbiAgICBjb25zdCBwcmV2ZW50VG91Y2hEZWZhdWx0ID0gKGUpID0+IHtcbiAgICAgIGlmIChpc0RyYXdpbmcpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXIgd2hlbiBjb21wb25lbnQgbW91bnRzXG4gICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7XG4gICAgaWYgKGNhbnZhcykge1xuICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBwcmV2ZW50VG91Y2hEZWZhdWx0LCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHByZXZlbnRUb3VjaERlZmF1bHQsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGV2ZW50IGxpc3RlbmVyIHdoZW4gY29tcG9uZW50IHVubW91bnRzXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChjYW52YXMpIHtcbiAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBwcmV2ZW50VG91Y2hEZWZhdWx0KTtcbiAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHByZXZlbnRUb3VjaERlZmF1bHQpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtpc0RyYXdpbmcsIGNhbnZhc1JlZl0pO1xuXG4gIC8vIEFkZCBkZWJ1Z2dpbmcgaW5mbyB0byBjb25zb2xlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0NhbnZhcyB0b29sIGNoYW5nZWQgb3IgaXNEcmF3aW5nIGNoYW5nZWQ6JywgeyBjdXJyZW50VG9vbCwgaXNEcmF3aW5nIH0pO1xuICB9LCBbY3VycmVudFRvb2wsIGlzRHJhd2luZ10pO1xuXG4gIC8vIFJlZHJhdyBiZXppZXIgZ3VpZGVzIGFuZCBjb250cm9sIHBvaW50cyB3aGVuIHRlbXBQb2ludHMgY2hhbmdlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGN1cnJlbnRUb29sID09PSAncGVuJyAmJiB0ZW1wUG9pbnRzLmxlbmd0aCA+IDAgJiYgc2hvd0Jlemllckd1aWRlcykge1xuICAgICAgcmVkcmF3QmV6aWVyR3VpZGVzKCk7XG4gICAgfVxuICB9LCBbdGVtcFBvaW50cywgc2hvd0Jlemllckd1aWRlcywgY3VycmVudFRvb2xdKTtcblxuICAvLyBBZGQgdXNlRWZmZWN0IHRvIGNoZWNrIGlmIGNhbnZhcyBoYXMgY29udGVudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50O1xuICAgIGlmICghY2FudmFzKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgY29uc3QgaW1hZ2VEYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIGNhbnZhcyBoYXMgYW55IG5vbi13aGl0ZSBwaXhlbHMgKGkuZS4sIGhhcyBhIGRyYXdpbmcpXG4gICAgY29uc3QgaGFzTm9uV2hpdGVQaXhlbHMgPSBBcnJheS5mcm9tKGltYWdlRGF0YS5kYXRhKS5zb21lKChwaXhlbCwgaW5kZXgpID0+IHtcbiAgICAgIC8vIENoZWNrIG9ubHkgUkdCIHZhbHVlcyAoc2tpcCBhbHBoYSlcbiAgICAgIHJldHVybiBpbmRleCAlIDQgIT09IDMgJiYgcGl4ZWwgIT09IDI1NTtcbiAgICB9KTtcbiAgICBcbiAgICBzZXRIYXNEcmF3aW5nKGhhc05vbldoaXRlUGl4ZWxzKTtcbiAgfSwgW2NhbnZhc1JlZl0pO1xuXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZSkgPT4ge1xuICAgIC8vIEFkZCBrZXlib2FyZCBhY2Nlc3NpYmlsaXR5XG4gICAgaWYgKGUua2V5ID09PSAnRW50ZXInIHx8IGUua2V5ID09PSAnICcpIHtcbiAgICAgIGhhbmRsZUNhbnZhc0NsaWNrKGUpO1xuICAgIH1cbiAgICBcbiAgICAvLyBUb2dnbGUgc3ltbWV0cmljIGhhbmRsZXMgd2l0aCBTaGlmdCBrZXlcbiAgICBpZiAoZS5rZXkgPT09ICdTaGlmdCcpIHtcbiAgICAgIHNldFN5bW1ldHJpYyghc3ltbWV0cmljKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gRHJhdyBiZXppZXIgY29udHJvbCBwb2ludHMgYW5kIGd1aWRlIGxpbmVzXG4gIGNvbnN0IHJlZHJhd0Jlemllckd1aWRlcyA9ICgpID0+IHtcbiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcbiAgICBpZiAoIWNhbnZhcykgcmV0dXJuO1xuICAgIFxuICAgIC8vIEdldCB0aGUgY2FudmFzIGNvbnRleHRcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBcbiAgICAvLyBTYXZlIHRoZSBjdXJyZW50IGNhbnZhcyBzdGF0ZSB0byByZWRyYXcgbGF0ZXJcbiAgICBjb25zdCBjYW52YXNJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIGNhbnZhc0ltYWdlLnNyYyA9IGNhbnZhcy50b0RhdGFVUkwoKTtcbiAgICBcbiAgICBjYW52YXNJbWFnZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAvLyBDbGVhciBjYW52YXNcbiAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgIFxuICAgICAgLy8gUmVkcmF3IHRoZSBjYW52YXMgY29udGVudFxuICAgICAgY3R4LmRyYXdJbWFnZShjYW52YXNJbWFnZSwgMCwgMCk7XG4gICAgICBcbiAgICAgIC8vIERyYXcgdGhlIGNvbnRyb2wgcG9pbnRzIGFuZCBndWlkZSBsaW5lc1xuICAgICAgZHJhd0Jlemllckd1aWRlcyhjdHgsIHRlbXBQb2ludHMpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gQ3VzdG9tIGhhbmRsZXIgZm9yIHN0b3BwaW5nIGRyYXdpbmcgd2l0aCBwZW4gdG9vbFxuICBjb25zdCBoYW5kbGVTdG9wRHJhd2luZyA9IChlKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2hhbmRsZVN0b3BEcmF3aW5nIGNhbGxlZCcsIHsgXG4gICAgICBldmVudFR5cGU6IGU/LnR5cGUsIFxuICAgICAgY3VycmVudFRvb2wsIFxuICAgICAgaXNEcmF3aW5nLCBcbiAgICAgIGFjdGl2ZVBvaW50LCBcbiAgICAgIGFjdGl2ZUhhbmRsZVxuICAgIH0pO1xuICAgIFxuICAgIC8vIElmIHdlJ3JlIHVzaW5nIHRoZSBwZW4gdG9vbCB3aXRoIGFjdGl2ZSBwb2ludCBvciBoYW5kbGVcbiAgICBpZiAoY3VycmVudFRvb2wgPT09ICdwZW4nKSB7XG4gICAgICAvLyBJZiB3ZSB3ZXJlIGRyYWdnaW5nIGEgaGFuZGxlLCBqdXN0IHJlbGVhc2UgaXRcbiAgICAgIGlmIChhY3RpdmVIYW5kbGUpIHtcbiAgICAgICAgc2V0QWN0aXZlSGFuZGxlKG51bGwpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIElmIHdlIHdlcmUgZHJhZ2dpbmcgYW4gYW5jaG9yIHBvaW50LCBqdXN0IHJlbGVhc2UgaXRcbiAgICAgIGlmIChhY3RpdmVQb2ludCAhPT0gLTEpIHtcbiAgICAgICAgc2V0QWN0aXZlUG9pbnQoLTEpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHN0b3BEcmF3aW5nKGUpO1xuICAgIFxuICAgIC8vIElmIHVzaW5nIHRoZSBwZW5jaWwgdG9vbCBhbmQgd2UndmUganVzdCBmaW5pc2hlZCBhIGRyYWcsIHRyaWdnZXIgZ2VuZXJhdGlvblxuICAgIGlmIChjdXJyZW50VG9vbCA9PT0gJ3BlbmNpbCcgJiYgaXNEcmF3aW5nKSB7XG4gICAgICBjb25zb2xlLmxvZyhgJHtjdXJyZW50VG9vbH0gdG9vbCBjb25kaXRpb24gbWV0LCB3aWxsIHRyeSB0byB0cmlnZ2VyIGdlbmVyYXRpb25gKTtcbiAgICAgIFxuICAgICAgLy8gU21hbGwgZGVsYXkgdG8gZW5zdXJlIHRoZSBkcmF3aW5nIGlzIGNvbXBsZXRlXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgdG8gY2FsbCBoYW5kbGVHZW5lcmF0aW9uIGFmdGVyIHRpbWVvdXQnKTtcbiAgICAgICAgaWYgKHR5cGVvZiBoYW5kbGVHZW5lcmF0aW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0NhbGxpbmcgaGFuZGxlR2VuZXJhdGlvbiBmdW5jdGlvbicpO1xuICAgICAgICAgIGhhbmRsZUdlbmVyYXRpb24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdoYW5kbGVHZW5lcmF0aW9uIGlzIG5vdCBhIGZ1bmN0aW9uOicsIGhhbmRsZUdlbmVyYXRpb24pO1xuICAgICAgICB9XG4gICAgICB9LCAxMDApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnR2VuZXJhdGlvbiBub3QgdHJpZ2dlcmVkIGJlY2F1c2U6JywgeyBcbiAgICAgICAgaXNQZW5Ub29sOiBjdXJyZW50VG9vbCA9PT0gJ3BlbicsXG4gICAgICAgIGlzUGVuY2lsVG9vbDogY3VycmVudFRvb2wgPT09ICdwZW5jaWwnLFxuICAgICAgICB3YXNEcmF3aW5nOiBpc0RyYXdpbmcgXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQ2hlY2sgaWYgd2UgY2xpY2tlZCBvbiBhbiBleGlzdGluZyBwb2ludCBvciBoYW5kbGVcbiAgY29uc3QgY2hlY2tGb3JQb2ludE9ySGFuZGxlID0gKGUpID0+IHtcbiAgICBpZiAoY3VycmVudFRvb2wgIT09ICdwZW4nIHx8ICFzaG93QmV6aWVyR3VpZGVzIHx8IHRlbXBQb2ludHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50O1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gZ2V0Q29vcmRpbmF0ZXMoZSwgY2FudmFzKTtcbiAgICBzZXRMYXN0TW91c2VQb3MoeyB4LCB5IH0pO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHdlIGNsaWNrZWQgb24gYSBoYW5kbGVcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlbXBQb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHBvaW50ID0gdGVtcFBvaW50c1tpXTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIGhhbmRsZUluXG4gICAgICBpZiAoaXNOZWFySGFuZGxlKHBvaW50LCAnaGFuZGxlSW4nLCB4LCB5KSkge1xuICAgICAgICBzZXRBY3RpdmVQb2ludChpKTtcbiAgICAgICAgc2V0QWN0aXZlSGFuZGxlKCdoYW5kbGVJbicpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIGhhbmRsZU91dFxuICAgICAgaWYgKGlzTmVhckhhbmRsZShwb2ludCwgJ2hhbmRsZU91dCcsIHgsIHkpKSB7XG4gICAgICAgIHNldEFjdGl2ZVBvaW50KGkpO1xuICAgICAgICBzZXRBY3RpdmVIYW5kbGUoJ2hhbmRsZU91dCcpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIHRoZSBhbmNob3IgcG9pbnQgaXRzZWxmXG4gICAgICBjb25zdCBkaXN0YW5jZSA9IE1hdGguc3FydCgocG9pbnQueCAtIHgpICoqIDIgKyAocG9pbnQueSAtIHkpICoqIDIpO1xuICAgICAgaWYgKGRpc3RhbmNlIDw9IDEwKSB7XG4gICAgICAgIHNldEFjdGl2ZVBvaW50KGkpO1xuICAgICAgICBzZXRBY3RpdmVIYW5kbGUobnVsbCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG4gIFxuICAvLyBIYW5kbGUgbW91c2UgbW92ZSBmb3IgYmV6aWVyIGNvbnRyb2wgcG9pbnQgb3IgaGFuZGxlIGRyYWdnaW5nXG4gIGNvbnN0IGhhbmRsZUJlemllck1vdXNlTW92ZSA9IChlKSA9PiB7XG4gICAgaWYgKGN1cnJlbnRUb29sICE9PSAncGVuJykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcbiAgICBjb25zdCB7IHgsIHkgfSA9IGdldENvb3JkaW5hdGVzKGUsIGNhbnZhcyk7XG4gICAgY29uc3QgZHggPSB4IC0gbGFzdE1vdXNlUG9zLng7XG4gICAgY29uc3QgZHkgPSB5IC0gbGFzdE1vdXNlUG9zLnk7XG4gICAgXG4gICAgLy8gSWYgd2UncmUgZHJhZ2dpbmcgYSBoYW5kbGVcbiAgICBpZiAoYWN0aXZlUG9pbnQgIT09IC0xICYmIGFjdGl2ZUhhbmRsZSkge1xuICAgICAgY29uc3QgbmV3UG9pbnRzID0gWy4uLnRlbXBQb2ludHNdO1xuICAgICAgdXBkYXRlSGFuZGxlKG5ld1BvaW50c1thY3RpdmVQb2ludF0sIGFjdGl2ZUhhbmRsZSwgZHgsIGR5LCBzeW1tZXRyaWMpO1xuICAgICAgc2V0VGVtcFBvaW50cyhuZXdQb2ludHMpO1xuICAgICAgc2V0TGFzdE1vdXNlUG9zKHsgeCwgeSB9KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBJZiB3ZSdyZSBkcmFnZ2luZyBhbiBhbmNob3IgcG9pbnRcbiAgICBpZiAoYWN0aXZlUG9pbnQgIT09IC0xKSB7XG4gICAgICBjb25zdCBuZXdQb2ludHMgPSBbLi4udGVtcFBvaW50c107XG4gICAgICBuZXdQb2ludHNbYWN0aXZlUG9pbnRdLnggKz0gZHg7XG4gICAgICBuZXdQb2ludHNbYWN0aXZlUG9pbnRdLnkgKz0gZHk7XG4gICAgICBcbiAgICAgIC8vIElmIHRoaXMgcG9pbnQgaGFzIGhhbmRsZXMsIG1vdmUgdGhlbSB3aXRoIHRoZSBwb2ludFxuICAgICAgaWYgKG5ld1BvaW50c1thY3RpdmVQb2ludF0uaGFuZGxlSW4pIHtcbiAgICAgICAgLy8gTm8gbmVlZCB0byBjaGFuZ2UgdGhlIGhhbmRsZSdzIG9mZnNldCwganVzdCBtb3ZlIHdpdGggdGhlIHBvaW50XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChuZXdQb2ludHNbYWN0aXZlUG9pbnRdLmhhbmRsZU91dCkge1xuICAgICAgICAvLyBObyBuZWVkIHRvIGNoYW5nZSB0aGUgaGFuZGxlJ3Mgb2Zmc2V0LCBqdXN0IG1vdmUgd2l0aCB0aGUgcG9pbnRcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc2V0VGVtcFBvaW50cyhuZXdQb2ludHMpO1xuICAgICAgc2V0TGFzdE1vdXNlUG9zKHsgeCwgeSB9KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLy8gSGFuZGxlIGNsaWNrcyBmb3IgYmV6aWVyIGN1cnZlIHRvb2xcbiAgY29uc3QgaGFuZGxlUGVuVG9vbENsaWNrID0gKGUpID0+IHtcbiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcbiAgICBjb25zdCB7IHgsIHkgfSA9IGdldENvb3JkaW5hdGVzKGUsIGNhbnZhcyk7XG4gICAgXG4gICAgLy8gQWRkIGEgbmV3IHBvaW50XG4gICAgaWYgKHRlbXBQb2ludHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBGaXJzdCBwb2ludCBoYXMgbm8gaGFuZGxlcyBpbml0aWFsbHlcbiAgICAgIGNvbnN0IG5ld1BvaW50ID0geyB4LCB5LCBoYW5kbGVJbjogbnVsbCwgaGFuZGxlT3V0OiBudWxsIH07XG4gICAgICBzZXRUZW1wUG9pbnRzKFtuZXdQb2ludF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDcmVhdGUgYSBuZXcgcG9pbnQgd2l0aCBoYW5kbGVzIHJlbGF0aXZlIHRvIHRoZSBsYXN0IHBvaW50XG4gICAgICBjb25zdCBuZXdQb2ludCA9IGNyZWF0ZUFuY2hvclBvaW50KHgsIHksIHRlbXBQb2ludHNbdGVtcFBvaW50cy5sZW5ndGggLSAxXSk7XG4gICAgICBzZXRUZW1wUG9pbnRzKFsuLi50ZW1wUG9pbnRzLCBuZXdQb2ludF0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBBbHdheXMgc2hvdyBndWlkZXMgd2hlbiBhZGRpbmcgcG9pbnRzXG4gICAgc2V0U2hvd0Jlemllckd1aWRlcyh0cnVlKTtcbiAgfTtcbiAgXG4gIC8vIFRvZ2dsZSBiZXppZXIgZ3VpZGUgdmlzaWJpbGl0eVxuICBjb25zdCB0b2dnbGVCZXppZXJHdWlkZXMgPSAoKSA9PiB7XG4gICAgc2V0U2hvd0Jlemllckd1aWRlcyghc2hvd0Jlemllckd1aWRlcyk7XG4gICAgaWYgKHNob3dCZXppZXJHdWlkZXMpIHtcbiAgICAgIHJlZHJhd0Jlemllckd1aWRlcygpO1xuICAgIH1cbiAgfTtcblxuICAvLyBEcmF3IHRoZSBmaW5hbCBiZXppZXIgY3VydmUgYW5kIGNsZWFyIGNvbnRyb2wgcG9pbnRzXG4gIGNvbnN0IGZpbmFsaXplQmV6aWVyQ3VydmUgPSAoKSA9PiB7XG4gICAgaWYgKHRlbXBQb2ludHMubGVuZ3RoIDwgMikge1xuICAgICAgLy8gTmVlZCBhdCBsZWFzdCAyIHBvaW50cyBmb3IgYSBwYXRoXG4gICAgICBjb25zb2xlLmxvZygnTmVlZCBhdCBsZWFzdCAyIGNvbnRyb2wgcG9pbnRzIHRvIGRyYXcgYSBwYXRoJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50O1xuICAgIFxuICAgIC8vIERyYXcgdGhlIGFjdHVhbCBiZXppZXIgY3VydmVcbiAgICBkcmF3QmV6aWVyQ3VydmUoY2FudmFzLCB0ZW1wUG9pbnRzKTtcbiAgICBcbiAgICAvLyBIaWRlIGd1aWRlcyBhbmQgcmVzZXQgY29udHJvbCBwb2ludHNcbiAgICBzZXRTaG93QmV6aWVyR3VpZGVzKGZhbHNlKTtcbiAgICBzZXRUZW1wUG9pbnRzKFtdKTtcbiAgICBcbiAgICAvLyBUcmlnZ2VyIGdlbmVyYXRpb25cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgaGFuZGxlR2VuZXJhdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBoYW5kbGVHZW5lcmF0aW9uKCk7XG4gICAgICB9XG4gICAgfSwgMTAwKTtcbiAgfTtcblxuICAvLyBBZGQgY29udHJvbCBwb2ludCB0byBzZWdtZW50XG4gIGNvbnN0IGFkZENvbnRyb2xQb2ludCA9IChlKSA9PiB7XG4gICAgaWYgKGN1cnJlbnRUb29sICE9PSAncGVuJyB8fCB0ZW1wUG9pbnRzLmxlbmd0aCA8IDIpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcbiAgICBjb25zdCB7IHgsIHkgfSA9IGdldENvb3JkaW5hdGVzKGUsIGNhbnZhcyk7XG4gICAgXG4gICAgLy8gRmluZCB0aGUgY2xvc2VzdCBzZWdtZW50IHRvIGFkZCBhIHBvaW50IHRvXG4gICAgbGV0IGNsb3Nlc3REaXN0YW5jZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICBsZXQgaW5zZXJ0SW5kZXggPSAtMTtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlbXBQb2ludHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBjb25zdCBwMSA9IHRlbXBQb2ludHNbaV07XG4gICAgICBjb25zdCBwMiA9IHRlbXBQb2ludHNbaSArIDFdO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgZGlzdGFuY2UgZnJvbSBjbGljayB0byBsaW5lIGJldHdlZW4gcG9pbnRzXG4gICAgICAvLyBUaGlzIGlzIGEgc2ltcGxpZmllZCBkaXN0YW5jZSBjYWxjdWxhdGlvbiBmb3IgZGVtbyBwdXJwb3Nlc1xuICAgICAgY29uc3QgbGluZUxlbmd0aCA9IE1hdGguc3FydCgocDIueCAtIHAxLngpICoqIDIgKyAocDIueSAtIHAxLnkpICoqIDIpO1xuICAgICAgaWYgKGxpbmVMZW5ndGggPT09IDApIGNvbnRpbnVlO1xuICAgICAgXG4gICAgICAvLyBQcm9qZWN0IHBvaW50IG9udG8gbGluZVxuICAgICAgY29uc3QgdCA9ICgoeCAtIHAxLngpICogKHAyLnggLSBwMS54KSArICh5IC0gcDEueSkgKiAocDIueSAtIHAxLnkpKSAvIChsaW5lTGVuZ3RoICogbGluZUxlbmd0aCk7XG4gICAgICBcbiAgICAgIC8vIElmIHByb2plY3Rpb24gaXMgb3V0c2lkZSB0aGUgbGluZSBzZWdtZW50LCBza2lwXG4gICAgICBpZiAodCA8IDAgfHwgdCA+IDEpIGNvbnRpbnVlO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgY2xvc2VzdCBwb2ludCBvbiBsaW5lXG4gICAgICBjb25zdCBjbG9zZXN0WCA9IHAxLnggKyB0ICogKHAyLnggLSBwMS54KTtcbiAgICAgIGNvbnN0IGNsb3Nlc3RZID0gcDEueSArIHQgKiAocDIueSAtIHAxLnkpO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgZGlzdGFuY2UgdG8gY2xvc2VzdCBwb2ludFxuICAgICAgY29uc3QgZGlzdGFuY2UgPSBNYXRoLnNxcnQoKHggLSBjbG9zZXN0WCkgKiogMiArICh5IC0gY2xvc2VzdFkpICoqIDIpO1xuICAgICAgXG4gICAgICBpZiAoZGlzdGFuY2UgPCBjbG9zZXN0RGlzdGFuY2UgJiYgZGlzdGFuY2UgPCAyMCkge1xuICAgICAgICBjbG9zZXN0RGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgICAgaW5zZXJ0SW5kZXggPSBpICsgMTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKGluc2VydEluZGV4ID4gMCkge1xuICAgICAgLy8gQ3JlYXRlIGEgbmV3IGFycmF5IHdpdGggdGhlIG5ldyBwb2ludCBpbnNlcnRlZFxuICAgICAgY29uc3QgbmV3UG9pbnRzID0gWy4uLnRlbXBQb2ludHNdO1xuICAgICAgY29uc3QgcHJldlBvaW50ID0gbmV3UG9pbnRzW2luc2VydEluZGV4IC0gMV07XG4gICAgICBjb25zdCBuZXh0UG9pbnQgPSBuZXdQb2ludHNbaW5zZXJ0SW5kZXhdO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgYSBuZXcgcG9pbnQgYXQgdGhlIGNsaWNrIHBvc2l0aW9uIHdpdGggYXV0b21hdGljYWxseSBjYWxjdWxhdGVkIGhhbmRsZXNcbiAgICAgIGNvbnN0IG5ld1BvaW50ID0geyBcbiAgICAgICAgeCwgXG4gICAgICAgIHksXG4gICAgICAgIC8vIENhbGN1bGF0ZSBoYW5kbGVzIGJhc2VkIG9uIHRoZSBwb3NpdGlvbnMgb2YgYWRqYWNlbnQgcG9pbnRzXG4gICAgICAgIGhhbmRsZUluOiB7IFxuICAgICAgICAgIHg6IChwcmV2UG9pbnQueCAtIHgpICogMC4yNSwgXG4gICAgICAgICAgeTogKHByZXZQb2ludC55IC0geSkgKiAwLjI1IFxuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVPdXQ6IHsgXG4gICAgICAgICAgeDogKG5leHRQb2ludC54IC0geCkgKiAwLjI1LCBcbiAgICAgICAgICB5OiAobmV4dFBvaW50LnkgLSB5KSAqIDAuMjUgXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIEluc2VydCB0aGUgbmV3IHBvaW50XG4gICAgICBuZXdQb2ludHMuc3BsaWNlKGluc2VydEluZGV4LCAwLCBuZXdQb2ludCk7XG4gICAgICBzZXRUZW1wUG9pbnRzKG5ld1BvaW50cyk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFdyYXAgdGhlIG9yaWdpbmFsIHN0YXJ0RHJhd2luZyBmdW5jdGlvbiB0byBoYW5kbGUgZW1wdHkgY2FudmFzXG4gIGNvbnN0IGhhbmRsZVN0YXJ0RHJhd2luZyA9IChlKSA9PiB7XG4gICAgLy8gQ2FsbCB0aGUgb3JpZ2luYWwgc3RhcnREcmF3aW5nIGZ1bmN0aW9uXG4gICAgc3RhcnREcmF3aW5nKGUpO1xuICAgIHNldEhhc0RyYXdpbmcodHJ1ZSk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XG4gICAgICB7Y3VycmVudFRvb2wgPT09ICdwZW4nICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtd3JhcCBtYi0zIGdhcC0yXCI+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBvbkNsaWNrPXt0b2dnbGVCZXppZXJHdWlkZXN9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJweC0yIHB5LTEgYmctZ3JheS0yMDAgdGV4dC1ncmF5LTcwMCByb3VuZGVkLWxnIHRleHQtc20gc2hhZG93LXNvZnQgaG92ZXI6YmctZ3JheS0zMDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtzaG93QmV6aWVyR3VpZGVzID8gJ0hpZGUgR3VpZGVzJyA6ICdTaG93IEd1aWRlcyd9XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgXG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTeW1tZXRyaWMoIXN5bW1ldHJpYyl9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2BweC0yIHB5LTEgJHtzeW1tZXRyaWMgPyAnYmctZ3JheS03MDAgdGV4dC13aGl0ZScgOiAnYmctZ3JheS0yMDAgdGV4dC1ncmF5LTcwMCd9IHJvdW5kZWQtbGcgdGV4dC1zbSBzaGFkb3ctc29mdCBob3ZlcjpiZy1ncmF5LTMwMCBob3Zlcjp0ZXh0LWdyYXktODAwIHRyYW5zaXRpb24tY29sb3JzYH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7c3ltbWV0cmljID8gJ1N5bW1ldHJpYyBIYW5kbGVzJyA6ICdGcmVlIEhhbmRsZXMnfVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIFxuICAgICAgICAgIHt0ZW1wUG9pbnRzLmxlbmd0aCA+PSAyICYmIChcbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2ZpbmFsaXplQmV6aWVyQ3VydmV9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTIgcHktMSBiZy1ncmF5LTcwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgdGV4dC1zbSBzaGFkb3ctc29mdCBob3ZlcjpiZy1ncmF5LTgwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIERyYXcgUGF0aFxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgKX1cbiAgICAgICAgICBcbiAgICAgICAgICB7dGVtcFBvaW50cy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFRlbXBQb2ludHMoW10pfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0yIHB5LTEgYmctZ3JheS0yMDAgdGV4dC1ncmF5LTcwMCByb3VuZGVkLWxnIHRleHQtc20gc2hhZG93LXNvZnQgaG92ZXI6YmctZ3JheS0zMDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBDbGVhciBQb2ludHNcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICl9XG4gICAgICAgICAgXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBtbC0yIHRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICAgIHt0ZW1wUG9pbnRzLmxlbmd0aH0gcG9pbnR7dGVtcFBvaW50cy5sZW5ndGggIT09IDEgPyAncycgOiAnJ30gXG4gICAgICAgICAgICB7dGVtcFBvaW50cy5sZW5ndGggPj0gMiA/ICcgKHJlYWR5KScgOiAnIChuZWVkIDIrKSd9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQteHMgdGV4dC1ncmF5LTUwMCBtdC0xXCI+XG4gICAgICAgICAgICBUaXA6IENsaWNrIHRvIGFkZCBwb2ludHMsIGNsaWNrICsgZHJhZyBoYW5kbGVzIHRvIGFkanVzdCBjdXJ2ZXMsIGRvdWJsZS1jbGljayBvbiBzZWdtZW50cyB0byBhZGQgcG9pbnRzXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgICB7LyogVG9vbEJhciBjb21wb25lbnQgLSBhYnNvbHV0ZWx5IHBvc2l0aW9uZWQgaW4gdGhlIHRvcCByaWdodCAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtNCByaWdodC00IHotMTBcIj5cbiAgICAgICAgICA8VG9vbEJhciBcbiAgICAgICAgICAgIGN1cnJlbnRUb29sPXtjdXJyZW50VG9vbH1cbiAgICAgICAgICAgIHNldEN1cnJlbnRUb29sPXtzZXRDdXJyZW50VG9vbH1cbiAgICAgICAgICAgIGhhbmRsZVVuZG89e2hhbmRsZVVuZG99XG4gICAgICAgICAgICBjbGVhckNhbnZhcz17Y2xlYXJDYW52YXN9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGNhbnZhc1xuICAgICAgICAgIHJlZj17Y2FudmFzUmVmfVxuICAgICAgICAgIHdpZHRoPXs5NjB9XG4gICAgICAgICAgaGVpZ2h0PXs1NDB9XG4gICAgICAgICAgb25Nb3VzZURvd249eyhlKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ2FudmFzIG9uTW91c2VEb3duJywgeyBjdXJyZW50VG9vbCwgaXNEcmF3aW5nIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGb3IgcGVuIChiZXppZXIpIHRvb2wsIGhhbmRsZSBkaWZmZXJlbnRseVxuICAgICAgICAgICAgaWYgKGN1cnJlbnRUb29sID09PSAncGVuJykge1xuICAgICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBjbGlja2VkIG9uIGFuIGV4aXN0aW5nIHBvaW50IG9yIGhhbmRsZVxuICAgICAgICAgICAgICBpZiAoIWNoZWNrRm9yUG9pbnRPckhhbmRsZShlKSkge1xuICAgICAgICAgICAgICAgIC8vIElmIG5vdCBpbnRlcmFjdGluZyB3aXRoIGV4aXN0aW5nIHBvaW50cy9oYW5kbGVzLCBhZGQgYSBuZXcgcG9pbnRcbiAgICAgICAgICAgICAgICBoYW5kbGVQZW5Ub29sQ2xpY2soZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIEZvciBvdGhlciB0b29scywgdXNlIHRoZSByZWd1bGFyIGRyYXdpbmcgYmVoYXZpb3JcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0V4ZWN1dGluZyByZWd1bGFyIHN0YXJ0RHJhd2luZyBoYW5kbGVyJyk7XG4gICAgICAgICAgICAgIGhhbmRsZVN0YXJ0RHJhd2luZyhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9fVxuICAgICAgICAgIG9uTW91c2VNb3ZlPXsoZSkgPT4ge1xuICAgICAgICAgICAgLy8gRm9yIHBlbiAoYmV6aWVyKSB0b29sLCBoYW5kbGUgY29udHJvbCBwb2ludC9oYW5kbGUgZHJhZ2dpbmdcbiAgICAgICAgICAgIGlmIChjdXJyZW50VG9vbCA9PT0gJ3BlbicgJiYgaGFuZGxlQmV6aWVyTW91c2VNb3ZlKGUpKSB7XG4gICAgICAgICAgICAgIC8vIElmIHdlIGhhbmRsZWQgYSBiZXppZXIgZWxlbWVudCBtb3ZlLCByZXR1cm4gZWFybHlcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGb3Igb3RoZXIgdG9vbHMsIHVzZSByZWd1bGFyIGRyYXdpbmdcbiAgICAgICAgICAgIGRyYXcoZSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBvbk1vdXNlVXA9eyhlKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnb25Nb3VzZVVwIGV2ZW50IHRyaWdnZXJlZCcsIHsgY3VycmVudFRvb2wsIGlzRHJhd2luZyB9KTtcbiAgICAgICAgICAgIGhhbmRsZVN0b3BEcmF3aW5nKGUpO1xuICAgICAgICAgIH19XG4gICAgICAgICAgb25Nb3VzZUxlYXZlPXsoZSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ29uTW91c2VMZWF2ZSBldmVudCB0cmlnZ2VyZWQnLCB7IGN1cnJlbnRUb29sLCBpc0RyYXdpbmcgfSk7XG4gICAgICAgICAgICBoYW5kbGVTdG9wRHJhd2luZyhlKTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIG9uRG91YmxlQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFRvb2wgPT09ICdwZW4nKSB7XG4gICAgICAgICAgICAgIGFkZENvbnRyb2xQb2ludChlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGhhbmRsZUNhbnZhc0NsaWNrKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgICAgb25DbGljaz17aGFuZGxlQ2FudmFzQ2xpY2t9XG4gICAgICAgICAgb25Ub3VjaFN0YXJ0PXtoYW5kbGVTdGFydERyYXdpbmd9XG4gICAgICAgICAgb25Ub3VjaE1vdmU9e2RyYXd9XG4gICAgICAgICAgb25Ub3VjaEVuZD17aGFuZGxlU3RvcERyYXdpbmd9XG4gICAgICAgICAgb25LZXlEb3duPXtoYW5kbGVLZXlEb3dufVxuICAgICAgICAgIHRhYkluZGV4PXswfVxuICAgICAgICAgIGNsYXNzTmFtZT17YGJvcmRlciBib3JkZXItZ3JheS0zMDAgdy1mdWxsIHNtOmgtWzYwdmhdIGgtWzMwdmhdIG1pbi1oLVszMjBweF0gYmctd2hpdGUgcm91bmRlZC14bCBzaGFkb3ctc29mdCB0b3VjaC1ub25lICR7XG4gICAgICAgICAgICBjdXJyZW50VG9vbCA9PT0gJ3BlbicgPyAnY3Vyc29yLWNyb3NzaGFpcicgOiAnaG92ZXI6Y3Vyc29yLWNyb3NzaGFpcidcbiAgICAgICAgICB9YH1cbiAgICAgICAgICBhcmlhLWxhYmVsPVwiRHJhd2luZyBjYW52YXNcIlxuICAgICAgICAvPlxuICAgICAgICBcbiAgICAgICAgey8qIFBsYWNlaG9sZGVyIG92ZXJsYXkgKi99XG4gICAgICAgIHshaGFzRHJhd2luZyAmJiAhaXNEcmF3aW5nICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcG9pbnRlci1ldmVudHMtbm9uZVwiPlxuICAgICAgICAgICAgPFBlbmNpbExpbmUgY2xhc3NOYW1lPVwidy0xMiBoLTEyIHRleHQtZ3JheS0zMDAgbWItM1wiIC8+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNTAwIHRleHQteGwgZm9udC1tZWRpdW1cIj5EcmF3IGhlcmU8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENhbnZhczsgIl0sIm5hbWVzIjpbInVzZVJlZiIsInVzZUVmZmVjdCIsInVzZVN0YXRlIiwiZ2V0Q29vcmRpbmF0ZXMiLCJkcmF3QmV6aWVyQ3VydmUiLCJkcmF3QmV6aWVyR3VpZGVzIiwiY3JlYXRlQW5jaG9yUG9pbnQiLCJpc05lYXJIYW5kbGUiLCJ1cGRhdGVIYW5kbGUiLCJQZW5jaWxMaW5lIiwiVG9vbEJhciIsIkNhbnZhcyIsImNhbnZhc1JlZiIsImN1cnJlbnRUb29sIiwiaXNEcmF3aW5nIiwic3RhcnREcmF3aW5nIiwiZHJhdyIsInN0b3BEcmF3aW5nIiwiaGFuZGxlQ2FudmFzQ2xpY2siLCJoYW5kbGVQZW5DbGljayIsImhhbmRsZUdlbmVyYXRpb24iLCJ0ZW1wUG9pbnRzIiwic2V0VGVtcFBvaW50cyIsImhhbmRsZVVuZG8iLCJjbGVhckNhbnZhcyIsInNldEN1cnJlbnRUb29sIiwic2hvd0Jlemllckd1aWRlcyIsInNldFNob3dCZXppZXJHdWlkZXMiLCJhY3RpdmVQb2ludCIsInNldEFjdGl2ZVBvaW50IiwiYWN0aXZlSGFuZGxlIiwic2V0QWN0aXZlSGFuZGxlIiwic3ltbWV0cmljIiwic2V0U3ltbWV0cmljIiwibGFzdE1vdXNlUG9zIiwic2V0TGFzdE1vdXNlUG9zIiwieCIsInkiLCJoYXNEcmF3aW5nIiwic2V0SGFzRHJhd2luZyIsInN0cm9rZUNvdW50Iiwic2V0U3Ryb2tlQ291bnQiLCJwcmV2ZW50VG91Y2hEZWZhdWx0IiwiZSIsInByZXZlbnREZWZhdWx0IiwiY2FudmFzIiwiY3VycmVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXNzaXZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvbnNvbGUiLCJsb2ciLCJsZW5ndGgiLCJyZWRyYXdCZXppZXJHdWlkZXMiLCJjdHgiLCJnZXRDb250ZXh0IiwiaW1hZ2VEYXRhIiwiZ2V0SW1hZ2VEYXRhIiwid2lkdGgiLCJoZWlnaHQiLCJoYXNOb25XaGl0ZVBpeGVscyIsIkFycmF5IiwiZnJvbSIsImRhdGEiLCJzb21lIiwicGl4ZWwiLCJpbmRleCIsImhhbmRsZUtleURvd24iLCJrZXkiLCJjYW52YXNJbWFnZSIsIkltYWdlIiwic3JjIiwidG9EYXRhVVJMIiwib25sb2FkIiwiY2xlYXJSZWN0IiwiZHJhd0ltYWdlIiwiaGFuZGxlU3RvcERyYXdpbmciLCJldmVudFR5cGUiLCJ0eXBlIiwic2V0VGltZW91dCIsImVycm9yIiwiaXNQZW5Ub29sIiwiaXNQZW5jaWxUb29sIiwid2FzRHJhd2luZyIsImNoZWNrRm9yUG9pbnRPckhhbmRsZSIsImkiLCJwb2ludCIsImRpc3RhbmNlIiwiTWF0aCIsInNxcnQiLCJoYW5kbGVCZXppZXJNb3VzZU1vdmUiLCJkeCIsImR5IiwibmV3UG9pbnRzIiwiaGFuZGxlSW4iLCJoYW5kbGVPdXQiLCJoYW5kbGVQZW5Ub29sQ2xpY2siLCJuZXdQb2ludCIsInRvZ2dsZUJlemllckd1aWRlcyIsImZpbmFsaXplQmV6aWVyQ3VydmUiLCJhZGRDb250cm9sUG9pbnQiLCJjbG9zZXN0RGlzdGFuY2UiLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsImluc2VydEluZGV4IiwicDEiLCJwMiIsImxpbmVMZW5ndGgiLCJ0IiwiY2xvc2VzdFgiLCJjbG9zZXN0WSIsInByZXZQb2ludCIsIm5leHRQb2ludCIsInNwbGljZSIsImhhbmRsZVN0YXJ0RHJhd2luZyIsImRpdiIsImNsYXNzTmFtZSIsImJ1dHRvbiIsIm9uQ2xpY2siLCJzcGFuIiwicmVmIiwib25Nb3VzZURvd24iLCJvbk1vdXNlTW92ZSIsIm9uTW91c2VVcCIsIm9uTW91c2VMZWF2ZSIsIm9uRG91YmxlQ2xpY2siLCJvblRvdWNoU3RhcnQiLCJvblRvdWNoTW92ZSIsIm9uVG91Y2hFbmQiLCJvbktleURvd24iLCJ0YWJJbmRleCIsImFyaWEtbGFiZWwiLCJwIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/Canvas.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/CanvasContainer.js":
/*!***************************************!*\
  !*** ./components/CanvasContainer.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Canvas__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Canvas */ \"(pages-dir-node)/./components/Canvas.js\");\n/* harmony import */ var _DisplayCanvas__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DisplayCanvas */ \"(pages-dir-node)/./components/DisplayCanvas.js\");\n/* harmony import */ var _ToolBar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ToolBar */ \"(pages-dir-node)/./components/ToolBar.js\");\n/* harmony import */ var _StyleSelector__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./StyleSelector */ \"(pages-dir-node)/./components/StyleSelector.js\");\n/* harmony import */ var _ActionBar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ActionBar */ \"(pages-dir-node)/./components/ActionBar.js\");\n/* harmony import */ var _ErrorModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ErrorModal */ \"(pages-dir-node)/./components/ErrorModal.js\");\n/* harmony import */ var _TextInput__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./TextInput */ \"(pages-dir-node)/./components/TextInput.js\");\n/* harmony import */ var _Header__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Header */ \"(pages-dir-node)/./components/Header.js\");\n/* harmony import */ var _utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils/canvasUtils */ \"(pages-dir-node)/./components/utils/canvasUtils.js\");\n\n\n\n\n\n\n\n\n\n\n\n\nconst CanvasContainer = ()=>{\n    const canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const displayCanvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const backgroundImageRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [isDrawing, setIsDrawing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [penColor, setPenColor] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"#000000\");\n    const colorInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [prompt, setPrompt] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [generatedImage, setGeneratedImage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showErrorModal, setShowErrorModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [errorMessage, setErrorMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [customApiKey, setCustomApiKey] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [styleMode, setStyleMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('material');\n    const [strokeCount, setStrokeCount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const strokeTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [lastRequestTime, setLastRequestTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const MIN_REQUEST_INTERVAL = 2000; // Minimum 2 seconds between requests\n    const [currentTool, setCurrentTool] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('pencil'); // 'pencil', 'pen', 'eraser', 'text'\n    const [isTyping, setIsTyping] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [undoStack, setUndoStack] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [bezierPoints, setBezierPoints] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [textInput, setTextInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [textPosition, setTextPosition] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        x: 0,\n        y: 0\n    });\n    const textInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [isPenDrawing, setIsPenDrawing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [currentBezierPath, setCurrentBezierPath] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [tempPoints, setTempPoints] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [hasGeneratedContent, setHasGeneratedContent] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Load background image when generatedImage changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasContainer.useEffect\": ()=>{\n            if (generatedImage && canvasRef.current) {\n                // Use the window.Image constructor to avoid conflict with Next.js Image component\n                const img = new window.Image();\n                img.onload = ({\n                    \"CanvasContainer.useEffect\": ()=>{\n                        backgroundImageRef.current = img;\n                        (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.drawImageToCanvas)(canvasRef.current, backgroundImageRef.current);\n                    }\n                })[\"CanvasContainer.useEffect\"];\n                img.src = generatedImage;\n            }\n        }\n    }[\"CanvasContainer.useEffect\"], [\n        generatedImage\n    ]);\n    // Initialize canvas with white background when component mounts\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasContainer.useEffect\": ()=>{\n            if (canvasRef.current) {\n                (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.initializeCanvas)(canvasRef.current);\n            }\n        }\n    }[\"CanvasContainer.useEffect\"], []);\n    const startDrawing = (e)=>{\n        const { x, y } = (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.getCoordinates)(e, canvasRef.current);\n        if (e.type === 'touchstart') {\n            e.preventDefault();\n        }\n        console.log('startDrawing called', {\n            currentTool,\n            x,\n            y\n        });\n        const ctx = canvasRef.current.getContext(\"2d\");\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n        setIsDrawing(true);\n        setStrokeCount((prev)=>prev + 1);\n        // Save canvas state before drawing\n        saveCanvasState();\n    };\n    const draw = (e)=>{\n        if (!isDrawing) return;\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d');\n        const { x, y } = (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.getCoordinates)(e, canvas);\n        // Occasionally log drawing activity\n        if (Math.random() < 0.05) {\n            console.log('draw called', {\n                currentTool,\n                isDrawing,\n                x,\n                y\n            });\n        }\n        ctx.lineWidth = 5;\n        ctx.lineCap = 'round';\n        if (currentTool === 'eraser') {\n            ctx.strokeStyle = '#FFFFFF';\n            ctx.lineWidth = 20;\n        } else {\n            ctx.strokeStyle = '#000000';\n        }\n        if (currentTool === 'pen') {\n            // Show preview line while moving\n            if (tempPoints.length > 0) {\n                const lastPoint = tempPoints[tempPoints.length - 1];\n                ctx.beginPath();\n                ctx.moveTo(lastPoint.x, lastPoint.y);\n                ctx.lineTo(x, y);\n                ctx.stroke();\n            }\n        } else {\n            ctx.lineTo(x, y);\n            ctx.stroke();\n        }\n    };\n    const stopDrawing = async (e)=>{\n        console.log('stopDrawing called in CanvasContainer', {\n            isDrawing,\n            currentTool,\n            hasEvent: !!e,\n            eventType: e ? e.type : 'none'\n        });\n        if (!isDrawing) return;\n        setIsDrawing(false);\n        // Remove the timeout-based generation\n        if (strokeTimeoutRef.current) {\n            clearTimeout(strokeTimeoutRef.current);\n            strokeTimeoutRef.current = null;\n        }\n        // The Canvas component will handle generation for pen and pencil tools directly\n        // This function now primarily handles stroke counting for other tools\n        // Only generate on mouse/touch up events when not using the pen or pencil tool\n        // (since those are handled by the Canvas component)\n        if (e && (e.type === 'mouseup' || e.type === 'touchend') && currentTool !== 'pen' && currentTool !== 'pencil') {\n            console.log('stopDrawing: detected mouseup/touchend event', {\n                strokeCount\n            });\n            // Check if we have enough strokes to generate (increased to 10 from 3)\n            if (strokeCount >= 10) {\n                console.log('stopDrawing: calling handleGeneration due to stroke count');\n                await handleGeneration();\n                setStrokeCount(0);\n            }\n        }\n    };\n    const clearCanvas = ()=>{\n        const canvas = canvasRef.current;\n        if (!canvas) return;\n        (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.initializeCanvas)(canvas);\n        setGeneratedImage(null);\n        backgroundImageRef.current = null;\n        // Also clear the display canvas and reset generated content flag\n        if (displayCanvasRef.current) {\n            const displayCtx = displayCanvasRef.current.getContext('2d');\n            displayCtx.clearRect(0, 0, displayCanvasRef.current.width, displayCanvasRef.current.height);\n            displayCtx.fillStyle = '#FFFFFF';\n            displayCtx.fillRect(0, 0, displayCanvasRef.current.width, displayCanvasRef.current.height);\n            setHasGeneratedContent(false);\n        }\n        // Save empty canvas state\n        saveCanvasState();\n    };\n    const handleGeneration = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasContainer.useCallback[handleGeneration]\": async ()=>{\n            console.log('handleGeneration called');\n            const now = Date.now();\n            if (now - lastRequestTime < MIN_REQUEST_INTERVAL) {\n                console.log(\"Request throttled - too soon after last request\");\n                return;\n            }\n            setLastRequestTime(now);\n            if (!canvasRef.current) return;\n            console.log('Starting generation process');\n            setIsLoading(true);\n            try {\n                const canvas = canvasRef.current;\n                const tempCanvas = document.createElement('canvas');\n                tempCanvas.width = canvas.width;\n                tempCanvas.height = canvas.height;\n                const tempCtx = tempCanvas.getContext('2d');\n                tempCtx.fillStyle = '#FFFFFF';\n                tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);\n                tempCtx.drawImage(canvas, 0, 0);\n                const drawingData = tempCanvas.toDataURL(\"image/png\").split(\",\")[1];\n                const requestPayload = {\n                    prompt: (0,_StyleSelector__WEBPACK_IMPORTED_MODULE_5__.getPromptForStyle)(styleMode),\n                    drawingData,\n                    customApiKey\n                };\n                console.log('Making API request with style:', styleMode);\n                const response = await fetch(\"/api/generate\", {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(requestPayload)\n                });\n                console.log('API response received, status:', response.status);\n                const data = await response.json();\n                if (data.success && data.imageData) {\n                    console.log('Image generated successfully');\n                    const imageUrl = `data:image/png;base64,${data.imageData}`;\n                    // Draw the generated image to the display canvas\n                    const displayCanvas = displayCanvasRef.current;\n                    if (!displayCanvas) {\n                        console.error('Display canvas ref is null');\n                        return;\n                    }\n                    const displayCtx = displayCanvas.getContext('2d');\n                    // Clear the display canvas first\n                    displayCtx.clearRect(0, 0, displayCanvas.width, displayCanvas.height);\n                    displayCtx.fillStyle = '#FFFFFF';\n                    displayCtx.fillRect(0, 0, displayCanvas.width, displayCanvas.height);\n                    // Create and load the new image\n                    const img = new Image();\n                    // Set up the onload handler before setting the src\n                    img.onload = ({\n                        \"CanvasContainer.useCallback[handleGeneration]\": ()=>{\n                            console.log('Generated image loaded, drawing to display canvas');\n                            displayCtx.clearRect(0, 0, displayCanvas.width, displayCanvas.height);\n                            displayCtx.drawImage(img, 0, 0, displayCanvas.width, displayCanvas.height);\n                            console.log('Image drawn to display canvas');\n                            // Update our state to indicate we have generated content\n                            setHasGeneratedContent(true);\n                        }\n                    })[\"CanvasContainer.useCallback[handleGeneration]\"];\n                    // Set the src to trigger loading\n                    img.src = imageUrl;\n                } else {\n                    console.error(\"Failed to generate image:\", data.error);\n                    // When generation fails, ensure display canvas is cleared\n                    if (displayCanvasRef.current) {\n                        const displayCtx = displayCanvasRef.current.getContext('2d');\n                        displayCtx.clearRect(0, 0, displayCanvasRef.current.width, displayCanvasRef.current.height);\n                        displayCtx.fillStyle = '#FFFFFF';\n                        displayCtx.fillRect(0, 0, displayCanvasRef.current.width, displayCanvasRef.current.height);\n                    }\n                    // Make sure we mark that we don't have generated content\n                    setHasGeneratedContent(false);\n                    if (data.error && (data.error.includes(\"Resource has been exhausted\") || data.error.includes(\"quota\") || response.status === 429 || response.status === 500)) {\n                        setErrorMessage(data.error);\n                        setShowErrorModal(true);\n                    }\n                }\n            } catch (error) {\n                console.error(\"Error generating image:\", error);\n                setErrorMessage(error.message || \"An unexpected error occurred.\");\n                setShowErrorModal(true);\n                // When generation errors, ensure display canvas is cleared\n                if (displayCanvasRef.current) {\n                    const displayCtx = displayCanvasRef.current.getContext('2d');\n                    displayCtx.clearRect(0, 0, displayCanvasRef.current.width, displayCanvasRef.current.height);\n                    displayCtx.fillStyle = '#FFFFFF';\n                    displayCtx.fillRect(0, 0, displayCanvasRef.current.width, displayCanvasRef.current.height);\n                }\n                // Make sure we mark that we don't have generated content\n                setHasGeneratedContent(false);\n            } finally{\n                setIsLoading(false);\n                console.log('Generation process completed');\n            }\n        }\n    }[\"CanvasContainer.useCallback[handleGeneration]\"], [\n        lastRequestTime,\n        styleMode,\n        customApiKey\n    ]);\n    // Close the error modal\n    const closeErrorModal = ()=>{\n        setShowErrorModal(false);\n    };\n    // Handle the custom API key submission\n    const handleApiKeySubmit = (e)=>{\n        e.preventDefault();\n        setShowErrorModal(false);\n    // Will use the customApiKey state in the next API call\n    };\n    // Add this function to handle undo\n    const handleUndo = ()=>{\n        if (undoStack.length > 0) {\n            const canvas = canvasRef.current;\n            const ctx = canvas.getContext('2d');\n            const previousState = undoStack[undoStack.length - 2]; // Get second to last state\n            if (previousState) {\n                const img = new Image();\n                img.onload = ()=>{\n                    ctx.fillStyle = '#FFFFFF';\n                    ctx.fillRect(0, 0, canvas.width, canvas.height);\n                    ctx.drawImage(img, 0, 0);\n                };\n                img.src = previousState;\n            } else {\n                // If no previous state, clear to white\n                ctx.fillStyle = '#FFFFFF';\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n            setUndoStack((prev)=>prev.slice(0, -1));\n        }\n    };\n    // Add this function to save canvas state\n    const saveCanvasState = ()=>{\n        const canvas = canvasRef.current;\n        if (!canvas) return;\n        const dataURL = canvas.toDataURL();\n        setUndoStack((prev)=>[\n                ...prev,\n                dataURL\n            ]);\n    };\n    // Add this function to handle text input\n    const handleTextInput = (e)=>{\n        if (e.key === 'Enter') {\n            const canvas = canvasRef.current;\n            const ctx = canvas.getContext('2d');\n            ctx.font = '24px Arial';\n            ctx.fillStyle = '#000000';\n            ctx.fillText(textInput, textPosition.x, textPosition.y);\n            setTextInput('');\n            setIsTyping(false);\n            saveCanvasState();\n        }\n    };\n    // Modify the canvas click handler to handle text placement\n    const handleCanvasClick = (e)=>{\n        if (currentTool === 'text') {\n            const { x, y } = (0,_utils_canvasUtils__WEBPACK_IMPORTED_MODULE_10__.getCoordinates)(e, canvasRef.current);\n            setTextPosition({\n                x,\n                y\n            });\n            setIsTyping(true);\n            if (textInputRef.current) {\n                textInputRef.current.focus();\n            }\n        }\n    };\n    // Handle pen click for bezier curve tool\n    const handlePenClick = (e)=>{\n        if (currentTool !== 'pen') return;\n        // Note: Actual point creation is now handled in the Canvas component\n        // This function is primarily used as a callback to inform the CanvasContainer\n        // that a pen action happened\n        console.log('handlePenClick called in CanvasContainer');\n        // Set isDrawing flag to true when using pen tool\n        // This ensures handleStopDrawing knows we're in drawing mode with the pen\n        setIsDrawing(true);\n        // Save canvas state when adding new points\n        saveCanvasState();\n    };\n    // Add this new function near your other utility functions\n    const handleSaveImage = ()=>{\n        // For the generated image\n        if (displayCanvasRef.current) {\n            const link = document.createElement('a');\n            link.download = 'chrome-study.png';\n            link.href = displayCanvasRef.current.toDataURL('image/png');\n            link.click();\n        }\n    };\n    // Add this function to handle regeneration\n    const handleRegenerate = async ()=>{\n        if (canvasRef.current) {\n            // Temporarily reset hasGeneratedContent so placeholder shows during loading\n            setHasGeneratedContent(false);\n            await handleGeneration();\n        }\n    };\n    // Add useEffect to watch for styleMode changes and regenerate\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasContainer.useEffect\": ()=>{\n            // Only trigger if we have something drawn (check if canvas is not empty)\n            const checkCanvasAndGenerate = {\n                \"CanvasContainer.useEffect.checkCanvasAndGenerate\": async ()=>{\n                    if (!canvasRef.current) return;\n                    const canvas = canvasRef.current;\n                    const ctx = canvas.getContext('2d');\n                    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n                    // Check if canvas has any non-white pixels\n                    const hasDrawing = Array.from(imageData.data).some({\n                        \"CanvasContainer.useEffect.checkCanvasAndGenerate.hasDrawing\": (pixel, index)=>{\n                            // Check only RGB values (skip alpha)\n                            return index % 4 !== 3 && pixel !== 255;\n                        }\n                    }[\"CanvasContainer.useEffect.checkCanvasAndGenerate.hasDrawing\"]);\n                    if (hasDrawing) {\n                        await handleGeneration();\n                    }\n                }\n            }[\"CanvasContainer.useEffect.checkCanvasAndGenerate\"];\n            // Skip on first render\n            if (styleMode) {\n                checkCanvasAndGenerate();\n            }\n        }\n    }[\"CanvasContainer.useEffect\"], [\n        styleMode,\n        handleGeneration\n    ]); // Added handleGeneration to dependency array\n    // Cleanup function - keep this to prevent memory leaks\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasContainer.useEffect\": ()=>{\n            return ({\n                \"CanvasContainer.useEffect\": ()=>{\n                    if (strokeTimeoutRef.current) {\n                        clearTimeout(strokeTimeoutRef.current);\n                        strokeTimeoutRef.current = null;\n                    }\n                }\n            })[\"CanvasContainer.useEffect\"];\n        }\n    }[\"CanvasContainer.useEffect\"], []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex min-h-screen flex-col items-center justify-start bg-gray-50 p-6 md:p-8\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative w-full max-w-7xl\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center justify-between\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Header__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {}, void 0, false, {\n                                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                                lineNumber: 458,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                            lineNumber: 457,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Canvas__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                    canvasRef: canvasRef,\n                                    currentTool: currentTool,\n                                    isDrawing: isDrawing,\n                                    startDrawing: startDrawing,\n                                    draw: draw,\n                                    stopDrawing: stopDrawing,\n                                    handleCanvasClick: handleCanvasClick,\n                                    handlePenClick: handlePenClick,\n                                    handleGeneration: handleGeneration,\n                                    tempPoints: tempPoints,\n                                    setTempPoints: setTempPoints,\n                                    handleUndo: handleUndo,\n                                    clearCanvas: clearCanvas,\n                                    setCurrentTool: setCurrentTool\n                                }, void 0, false, {\n                                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                                    lineNumber: 462,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_DisplayCanvas__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                    displayCanvasRef: displayCanvasRef,\n                                    isLoading: isLoading,\n                                    handleSaveImage: handleSaveImage,\n                                    handleRegenerate: handleRegenerate,\n                                    hasGeneratedContent: hasGeneratedContent\n                                }, void 0, false, {\n                                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                                    lineNumber: 479,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                            lineNumber: 461,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-full mt-4 mb-6\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_StyleSelector__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                styleMode: styleMode,\n                                setStyleMode: setStyleMode,\n                                handleGenerate: handleGeneration\n                            }, void 0, false, {\n                                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                                lineNumber: 489,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                            lineNumber: 488,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                    lineNumber: 456,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                lineNumber: 455,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ErrorModal__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                showErrorModal: showErrorModal,\n                closeErrorModal: closeErrorModal,\n                customApiKey: customApiKey,\n                setCustomApiKey: setCustomApiKey,\n                handleApiKeySubmit: handleApiKeySubmit\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                lineNumber: 498,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_TextInput__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                isTyping: isTyping,\n                textInputRef: textInputRef,\n                textInput: textInput,\n                setTextInput: setTextInput,\n                handleTextInput: handleTextInput,\n                textPosition: textPosition\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n                lineNumber: 506,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/CanvasContainer.js\",\n        lineNumber: 454,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CanvasContainer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvQ2FudmFzQ29udGFpbmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFpRTtBQUNuQztBQUNjO0FBQ1o7QUFDWTtBQUNRO0FBQ2hCO0FBQ0U7QUFDRjtBQUNOO0FBQzZFO0FBRTNHLE1BQU1pQixrQkFBa0I7SUFDdEIsTUFBTUMsWUFBWWpCLDZDQUFNQSxDQUFDO0lBQ3pCLE1BQU1rQixtQkFBbUJsQiw2Q0FBTUEsQ0FBQztJQUNoQyxNQUFNbUIscUJBQXFCbkIsNkNBQU1BLENBQUM7SUFDbEMsTUFBTSxDQUFDb0IsV0FBV0MsYUFBYSxHQUFHdEIsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDdUIsVUFBVUMsWUFBWSxHQUFHeEIsK0NBQVFBLENBQUM7SUFDekMsTUFBTXlCLGdCQUFnQnhCLDZDQUFNQSxDQUFDO0lBQzdCLE1BQU0sQ0FBQ3lCLFFBQVFDLFVBQVUsR0FBRzNCLCtDQUFRQSxDQUFDO0lBQ3JDLE1BQU0sQ0FBQzRCLGdCQUFnQkMsa0JBQWtCLEdBQUc3QiwrQ0FBUUEsQ0FBQztJQUNyRCxNQUFNLENBQUM4QixXQUFXQyxhQUFhLEdBQUcvQiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUNnQyxnQkFBZ0JDLGtCQUFrQixHQUFHakMsK0NBQVFBLENBQUM7SUFDckQsTUFBTSxDQUFDa0MsY0FBY0MsZ0JBQWdCLEdBQUduQywrQ0FBUUEsQ0FBQztJQUNqRCxNQUFNLENBQUNvQyxjQUFjQyxnQkFBZ0IsR0FBR3JDLCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQ3NDLFdBQVdDLGFBQWEsR0FBR3ZDLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQ3dDLGFBQWFDLGVBQWUsR0FBR3pDLCtDQUFRQSxDQUFDO0lBQy9DLE1BQU0wQyxtQkFBbUJ6Qyw2Q0FBTUEsQ0FBQztJQUNoQyxNQUFNLENBQUMwQyxpQkFBaUJDLG1CQUFtQixHQUFHNUMsK0NBQVFBLENBQUM7SUFDdkQsTUFBTTZDLHVCQUF1QixNQUFNLHFDQUFxQztJQUN4RSxNQUFNLENBQUNDLGFBQWFDLGVBQWUsR0FBRy9DLCtDQUFRQSxDQUFDLFdBQVcsb0NBQW9DO0lBQzlGLE1BQU0sQ0FBQ2dELFVBQVVDLFlBQVksR0FBR2pELCtDQUFRQSxDQUFDO0lBQ3pDLE1BQU0sQ0FBQ2tELFdBQVdDLGFBQWEsR0FBR25ELCtDQUFRQSxDQUFDLEVBQUU7SUFDN0MsTUFBTSxDQUFDb0QsY0FBY0MsZ0JBQWdCLEdBQUdyRCwrQ0FBUUEsQ0FBQyxFQUFFO0lBQ25ELE1BQU0sQ0FBQ3NELFdBQVdDLGFBQWEsR0FBR3ZELCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQ3dELGNBQWNDLGdCQUFnQixHQUFHekQsK0NBQVFBLENBQUM7UUFBRTBELEdBQUc7UUFBR0MsR0FBRztJQUFFO0lBQzlELE1BQU1DLGVBQWUzRCw2Q0FBTUEsQ0FBQztJQUM1QixNQUFNLENBQUM0RCxjQUFjQyxnQkFBZ0IsR0FBRzlELCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQytELG1CQUFtQkMscUJBQXFCLEdBQUdoRSwrQ0FBUUEsQ0FBQyxFQUFFO0lBQzdELE1BQU0sQ0FBQ2lFLFlBQVlDLGNBQWMsR0FBR2xFLCtDQUFRQSxDQUFDLEVBQUU7SUFDL0MsTUFBTSxDQUFDbUUscUJBQXFCQyx1QkFBdUIsR0FBR3BFLCtDQUFRQSxDQUFDO0lBRS9ELG9EQUFvRDtJQUNwREUsZ0RBQVNBO3FDQUFDO1lBQ1IsSUFBSTBCLGtCQUFrQlYsVUFBVW1ELE9BQU8sRUFBRTtnQkFDdkMsa0ZBQWtGO2dCQUNsRixNQUFNQyxNQUFNLElBQUlDLE9BQU9DLEtBQUs7Z0JBQzVCRixJQUFJRyxNQUFNO2lEQUFHO3dCQUNYckQsbUJBQW1CaUQsT0FBTyxHQUFHQzt3QkFDN0J2RCxzRUFBaUJBLENBQUNHLFVBQVVtRCxPQUFPLEVBQUVqRCxtQkFBbUJpRCxPQUFPO29CQUNqRTs7Z0JBQ0FDLElBQUlJLEdBQUcsR0FBRzlDO1lBQ1o7UUFDRjtvQ0FBRztRQUFDQTtLQUFlO0lBRW5CLGdFQUFnRTtJQUNoRTFCLGdEQUFTQTtxQ0FBQztZQUNSLElBQUlnQixVQUFVbUQsT0FBTyxFQUFFO2dCQUNyQnZELHFFQUFnQkEsQ0FBQ0ksVUFBVW1ELE9BQU87WUFDcEM7UUFDRjtvQ0FBRyxFQUFFO0lBRUwsTUFBTU0sZUFBZSxDQUFDQztRQUNwQixNQUFNLEVBQUVsQixDQUFDLEVBQUVDLENBQUMsRUFBRSxHQUFHOUMsbUVBQWNBLENBQUMrRCxHQUFHMUQsVUFBVW1ELE9BQU87UUFFcEQsSUFBSU8sRUFBRUMsSUFBSSxLQUFLLGNBQWM7WUFDM0JELEVBQUVFLGNBQWM7UUFDbEI7UUFFQUMsUUFBUUMsR0FBRyxDQUFDLHVCQUF1QjtZQUFFbEM7WUFBYVk7WUFBR0M7UUFBRTtRQUV2RCxNQUFNc0IsTUFBTS9ELFVBQVVtRCxPQUFPLENBQUNhLFVBQVUsQ0FBQztRQUN6Q0QsSUFBSUUsU0FBUztRQUNiRixJQUFJRyxNQUFNLENBQUMxQixHQUFHQztRQUNkckMsYUFBYTtRQUNibUIsZUFBZTRDLENBQUFBLE9BQVFBLE9BQU87UUFFOUIsbUNBQW1DO1FBQ25DQztJQUNGO0lBRUEsTUFBTUMsT0FBTyxDQUFDWDtRQUNaLElBQUksQ0FBQ3ZELFdBQVc7UUFFaEIsTUFBTW1FLFNBQVN0RSxVQUFVbUQsT0FBTztRQUNoQyxNQUFNWSxNQUFNTyxPQUFPTixVQUFVLENBQUM7UUFDOUIsTUFBTSxFQUFFeEIsQ0FBQyxFQUFFQyxDQUFDLEVBQUUsR0FBRzlDLG1FQUFjQSxDQUFDK0QsR0FBR1k7UUFFbkMsb0NBQW9DO1FBQ3BDLElBQUlDLEtBQUtDLE1BQU0sS0FBSyxNQUFNO1lBQ3hCWCxRQUFRQyxHQUFHLENBQUMsZUFBZTtnQkFBRWxDO2dCQUFhekI7Z0JBQVdxQztnQkFBR0M7WUFBRTtRQUM1RDtRQUVBc0IsSUFBSVUsU0FBUyxHQUFHO1FBQ2hCVixJQUFJVyxPQUFPLEdBQUc7UUFFZCxJQUFJOUMsZ0JBQWdCLFVBQVU7WUFDNUJtQyxJQUFJWSxXQUFXLEdBQUc7WUFDbEJaLElBQUlVLFNBQVMsR0FBRztRQUNsQixPQUFPO1lBQ0xWLElBQUlZLFdBQVcsR0FBRztRQUNwQjtRQUVBLElBQUkvQyxnQkFBZ0IsT0FBTztZQUN6QixpQ0FBaUM7WUFDakMsSUFBSW1CLFdBQVc2QixNQUFNLEdBQUcsR0FBRztnQkFDekIsTUFBTUMsWUFBWTlCLFVBQVUsQ0FBQ0EsV0FBVzZCLE1BQU0sR0FBRyxFQUFFO2dCQUNuRGIsSUFBSUUsU0FBUztnQkFDYkYsSUFBSUcsTUFBTSxDQUFDVyxVQUFVckMsQ0FBQyxFQUFFcUMsVUFBVXBDLENBQUM7Z0JBQ25Dc0IsSUFBSWUsTUFBTSxDQUFDdEMsR0FBR0M7Z0JBQ2RzQixJQUFJZ0IsTUFBTTtZQUNaO1FBQ0YsT0FBTztZQUNMaEIsSUFBSWUsTUFBTSxDQUFDdEMsR0FBR0M7WUFDZHNCLElBQUlnQixNQUFNO1FBQ1o7SUFDRjtJQUVBLE1BQU1DLGNBQWMsT0FBT3RCO1FBQ3pCRyxRQUFRQyxHQUFHLENBQUMseUNBQXlDO1lBQ25EM0Q7WUFDQXlCO1lBQ0FxRCxVQUFVLENBQUMsQ0FBQ3ZCO1lBQ1p3QixXQUFXeEIsSUFBSUEsRUFBRUMsSUFBSSxHQUFHO1FBQzFCO1FBRUEsSUFBSSxDQUFDeEQsV0FBVztRQUNoQkMsYUFBYTtRQUViLHNDQUFzQztRQUN0QyxJQUFJb0IsaUJBQWlCMkIsT0FBTyxFQUFFO1lBQzVCZ0MsYUFBYTNELGlCQUFpQjJCLE9BQU87WUFDckMzQixpQkFBaUIyQixPQUFPLEdBQUc7UUFDN0I7UUFFQSxnRkFBZ0Y7UUFDaEYsc0VBQXNFO1FBRXRFLCtFQUErRTtRQUMvRSxvREFBb0Q7UUFDcEQsSUFBSU8sS0FBTUEsQ0FBQUEsRUFBRUMsSUFBSSxLQUFLLGFBQWFELEVBQUVDLElBQUksS0FBSyxVQUFTLEtBQ2xEL0IsZ0JBQWdCLFNBQVNBLGdCQUFnQixVQUFVO1lBQ3JEaUMsUUFBUUMsR0FBRyxDQUFDLGdEQUFnRDtnQkFBRXhDO1lBQVk7WUFDMUUsdUVBQXVFO1lBQ3ZFLElBQUlBLGVBQWUsSUFBSTtnQkFDckJ1QyxRQUFRQyxHQUFHLENBQUM7Z0JBQ1osTUFBTXNCO2dCQUNON0QsZUFBZTtZQUNqQjtRQUNGO0lBQ0Y7SUFFQSxNQUFNOEQsY0FBYztRQUNsQixNQUFNZixTQUFTdEUsVUFBVW1ELE9BQU87UUFDaEMsSUFBSSxDQUFDbUIsUUFBUTtRQUViMUUscUVBQWdCQSxDQUFDMEU7UUFFakIzRCxrQkFBa0I7UUFDbEJULG1CQUFtQmlELE9BQU8sR0FBRztRQUU3QixpRUFBaUU7UUFDakUsSUFBSWxELGlCQUFpQmtELE9BQU8sRUFBRTtZQUM1QixNQUFNbUMsYUFBYXJGLGlCQUFpQmtELE9BQU8sQ0FBQ2EsVUFBVSxDQUFDO1lBQ3ZEc0IsV0FBV0MsU0FBUyxDQUFDLEdBQUcsR0FBR3RGLGlCQUFpQmtELE9BQU8sQ0FBQ3FDLEtBQUssRUFBRXZGLGlCQUFpQmtELE9BQU8sQ0FBQ3NDLE1BQU07WUFDMUZILFdBQVdJLFNBQVMsR0FBRztZQUN2QkosV0FBV0ssUUFBUSxDQUFDLEdBQUcsR0FBRzFGLGlCQUFpQmtELE9BQU8sQ0FBQ3FDLEtBQUssRUFBRXZGLGlCQUFpQmtELE9BQU8sQ0FBQ3NDLE1BQU07WUFDekZ2Qyx1QkFBdUI7UUFDekI7UUFFQSwwQkFBMEI7UUFDMUJrQjtJQUNGO0lBRUEsTUFBTWdCLG1CQUFtQm5HLGtEQUFXQTt5REFBQztZQUNuQzRFLFFBQVFDLEdBQUcsQ0FBQztZQUVaLE1BQU04QixNQUFNQyxLQUFLRCxHQUFHO1lBQ3BCLElBQUlBLE1BQU1uRSxrQkFBa0JFLHNCQUFzQjtnQkFDaERrQyxRQUFRQyxHQUFHLENBQUM7Z0JBQ1o7WUFDRjtZQUVBcEMsbUJBQW1Ca0U7WUFDbkIsSUFBSSxDQUFDNUYsVUFBVW1ELE9BQU8sRUFBRTtZQUV4QlUsUUFBUUMsR0FBRyxDQUFDO1lBQ1pqRCxhQUFhO1lBRWIsSUFBSTtnQkFDRixNQUFNeUQsU0FBU3RFLFVBQVVtRCxPQUFPO2dCQUNoQyxNQUFNMkMsYUFBYUMsU0FBU0MsYUFBYSxDQUFDO2dCQUMxQ0YsV0FBV04sS0FBSyxHQUFHbEIsT0FBT2tCLEtBQUs7Z0JBQy9CTSxXQUFXTCxNQUFNLEdBQUduQixPQUFPbUIsTUFBTTtnQkFDakMsTUFBTVEsVUFBVUgsV0FBVzlCLFVBQVUsQ0FBQztnQkFFdENpQyxRQUFRUCxTQUFTLEdBQUc7Z0JBQ3BCTyxRQUFRTixRQUFRLENBQUMsR0FBRyxHQUFHRyxXQUFXTixLQUFLLEVBQUVNLFdBQVdMLE1BQU07Z0JBQzFEUSxRQUFRQyxTQUFTLENBQUM1QixRQUFRLEdBQUc7Z0JBRTdCLE1BQU02QixjQUFjTCxXQUFXTSxTQUFTLENBQUMsYUFBYUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUVuRSxNQUFNQyxpQkFBaUI7b0JBQ3JCOUYsUUFBUWxCLGlFQUFpQkEsQ0FBQzhCO29CQUMxQitFO29CQUNBakY7Z0JBQ0Y7Z0JBRUEyQyxRQUFRQyxHQUFHLENBQUMsa0NBQWtDMUM7Z0JBRTlDLE1BQU1tRixXQUFXLE1BQU1DLE1BQU0saUJBQWlCO29CQUM1Q0MsUUFBUTtvQkFDUkMsU0FBUzt3QkFDUCxnQkFBZ0I7b0JBQ2xCO29CQUNBQyxNQUFNQyxLQUFLQyxTQUFTLENBQUNQO2dCQUN2QjtnQkFFQXpDLFFBQVFDLEdBQUcsQ0FBQyxrQ0FBa0N5QyxTQUFTTyxNQUFNO2dCQUU3RCxNQUFNQyxPQUFPLE1BQU1SLFNBQVNTLElBQUk7Z0JBRWhDLElBQUlELEtBQUtFLE9BQU8sSUFBSUYsS0FBS0csU0FBUyxFQUFFO29CQUNsQ3JELFFBQVFDLEdBQUcsQ0FBQztvQkFDWixNQUFNcUQsV0FBVyxDQUFDLHNCQUFzQixFQUFFSixLQUFLRyxTQUFTLEVBQUU7b0JBRTFELGlEQUFpRDtvQkFDakQsTUFBTUUsZ0JBQWdCbkgsaUJBQWlCa0QsT0FBTztvQkFDOUMsSUFBSSxDQUFDaUUsZUFBZTt3QkFDbEJ2RCxRQUFRd0QsS0FBSyxDQUFDO3dCQUNkO29CQUNGO29CQUVBLE1BQU0vQixhQUFhOEIsY0FBY3BELFVBQVUsQ0FBQztvQkFFNUMsaUNBQWlDO29CQUNqQ3NCLFdBQVdDLFNBQVMsQ0FBQyxHQUFHLEdBQUc2QixjQUFjNUIsS0FBSyxFQUFFNEIsY0FBYzNCLE1BQU07b0JBQ3BFSCxXQUFXSSxTQUFTLEdBQUc7b0JBQ3ZCSixXQUFXSyxRQUFRLENBQUMsR0FBRyxHQUFHeUIsY0FBYzVCLEtBQUssRUFBRTRCLGNBQWMzQixNQUFNO29CQUVuRSxnQ0FBZ0M7b0JBQ2hDLE1BQU1yQyxNQUFNLElBQUlFO29CQUVoQixtREFBbUQ7b0JBQ25ERixJQUFJRyxNQUFNO3lFQUFHOzRCQUNYTSxRQUFRQyxHQUFHLENBQUM7NEJBQ1p3QixXQUFXQyxTQUFTLENBQUMsR0FBRyxHQUFHNkIsY0FBYzVCLEtBQUssRUFBRTRCLGNBQWMzQixNQUFNOzRCQUNwRUgsV0FBV1ksU0FBUyxDQUFDOUMsS0FBSyxHQUFHLEdBQUdnRSxjQUFjNUIsS0FBSyxFQUFFNEIsY0FBYzNCLE1BQU07NEJBQ3pFNUIsUUFBUUMsR0FBRyxDQUFDOzRCQUVaLHlEQUF5RDs0QkFDekRaLHVCQUF1Qjt3QkFDekI7O29CQUVBLGlDQUFpQztvQkFDakNFLElBQUlJLEdBQUcsR0FBRzJEO2dCQUNaLE9BQU87b0JBQ0x0RCxRQUFRd0QsS0FBSyxDQUFDLDZCQUE2Qk4sS0FBS00sS0FBSztvQkFFckQsMERBQTBEO29CQUMxRCxJQUFJcEgsaUJBQWlCa0QsT0FBTyxFQUFFO3dCQUM1QixNQUFNbUMsYUFBYXJGLGlCQUFpQmtELE9BQU8sQ0FBQ2EsVUFBVSxDQUFDO3dCQUN2RHNCLFdBQVdDLFNBQVMsQ0FBQyxHQUFHLEdBQUd0RixpQkFBaUJrRCxPQUFPLENBQUNxQyxLQUFLLEVBQUV2RixpQkFBaUJrRCxPQUFPLENBQUNzQyxNQUFNO3dCQUMxRkgsV0FBV0ksU0FBUyxHQUFHO3dCQUN2QkosV0FBV0ssUUFBUSxDQUFDLEdBQUcsR0FBRzFGLGlCQUFpQmtELE9BQU8sQ0FBQ3FDLEtBQUssRUFBRXZGLGlCQUFpQmtELE9BQU8sQ0FBQ3NDLE1BQU07b0JBQzNGO29CQUVBLHlEQUF5RDtvQkFDekR2Qyx1QkFBdUI7b0JBRXZCLElBQUk2RCxLQUFLTSxLQUFLLElBQ1pOLENBQUFBLEtBQUtNLEtBQUssQ0FBQ0MsUUFBUSxDQUFDLGtDQUNwQlAsS0FBS00sS0FBSyxDQUFDQyxRQUFRLENBQUMsWUFDcEJmLFNBQVNPLE1BQU0sS0FBSyxPQUNwQlAsU0FBU08sTUFBTSxLQUFLLEdBQUUsR0FDckI7d0JBQ0Q3RixnQkFBZ0I4RixLQUFLTSxLQUFLO3dCQUMxQnRHLGtCQUFrQjtvQkFDcEI7Z0JBQ0Y7WUFDRixFQUFFLE9BQU9zRyxPQUFPO2dCQUNkeEQsUUFBUXdELEtBQUssQ0FBQywyQkFBMkJBO2dCQUN6Q3BHLGdCQUFnQm9HLE1BQU1FLE9BQU8sSUFBSTtnQkFDakN4RyxrQkFBa0I7Z0JBRWxCLDJEQUEyRDtnQkFDM0QsSUFBSWQsaUJBQWlCa0QsT0FBTyxFQUFFO29CQUM1QixNQUFNbUMsYUFBYXJGLGlCQUFpQmtELE9BQU8sQ0FBQ2EsVUFBVSxDQUFDO29CQUN2RHNCLFdBQVdDLFNBQVMsQ0FBQyxHQUFHLEdBQUd0RixpQkFBaUJrRCxPQUFPLENBQUNxQyxLQUFLLEVBQUV2RixpQkFBaUJrRCxPQUFPLENBQUNzQyxNQUFNO29CQUMxRkgsV0FBV0ksU0FBUyxHQUFHO29CQUN2QkosV0FBV0ssUUFBUSxDQUFDLEdBQUcsR0FBRzFGLGlCQUFpQmtELE9BQU8sQ0FBQ3FDLEtBQUssRUFBRXZGLGlCQUFpQmtELE9BQU8sQ0FBQ3NDLE1BQU07Z0JBQzNGO2dCQUVBLHlEQUF5RDtnQkFDekR2Qyx1QkFBdUI7WUFDekIsU0FBVTtnQkFDUnJDLGFBQWE7Z0JBQ2JnRCxRQUFRQyxHQUFHLENBQUM7WUFDZDtRQUNGO3dEQUFHO1FBQ0RyQztRQUNBTDtRQUNBRjtLQUNEO0lBRUQsd0JBQXdCO0lBQ3hCLE1BQU1zRyxrQkFBa0I7UUFDdEJ6RyxrQkFBa0I7SUFDcEI7SUFFQSx1Q0FBdUM7SUFDdkMsTUFBTTBHLHFCQUFxQixDQUFDL0Q7UUFDMUJBLEVBQUVFLGNBQWM7UUFDaEI3QyxrQkFBa0I7SUFDbEIsdURBQXVEO0lBQ3pEO0lBRUEsbUNBQW1DO0lBQ25DLE1BQU0yRyxhQUFhO1FBQ2pCLElBQUkxRixVQUFVNEMsTUFBTSxHQUFHLEdBQUc7WUFDeEIsTUFBTU4sU0FBU3RFLFVBQVVtRCxPQUFPO1lBQ2hDLE1BQU1ZLE1BQU1PLE9BQU9OLFVBQVUsQ0FBQztZQUM5QixNQUFNMkQsZ0JBQWdCM0YsU0FBUyxDQUFDQSxVQUFVNEMsTUFBTSxHQUFHLEVBQUUsRUFBRSwyQkFBMkI7WUFFbEYsSUFBSStDLGVBQWU7Z0JBQ2pCLE1BQU12RSxNQUFNLElBQUlFO2dCQUNoQkYsSUFBSUcsTUFBTSxHQUFHO29CQUNYUSxJQUFJMkIsU0FBUyxHQUFHO29CQUNoQjNCLElBQUk0QixRQUFRLENBQUMsR0FBRyxHQUFHckIsT0FBT2tCLEtBQUssRUFBRWxCLE9BQU9tQixNQUFNO29CQUM5QzFCLElBQUltQyxTQUFTLENBQUM5QyxLQUFLLEdBQUc7Z0JBQ3hCO2dCQUNBQSxJQUFJSSxHQUFHLEdBQUdtRTtZQUNaLE9BQU87Z0JBQ0wsdUNBQXVDO2dCQUN2QzVELElBQUkyQixTQUFTLEdBQUc7Z0JBQ2hCM0IsSUFBSTRCLFFBQVEsQ0FBQyxHQUFHLEdBQUdyQixPQUFPa0IsS0FBSyxFQUFFbEIsT0FBT21CLE1BQU07WUFDaEQ7WUFFQXhELGFBQWFrQyxDQUFBQSxPQUFRQSxLQUFLeUQsS0FBSyxDQUFDLEdBQUcsQ0FBQztRQUN0QztJQUNGO0lBRUEseUNBQXlDO0lBQ3pDLE1BQU14RCxrQkFBa0I7UUFDdEIsTUFBTUUsU0FBU3RFLFVBQVVtRCxPQUFPO1FBQ2hDLElBQUksQ0FBQ21CLFFBQVE7UUFFYixNQUFNdUQsVUFBVXZELE9BQU84QixTQUFTO1FBQ2hDbkUsYUFBYWtDLENBQUFBLE9BQVE7bUJBQUlBO2dCQUFNMEQ7YUFBUTtJQUN6QztJQUVBLHlDQUF5QztJQUN6QyxNQUFNQyxrQkFBa0IsQ0FBQ3BFO1FBQ3ZCLElBQUlBLEVBQUVxRSxHQUFHLEtBQUssU0FBUztZQUNyQixNQUFNekQsU0FBU3RFLFVBQVVtRCxPQUFPO1lBQ2hDLE1BQU1ZLE1BQU1PLE9BQU9OLFVBQVUsQ0FBQztZQUM5QkQsSUFBSWlFLElBQUksR0FBRztZQUNYakUsSUFBSTJCLFNBQVMsR0FBRztZQUNoQjNCLElBQUlrRSxRQUFRLENBQUM3RixXQUFXRSxhQUFhRSxDQUFDLEVBQUVGLGFBQWFHLENBQUM7WUFDdERKLGFBQWE7WUFDYk4sWUFBWTtZQUNacUM7UUFDRjtJQUNGO0lBRUEsMkRBQTJEO0lBQzNELE1BQU04RCxvQkFBb0IsQ0FBQ3hFO1FBQ3pCLElBQUk5QixnQkFBZ0IsUUFBUTtZQUMxQixNQUFNLEVBQUVZLENBQUMsRUFBRUMsQ0FBQyxFQUFFLEdBQUc5QyxtRUFBY0EsQ0FBQytELEdBQUcxRCxVQUFVbUQsT0FBTztZQUNwRFosZ0JBQWdCO2dCQUFFQztnQkFBR0M7WUFBRTtZQUN2QlYsWUFBWTtZQUNaLElBQUlXLGFBQWFTLE9BQU8sRUFBRTtnQkFDeEJULGFBQWFTLE9BQU8sQ0FBQ2dGLEtBQUs7WUFDNUI7UUFDRjtJQUNGO0lBRUEseUNBQXlDO0lBQ3pDLE1BQU1DLGlCQUFpQixDQUFDMUU7UUFDdEIsSUFBSTlCLGdCQUFnQixPQUFPO1FBRTNCLHFFQUFxRTtRQUNyRSw4RUFBOEU7UUFDOUUsNkJBQTZCO1FBRTdCaUMsUUFBUUMsR0FBRyxDQUFDO1FBRVosaURBQWlEO1FBQ2pELDBFQUEwRTtRQUMxRTFELGFBQWE7UUFFYiwyQ0FBMkM7UUFDM0NnRTtJQUNGO0lBRUEsMERBQTBEO0lBQzFELE1BQU1pRSxrQkFBa0I7UUFDdEIsMEJBQTBCO1FBQzFCLElBQUlwSSxpQkFBaUJrRCxPQUFPLEVBQUU7WUFDNUIsTUFBTW1GLE9BQU92QyxTQUFTQyxhQUFhLENBQUM7WUFDcENzQyxLQUFLQyxRQUFRLEdBQUc7WUFDaEJELEtBQUtFLElBQUksR0FBR3ZJLGlCQUFpQmtELE9BQU8sQ0FBQ2lELFNBQVMsQ0FBQztZQUMvQ2tDLEtBQUtHLEtBQUs7UUFDWjtJQUNGO0lBRUEsMkNBQTJDO0lBQzNDLE1BQU1DLG1CQUFtQjtRQUN2QixJQUFJMUksVUFBVW1ELE9BQU8sRUFBRTtZQUNyQiw0RUFBNEU7WUFDNUVELHVCQUF1QjtZQUN2QixNQUFNa0M7UUFDUjtJQUNGO0lBRUEsOERBQThEO0lBQzlEcEcsZ0RBQVNBO3FDQUFDO1lBQ1IseUVBQXlFO1lBQ3pFLE1BQU0ySjtvRUFBeUI7b0JBQzdCLElBQUksQ0FBQzNJLFVBQVVtRCxPQUFPLEVBQUU7b0JBRXhCLE1BQU1tQixTQUFTdEUsVUFBVW1ELE9BQU87b0JBQ2hDLE1BQU1ZLE1BQU1PLE9BQU9OLFVBQVUsQ0FBQztvQkFDOUIsTUFBTWtELFlBQVluRCxJQUFJNkUsWUFBWSxDQUFDLEdBQUcsR0FBR3RFLE9BQU9rQixLQUFLLEVBQUVsQixPQUFPbUIsTUFBTTtvQkFFcEUsMkNBQTJDO29CQUMzQyxNQUFNb0QsYUFBYUMsTUFBTUMsSUFBSSxDQUFDN0IsVUFBVUgsSUFBSSxFQUFFaUMsSUFBSTt1RkFBQyxDQUFDQyxPQUFPQzs0QkFDekQscUNBQXFDOzRCQUNyQyxPQUFPQSxRQUFRLE1BQU0sS0FBS0QsVUFBVTt3QkFDdEM7O29CQUVBLElBQUlKLFlBQVk7d0JBQ2QsTUFBTXpEO29CQUNSO2dCQUNGOztZQUVBLHVCQUF1QjtZQUN2QixJQUFJaEUsV0FBVztnQkFDYnVIO1lBQ0Y7UUFDRjtvQ0FBRztRQUFDdkg7UUFBV2dFO0tBQWlCLEdBQUcsNkNBQTZDO0lBRWhGLHVEQUF1RDtJQUN2RHBHLGdEQUFTQTtxQ0FBQztZQUNSOzZDQUFPO29CQUNMLElBQUl3QyxpQkFBaUIyQixPQUFPLEVBQUU7d0JBQzVCZ0MsYUFBYTNELGlCQUFpQjJCLE9BQU87d0JBQ3JDM0IsaUJBQWlCMkIsT0FBTyxHQUFHO29CQUM3QjtnQkFDRjs7UUFDRjtvQ0FBRyxFQUFFO0lBRUwscUJBQ0UsOERBQUNnRztRQUFJQyxXQUFVOzswQkFDYiw4REFBQ0Q7Z0JBQUlDLFdBQVU7MEJBQ2IsNEVBQUNEO29CQUFJQyxXQUFVOztzQ0FDYiw4REFBQ0Q7NEJBQUlDLFdBQVU7c0NBQ2IsNEVBQUMxSiwrQ0FBTUE7Ozs7Ozs7Ozs7c0NBR1QsOERBQUN5Sjs0QkFBSUMsV0FBVTs7OENBQ2IsOERBQUNsSywrQ0FBTUE7b0NBQ0xjLFdBQVdBO29DQUNYNEIsYUFBYUE7b0NBQ2J6QixXQUFXQTtvQ0FDWHNELGNBQWNBO29DQUNkWSxNQUFNQTtvQ0FDTlcsYUFBYUE7b0NBQ2JrRCxtQkFBbUJBO29DQUNuQkUsZ0JBQWdCQTtvQ0FDaEJoRCxrQkFBa0JBO29DQUNsQnJDLFlBQVlBO29DQUNaQyxlQUFlQTtvQ0FDZjBFLFlBQVlBO29DQUNackMsYUFBYUE7b0NBQ2J4RCxnQkFBZ0JBOzs7Ozs7OENBR2xCLDhEQUFDMUMsc0RBQWFBO29DQUNaYyxrQkFBa0JBO29DQUNsQlcsV0FBV0E7b0NBQ1h5SCxpQkFBaUJBO29DQUNqQkssa0JBQWtCQTtvQ0FDbEJ6RixxQkFBcUJBOzs7Ozs7Ozs7Ozs7c0NBSXpCLDhEQUFDa0c7NEJBQUlDLFdBQVU7c0NBQ2IsNEVBQUMvSixzREFBYUE7Z0NBQ1orQixXQUFXQTtnQ0FDWEMsY0FBY0E7Z0NBQ2RnSSxnQkFBZ0JqRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzswQkFNeEIsOERBQUM1RixtREFBVUE7Z0JBQ1RzQixnQkFBZ0JBO2dCQUNoQjBHLGlCQUFpQkE7Z0JBQ2pCdEcsY0FBY0E7Z0JBQ2RDLGlCQUFpQkE7Z0JBQ2pCc0csb0JBQW9CQTs7Ozs7OzBCQUd0Qiw4REFBQ2hJLGtEQUFTQTtnQkFDUnFDLFVBQVVBO2dCQUNWWSxjQUFjQTtnQkFDZE4sV0FBV0E7Z0JBQ1hDLGNBQWNBO2dCQUNkeUYsaUJBQWlCQTtnQkFDakJ4RixjQUFjQTs7Ozs7Ozs7Ozs7O0FBSXRCO0FBRUEsaUVBQWV2QyxlQUFlQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvdHJ1ZHlwL0Rlc2t0b3AvZGV2LWdlbWluaS0yLjAvY29tcG9uZW50cy9DYW52YXNDb250YWluZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjayB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IENhbnZhcyBmcm9tIFwiLi9DYW52YXNcIjtcbmltcG9ydCBEaXNwbGF5Q2FudmFzIGZyb20gXCIuL0Rpc3BsYXlDYW52YXNcIjtcbmltcG9ydCBUb29sQmFyIGZyb20gXCIuL1Rvb2xCYXJcIjtcbmltcG9ydCBTdHlsZVNlbGVjdG9yIGZyb20gXCIuL1N0eWxlU2VsZWN0b3JcIjtcbmltcG9ydCB7IGdldFByb21wdEZvclN0eWxlIH0gZnJvbSBcIi4vU3R5bGVTZWxlY3RvclwiO1xuaW1wb3J0IEFjdGlvbkJhciBmcm9tIFwiLi9BY3Rpb25CYXJcIjtcbmltcG9ydCBFcnJvck1vZGFsIGZyb20gXCIuL0Vycm9yTW9kYWxcIjtcbmltcG9ydCBUZXh0SW5wdXQgZnJvbSBcIi4vVGV4dElucHV0XCI7XG5pbXBvcnQgSGVhZGVyIGZyb20gXCIuL0hlYWRlclwiO1xuaW1wb3J0IHsgZ2V0Q29vcmRpbmF0ZXMsIGluaXRpYWxpemVDYW52YXMsIGRyYXdJbWFnZVRvQ2FudmFzLCBkcmF3QmV6aWVyQ3VydmUgfSBmcm9tIFwiLi91dGlscy9jYW52YXNVdGlsc1wiO1xuXG5jb25zdCBDYW52YXNDb250YWluZXIgPSAoKSA9PiB7XG4gIGNvbnN0IGNhbnZhc1JlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgZGlzcGxheUNhbnZhc1JlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgYmFja2dyb3VuZEltYWdlUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBbaXNEcmF3aW5nLCBzZXRJc0RyYXdpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGVuQ29sb3IsIHNldFBlbkNvbG9yXSA9IHVzZVN0YXRlKFwiIzAwMDAwMFwiKTtcbiAgY29uc3QgY29sb3JJbnB1dFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgW3Byb21wdCwgc2V0UHJvbXB0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZ2VuZXJhdGVkSW1hZ2UsIHNldEdlbmVyYXRlZEltYWdlXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0Vycm9yTW9kYWwsIHNldFNob3dFcnJvck1vZGFsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Vycm9yTWVzc2FnZSwgc2V0RXJyb3JNZXNzYWdlXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbY3VzdG9tQXBpS2V5LCBzZXRDdXN0b21BcGlLZXldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtzdHlsZU1vZGUsIHNldFN0eWxlTW9kZV0gPSB1c2VTdGF0ZSgnbWF0ZXJpYWwnKTtcbiAgY29uc3QgW3N0cm9rZUNvdW50LCBzZXRTdHJva2VDb3VudF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3Qgc3Ryb2tlVGltZW91dFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgW2xhc3RSZXF1ZXN0VGltZSwgc2V0TGFzdFJlcXVlc3RUaW1lXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBNSU5fUkVRVUVTVF9JTlRFUlZBTCA9IDIwMDA7IC8vIE1pbmltdW0gMiBzZWNvbmRzIGJldHdlZW4gcmVxdWVzdHNcbiAgY29uc3QgW2N1cnJlbnRUb29sLCBzZXRDdXJyZW50VG9vbF0gPSB1c2VTdGF0ZSgncGVuY2lsJyk7IC8vICdwZW5jaWwnLCAncGVuJywgJ2VyYXNlcicsICd0ZXh0J1xuICBjb25zdCBbaXNUeXBpbmcsIHNldElzVHlwaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3VuZG9TdGFjaywgc2V0VW5kb1N0YWNrXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2JlemllclBvaW50cywgc2V0QmV6aWVyUG9pbnRzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3RleHRJbnB1dCwgc2V0VGV4dElucHV0XSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW3RleHRQb3NpdGlvbiwgc2V0VGV4dFBvc2l0aW9uXSA9IHVzZVN0YXRlKHsgeDogMCwgeTogMCB9KTtcbiAgY29uc3QgdGV4dElucHV0UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBbaXNQZW5EcmF3aW5nLCBzZXRJc1BlbkRyYXdpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY3VycmVudEJlemllclBhdGgsIHNldEN1cnJlbnRCZXppZXJQYXRoXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3RlbXBQb2ludHMsIHNldFRlbXBQb2ludHNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbaGFzR2VuZXJhdGVkQ29udGVudCwgc2V0SGFzR2VuZXJhdGVkQ29udGVudF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgLy8gTG9hZCBiYWNrZ3JvdW5kIGltYWdlIHdoZW4gZ2VuZXJhdGVkSW1hZ2UgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChnZW5lcmF0ZWRJbWFnZSAmJiBjYW52YXNSZWYuY3VycmVudCkge1xuICAgICAgLy8gVXNlIHRoZSB3aW5kb3cuSW1hZ2UgY29uc3RydWN0b3IgdG8gYXZvaWQgY29uZmxpY3Qgd2l0aCBOZXh0LmpzIEltYWdlIGNvbXBvbmVudFxuICAgICAgY29uc3QgaW1nID0gbmV3IHdpbmRvdy5JbWFnZSgpO1xuICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgYmFja2dyb3VuZEltYWdlUmVmLmN1cnJlbnQgPSBpbWc7XG4gICAgICAgIGRyYXdJbWFnZVRvQ2FudmFzKGNhbnZhc1JlZi5jdXJyZW50LCBiYWNrZ3JvdW5kSW1hZ2VSZWYuY3VycmVudCk7XG4gICAgICB9O1xuICAgICAgaW1nLnNyYyA9IGdlbmVyYXRlZEltYWdlO1xuICAgIH1cbiAgfSwgW2dlbmVyYXRlZEltYWdlXSk7XG5cbiAgLy8gSW5pdGlhbGl6ZSBjYW52YXMgd2l0aCB3aGl0ZSBiYWNrZ3JvdW5kIHdoZW4gY29tcG9uZW50IG1vdW50c1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjYW52YXNSZWYuY3VycmVudCkge1xuICAgICAgaW5pdGlhbGl6ZUNhbnZhcyhjYW52YXNSZWYuY3VycmVudCk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3Qgc3RhcnREcmF3aW5nID0gKGUpID0+IHtcbiAgICBjb25zdCB7IHgsIHkgfSA9IGdldENvb3JkaW5hdGVzKGUsIGNhbnZhc1JlZi5jdXJyZW50KTtcbiAgICBcbiAgICBpZiAoZS50eXBlID09PSAndG91Y2hzdGFydCcpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ3N0YXJ0RHJhd2luZyBjYWxsZWQnLCB7IGN1cnJlbnRUb29sLCB4LCB5IH0pO1xuICAgIFxuICAgIGNvbnN0IGN0eCA9IGNhbnZhc1JlZi5jdXJyZW50LmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4Lm1vdmVUbyh4LCB5KTtcbiAgICBzZXRJc0RyYXdpbmcodHJ1ZSk7XG4gICAgc2V0U3Ryb2tlQ291bnQocHJldiA9PiBwcmV2ICsgMSk7XG4gICAgXG4gICAgLy8gU2F2ZSBjYW52YXMgc3RhdGUgYmVmb3JlIGRyYXdpbmdcbiAgICBzYXZlQ2FudmFzU3RhdGUoKTtcbiAgfTtcblxuICBjb25zdCBkcmF3ID0gKGUpID0+IHtcbiAgICBpZiAoIWlzRHJhd2luZykgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50O1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gZ2V0Q29vcmRpbmF0ZXMoZSwgY2FudmFzKTtcbiAgICBcbiAgICAvLyBPY2Nhc2lvbmFsbHkgbG9nIGRyYXdpbmcgYWN0aXZpdHlcbiAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMDUpIHsgLy8gT25seSBsb2cgfjUlIG9mIG1vdmUgZXZlbnRzIHRvIGF2b2lkIGNvbnNvbGUgc3BhbVxuICAgICAgY29uc29sZS5sb2coJ2RyYXcgY2FsbGVkJywgeyBjdXJyZW50VG9vbCwgaXNEcmF3aW5nLCB4LCB5IH0pO1xuICAgIH1cbiAgICBcbiAgICBjdHgubGluZVdpZHRoID0gNTtcbiAgICBjdHgubGluZUNhcCA9ICdyb3VuZCc7XG4gICAgXG4gICAgaWYgKGN1cnJlbnRUb29sID09PSAnZXJhc2VyJykge1xuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNGRkZGRkYnO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IDIwO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzAwMDAwMCc7XG4gICAgfVxuICAgIFxuICAgIGlmIChjdXJyZW50VG9vbCA9PT0gJ3BlbicpIHtcbiAgICAgIC8vIFNob3cgcHJldmlldyBsaW5lIHdoaWxlIG1vdmluZ1xuICAgICAgaWYgKHRlbXBQb2ludHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBsYXN0UG9pbnQgPSB0ZW1wUG9pbnRzW3RlbXBQb2ludHMubGVuZ3RoIC0gMV07XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lm1vdmVUbyhsYXN0UG9pbnQueCwgbGFzdFBvaW50LnkpO1xuICAgICAgICBjdHgubGluZVRvKHgsIHkpO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGN0eC5saW5lVG8oeCwgeSk7XG4gICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHN0b3BEcmF3aW5nID0gYXN5bmMgKGUpID0+IHtcbiAgICBjb25zb2xlLmxvZygnc3RvcERyYXdpbmcgY2FsbGVkIGluIENhbnZhc0NvbnRhaW5lcicsIHsgXG4gICAgICBpc0RyYXdpbmcsIFxuICAgICAgY3VycmVudFRvb2wsIFxuICAgICAgaGFzRXZlbnQ6ICEhZSxcbiAgICAgIGV2ZW50VHlwZTogZSA/IGUudHlwZSA6ICdub25lJ1xuICAgIH0pO1xuICAgIFxuICAgIGlmICghaXNEcmF3aW5nKSByZXR1cm47XG4gICAgc2V0SXNEcmF3aW5nKGZhbHNlKTtcbiAgICBcbiAgICAvLyBSZW1vdmUgdGhlIHRpbWVvdXQtYmFzZWQgZ2VuZXJhdGlvblxuICAgIGlmIChzdHJva2VUaW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNsZWFyVGltZW91dChzdHJva2VUaW1lb3V0UmVmLmN1cnJlbnQpO1xuICAgICAgc3Ryb2tlVGltZW91dFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBUaGUgQ2FudmFzIGNvbXBvbmVudCB3aWxsIGhhbmRsZSBnZW5lcmF0aW9uIGZvciBwZW4gYW5kIHBlbmNpbCB0b29scyBkaXJlY3RseVxuICAgIC8vIFRoaXMgZnVuY3Rpb24gbm93IHByaW1hcmlseSBoYW5kbGVzIHN0cm9rZSBjb3VudGluZyBmb3Igb3RoZXIgdG9vbHNcbiAgICBcbiAgICAvLyBPbmx5IGdlbmVyYXRlIG9uIG1vdXNlL3RvdWNoIHVwIGV2ZW50cyB3aGVuIG5vdCB1c2luZyB0aGUgcGVuIG9yIHBlbmNpbCB0b29sXG4gICAgLy8gKHNpbmNlIHRob3NlIGFyZSBoYW5kbGVkIGJ5IHRoZSBDYW52YXMgY29tcG9uZW50KVxuICAgIGlmIChlICYmIChlLnR5cGUgPT09ICdtb3VzZXVwJyB8fCBlLnR5cGUgPT09ICd0b3VjaGVuZCcpICYmIFxuICAgICAgICBjdXJyZW50VG9vbCAhPT0gJ3BlbicgJiYgY3VycmVudFRvb2wgIT09ICdwZW5jaWwnKSB7XG4gICAgICBjb25zb2xlLmxvZygnc3RvcERyYXdpbmc6IGRldGVjdGVkIG1vdXNldXAvdG91Y2hlbmQgZXZlbnQnLCB7IHN0cm9rZUNvdW50IH0pO1xuICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBlbm91Z2ggc3Ryb2tlcyB0byBnZW5lcmF0ZSAoaW5jcmVhc2VkIHRvIDEwIGZyb20gMylcbiAgICAgIGlmIChzdHJva2VDb3VudCA+PSAxMCkge1xuICAgICAgICBjb25zb2xlLmxvZygnc3RvcERyYXdpbmc6IGNhbGxpbmcgaGFuZGxlR2VuZXJhdGlvbiBkdWUgdG8gc3Ryb2tlIGNvdW50Jyk7XG4gICAgICAgIGF3YWl0IGhhbmRsZUdlbmVyYXRpb24oKTtcbiAgICAgICAgc2V0U3Ryb2tlQ291bnQoMCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNsZWFyQ2FudmFzID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50O1xuICAgIGlmICghY2FudmFzKSByZXR1cm47XG4gICAgXG4gICAgaW5pdGlhbGl6ZUNhbnZhcyhjYW52YXMpO1xuICAgIFxuICAgIHNldEdlbmVyYXRlZEltYWdlKG51bGwpO1xuICAgIGJhY2tncm91bmRJbWFnZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICBcbiAgICAvLyBBbHNvIGNsZWFyIHRoZSBkaXNwbGF5IGNhbnZhcyBhbmQgcmVzZXQgZ2VuZXJhdGVkIGNvbnRlbnQgZmxhZ1xuICAgIGlmIChkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IGRpc3BsYXlDdHggPSBkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgIGRpc3BsYXlDdHguY2xlYXJSZWN0KDAsIDAsIGRpc3BsYXlDYW52YXNSZWYuY3VycmVudC53aWR0aCwgZGlzcGxheUNhbnZhc1JlZi5jdXJyZW50LmhlaWdodCk7XG4gICAgICBkaXNwbGF5Q3R4LmZpbGxTdHlsZSA9ICcjRkZGRkZGJztcbiAgICAgIGRpc3BsYXlDdHguZmlsbFJlY3QoMCwgMCwgZGlzcGxheUNhbnZhc1JlZi5jdXJyZW50LndpZHRoLCBkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQuaGVpZ2h0KTtcbiAgICAgIHNldEhhc0dlbmVyYXRlZENvbnRlbnQoZmFsc2UpO1xuICAgIH1cbiAgICBcbiAgICAvLyBTYXZlIGVtcHR5IGNhbnZhcyBzdGF0ZVxuICAgIHNhdmVDYW52YXNTdGF0ZSgpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUdlbmVyYXRpb24gPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2hhbmRsZUdlbmVyYXRpb24gY2FsbGVkJyk7XG4gICAgXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAobm93IC0gbGFzdFJlcXVlc3RUaW1lIDwgTUlOX1JFUVVFU1RfSU5URVJWQUwpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiUmVxdWVzdCB0aHJvdHRsZWQgLSB0b28gc29vbiBhZnRlciBsYXN0IHJlcXVlc3RcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHNldExhc3RSZXF1ZXN0VGltZShub3cpO1xuICAgIGlmICghY2FudmFzUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgZ2VuZXJhdGlvbiBwcm9jZXNzJyk7XG4gICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcbiAgICAgIGNvbnN0IHRlbXBDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgIHRlbXBDYW52YXMud2lkdGggPSBjYW52YXMud2lkdGg7XG4gICAgICB0ZW1wQ2FudmFzLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XG4gICAgICBjb25zdCB0ZW1wQ3R4ID0gdGVtcENhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgXG4gICAgICB0ZW1wQ3R4LmZpbGxTdHlsZSA9ICcjRkZGRkZGJztcbiAgICAgIHRlbXBDdHguZmlsbFJlY3QoMCwgMCwgdGVtcENhbnZhcy53aWR0aCwgdGVtcENhbnZhcy5oZWlnaHQpO1xuICAgICAgdGVtcEN0eC5kcmF3SW1hZ2UoY2FudmFzLCAwLCAwKTtcbiAgICAgIFxuICAgICAgY29uc3QgZHJhd2luZ0RhdGEgPSB0ZW1wQ2FudmFzLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKS5zcGxpdChcIixcIilbMV07XG4gICAgICBcbiAgICAgIGNvbnN0IHJlcXVlc3RQYXlsb2FkID0ge1xuICAgICAgICBwcm9tcHQ6IGdldFByb21wdEZvclN0eWxlKHN0eWxlTW9kZSksXG4gICAgICAgIGRyYXdpbmdEYXRhLFxuICAgICAgICBjdXN0b21BcGlLZXlcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdNYWtpbmcgQVBJIHJlcXVlc3Qgd2l0aCBzdHlsZTonLCBzdHlsZU1vZGUpO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2FwaS9nZW5lcmF0ZVwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdFBheWxvYWQpLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdBUEkgcmVzcG9uc2UgcmVjZWl2ZWQsIHN0YXR1czonLCByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgXG4gICAgICBpZiAoZGF0YS5zdWNjZXNzICYmIGRhdGEuaW1hZ2VEYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdJbWFnZSBnZW5lcmF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgIGNvbnN0IGltYWdlVXJsID0gYGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwke2RhdGEuaW1hZ2VEYXRhfWA7XG4gICAgICAgIFxuICAgICAgICAvLyBEcmF3IHRoZSBnZW5lcmF0ZWQgaW1hZ2UgdG8gdGhlIGRpc3BsYXkgY2FudmFzXG4gICAgICAgIGNvbnN0IGRpc3BsYXlDYW52YXMgPSBkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmICghZGlzcGxheUNhbnZhcykge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Rpc3BsYXkgY2FudmFzIHJlZiBpcyBudWxsJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkaXNwbGF5Q3R4ID0gZGlzcGxheUNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xlYXIgdGhlIGRpc3BsYXkgY2FudmFzIGZpcnN0XG4gICAgICAgIGRpc3BsYXlDdHguY2xlYXJSZWN0KDAsIDAsIGRpc3BsYXlDYW52YXMud2lkdGgsIGRpc3BsYXlDYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgZGlzcGxheUN0eC5maWxsU3R5bGUgPSAnI0ZGRkZGRic7XG4gICAgICAgIGRpc3BsYXlDdHguZmlsbFJlY3QoMCwgMCwgZGlzcGxheUNhbnZhcy53aWR0aCwgZGlzcGxheUNhbnZhcy5oZWlnaHQpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGFuZCBsb2FkIHRoZSBuZXcgaW1hZ2VcbiAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgdXAgdGhlIG9ubG9hZCBoYW5kbGVyIGJlZm9yZSBzZXR0aW5nIHRoZSBzcmNcbiAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnR2VuZXJhdGVkIGltYWdlIGxvYWRlZCwgZHJhd2luZyB0byBkaXNwbGF5IGNhbnZhcycpO1xuICAgICAgICAgIGRpc3BsYXlDdHguY2xlYXJSZWN0KDAsIDAsIGRpc3BsYXlDYW52YXMud2lkdGgsIGRpc3BsYXlDYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICBkaXNwbGF5Q3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIGRpc3BsYXlDYW52YXMud2lkdGgsIGRpc3BsYXlDYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnSW1hZ2UgZHJhd24gdG8gZGlzcGxheSBjYW52YXMnKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBVcGRhdGUgb3VyIHN0YXRlIHRvIGluZGljYXRlIHdlIGhhdmUgZ2VuZXJhdGVkIGNvbnRlbnRcbiAgICAgICAgICBzZXRIYXNHZW5lcmF0ZWRDb250ZW50KHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0IHRoZSBzcmMgdG8gdHJpZ2dlciBsb2FkaW5nXG4gICAgICAgIGltZy5zcmMgPSBpbWFnZVVybDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZ2VuZXJhdGUgaW1hZ2U6XCIsIGRhdGEuZXJyb3IpO1xuICAgICAgICBcbiAgICAgICAgLy8gV2hlbiBnZW5lcmF0aW9uIGZhaWxzLCBlbnN1cmUgZGlzcGxheSBjYW52YXMgaXMgY2xlYXJlZFxuICAgICAgICBpZiAoZGlzcGxheUNhbnZhc1JlZi5jdXJyZW50KSB7XG4gICAgICAgICAgY29uc3QgZGlzcGxheUN0eCA9IGRpc3BsYXlDYW52YXNSZWYuY3VycmVudC5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgIGRpc3BsYXlDdHguY2xlYXJSZWN0KDAsIDAsIGRpc3BsYXlDYW52YXNSZWYuY3VycmVudC53aWR0aCwgZGlzcGxheUNhbnZhc1JlZi5jdXJyZW50LmhlaWdodCk7XG4gICAgICAgICAgZGlzcGxheUN0eC5maWxsU3R5bGUgPSAnI0ZGRkZGRic7XG4gICAgICAgICAgZGlzcGxheUN0eC5maWxsUmVjdCgwLCAwLCBkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQud2lkdGgsIGRpc3BsYXlDYW52YXNSZWYuY3VycmVudC5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBNYWtlIHN1cmUgd2UgbWFyayB0aGF0IHdlIGRvbid0IGhhdmUgZ2VuZXJhdGVkIGNvbnRlbnRcbiAgICAgICAgc2V0SGFzR2VuZXJhdGVkQ29udGVudChmYWxzZSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZGF0YS5lcnJvciAmJiAoXG4gICAgICAgICAgZGF0YS5lcnJvci5pbmNsdWRlcyhcIlJlc291cmNlIGhhcyBiZWVuIGV4aGF1c3RlZFwiKSB8fCBcbiAgICAgICAgICBkYXRhLmVycm9yLmluY2x1ZGVzKFwicXVvdGFcIikgfHxcbiAgICAgICAgICByZXNwb25zZS5zdGF0dXMgPT09IDQyOSB8fFxuICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA9PT0gNTAwXG4gICAgICAgICkpIHtcbiAgICAgICAgICBzZXRFcnJvck1lc3NhZ2UoZGF0YS5lcnJvcik7XG4gICAgICAgICAgc2V0U2hvd0Vycm9yTW9kYWwodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdlbmVyYXRpbmcgaW1hZ2U6XCIsIGVycm9yKTtcbiAgICAgIHNldEVycm9yTWVzc2FnZShlcnJvci5tZXNzYWdlIHx8IFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIik7XG4gICAgICBzZXRTaG93RXJyb3JNb2RhbCh0cnVlKTtcbiAgICAgIFxuICAgICAgLy8gV2hlbiBnZW5lcmF0aW9uIGVycm9ycywgZW5zdXJlIGRpc3BsYXkgY2FudmFzIGlzIGNsZWFyZWRcbiAgICAgIGlmIChkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY29uc3QgZGlzcGxheUN0eCA9IGRpc3BsYXlDYW52YXNSZWYuY3VycmVudC5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBkaXNwbGF5Q3R4LmNsZWFyUmVjdCgwLCAwLCBkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQud2lkdGgsIGRpc3BsYXlDYW52YXNSZWYuY3VycmVudC5oZWlnaHQpO1xuICAgICAgICBkaXNwbGF5Q3R4LmZpbGxTdHlsZSA9ICcjRkZGRkZGJztcbiAgICAgICAgZGlzcGxheUN0eC5maWxsUmVjdCgwLCAwLCBkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQud2lkdGgsIGRpc3BsYXlDYW52YXNSZWYuY3VycmVudC5oZWlnaHQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBNYWtlIHN1cmUgd2UgbWFyayB0aGF0IHdlIGRvbid0IGhhdmUgZ2VuZXJhdGVkIGNvbnRlbnRcbiAgICAgIHNldEhhc0dlbmVyYXRlZENvbnRlbnQoZmFsc2UpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgY29uc29sZS5sb2coJ0dlbmVyYXRpb24gcHJvY2VzcyBjb21wbGV0ZWQnKTtcbiAgICB9XG4gIH0sIFtcbiAgICBsYXN0UmVxdWVzdFRpbWUsIFxuICAgIHN0eWxlTW9kZSwgXG4gICAgY3VzdG9tQXBpS2V5XG4gIF0pO1xuXG4gIC8vIENsb3NlIHRoZSBlcnJvciBtb2RhbFxuICBjb25zdCBjbG9zZUVycm9yTW9kYWwgPSAoKSA9PiB7XG4gICAgc2V0U2hvd0Vycm9yTW9kYWwoZmFsc2UpO1xuICB9O1xuXG4gIC8vIEhhbmRsZSB0aGUgY3VzdG9tIEFQSSBrZXkgc3VibWlzc2lvblxuICBjb25zdCBoYW5kbGVBcGlLZXlTdWJtaXQgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBzZXRTaG93RXJyb3JNb2RhbChmYWxzZSk7XG4gICAgLy8gV2lsbCB1c2UgdGhlIGN1c3RvbUFwaUtleSBzdGF0ZSBpbiB0aGUgbmV4dCBBUEkgY2FsbFxuICB9O1xuXG4gIC8vIEFkZCB0aGlzIGZ1bmN0aW9uIHRvIGhhbmRsZSB1bmRvXG4gIGNvbnN0IGhhbmRsZVVuZG8gPSAoKSA9PiB7XG4gICAgaWYgKHVuZG9TdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcbiAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgY29uc3QgcHJldmlvdXNTdGF0ZSA9IHVuZG9TdGFja1t1bmRvU3RhY2subGVuZ3RoIC0gMl07IC8vIEdldCBzZWNvbmQgdG8gbGFzdCBzdGF0ZVxuICAgICAgXG4gICAgICBpZiAocHJldmlvdXNTdGF0ZSkge1xuICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNGRkZGRkYnO1xuICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1nLnNyYyA9IHByZXZpb3VzU3RhdGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJZiBubyBwcmV2aW91cyBzdGF0ZSwgY2xlYXIgdG8gd2hpdGVcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjRkZGRkZGJztcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHNldFVuZG9TdGFjayhwcmV2ID0+IHByZXYuc2xpY2UoMCwgLTEpKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQWRkIHRoaXMgZnVuY3Rpb24gdG8gc2F2ZSBjYW52YXMgc3RhdGVcbiAgY29uc3Qgc2F2ZUNhbnZhc1N0YXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50O1xuICAgIGlmICghY2FudmFzKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgZGF0YVVSTCA9IGNhbnZhcy50b0RhdGFVUkwoKTtcbiAgICBzZXRVbmRvU3RhY2socHJldiA9PiBbLi4ucHJldiwgZGF0YVVSTF0pO1xuICB9O1xuXG4gIC8vIEFkZCB0aGlzIGZ1bmN0aW9uIHRvIGhhbmRsZSB0ZXh0IGlucHV0XG4gIGNvbnN0IGhhbmRsZVRleHRJbnB1dCA9IChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcbiAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgY3R4LmZvbnQgPSAnMjRweCBBcmlhbCc7XG4gICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAwMDAnO1xuICAgICAgY3R4LmZpbGxUZXh0KHRleHRJbnB1dCwgdGV4dFBvc2l0aW9uLngsIHRleHRQb3NpdGlvbi55KTtcbiAgICAgIHNldFRleHRJbnB1dCgnJyk7XG4gICAgICBzZXRJc1R5cGluZyhmYWxzZSk7XG4gICAgICBzYXZlQ2FudmFzU3RhdGUoKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gTW9kaWZ5IHRoZSBjYW52YXMgY2xpY2sgaGFuZGxlciB0byBoYW5kbGUgdGV4dCBwbGFjZW1lbnRcbiAgY29uc3QgaGFuZGxlQ2FudmFzQ2xpY2sgPSAoZSkgPT4ge1xuICAgIGlmIChjdXJyZW50VG9vbCA9PT0gJ3RleHQnKSB7XG4gICAgICBjb25zdCB7IHgsIHkgfSA9IGdldENvb3JkaW5hdGVzKGUsIGNhbnZhc1JlZi5jdXJyZW50KTtcbiAgICAgIHNldFRleHRQb3NpdGlvbih7IHgsIHkgfSk7XG4gICAgICBzZXRJc1R5cGluZyh0cnVlKTtcbiAgICAgIGlmICh0ZXh0SW5wdXRSZWYuY3VycmVudCkge1xuICAgICAgICB0ZXh0SW5wdXRSZWYuY3VycmVudC5mb2N1cygpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBIYW5kbGUgcGVuIGNsaWNrIGZvciBiZXppZXIgY3VydmUgdG9vbFxuICBjb25zdCBoYW5kbGVQZW5DbGljayA9IChlKSA9PiB7XG4gICAgaWYgKGN1cnJlbnRUb29sICE9PSAncGVuJykgcmV0dXJuO1xuICAgIFxuICAgIC8vIE5vdGU6IEFjdHVhbCBwb2ludCBjcmVhdGlvbiBpcyBub3cgaGFuZGxlZCBpbiB0aGUgQ2FudmFzIGNvbXBvbmVudFxuICAgIC8vIFRoaXMgZnVuY3Rpb24gaXMgcHJpbWFyaWx5IHVzZWQgYXMgYSBjYWxsYmFjayB0byBpbmZvcm0gdGhlIENhbnZhc0NvbnRhaW5lclxuICAgIC8vIHRoYXQgYSBwZW4gYWN0aW9uIGhhcHBlbmVkXG4gICAgXG4gICAgY29uc29sZS5sb2coJ2hhbmRsZVBlbkNsaWNrIGNhbGxlZCBpbiBDYW52YXNDb250YWluZXInKTtcbiAgICBcbiAgICAvLyBTZXQgaXNEcmF3aW5nIGZsYWcgdG8gdHJ1ZSB3aGVuIHVzaW5nIHBlbiB0b29sXG4gICAgLy8gVGhpcyBlbnN1cmVzIGhhbmRsZVN0b3BEcmF3aW5nIGtub3dzIHdlJ3JlIGluIGRyYXdpbmcgbW9kZSB3aXRoIHRoZSBwZW5cbiAgICBzZXRJc0RyYXdpbmcodHJ1ZSk7XG4gICAgXG4gICAgLy8gU2F2ZSBjYW52YXMgc3RhdGUgd2hlbiBhZGRpbmcgbmV3IHBvaW50c1xuICAgIHNhdmVDYW52YXNTdGF0ZSgpO1xuICB9O1xuXG4gIC8vIEFkZCB0aGlzIG5ldyBmdW5jdGlvbiBuZWFyIHlvdXIgb3RoZXIgdXRpbGl0eSBmdW5jdGlvbnNcbiAgY29uc3QgaGFuZGxlU2F2ZUltYWdlID0gKCkgPT4ge1xuICAgIC8vIEZvciB0aGUgZ2VuZXJhdGVkIGltYWdlXG4gICAgaWYgKGRpc3BsYXlDYW52YXNSZWYuY3VycmVudCkge1xuICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgIGxpbmsuZG93bmxvYWQgPSAnY2hyb21lLXN0dWR5LnBuZyc7XG4gICAgICBsaW5rLmhyZWYgPSBkaXNwbGF5Q2FudmFzUmVmLmN1cnJlbnQudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcbiAgICAgIGxpbmsuY2xpY2soKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQWRkIHRoaXMgZnVuY3Rpb24gdG8gaGFuZGxlIHJlZ2VuZXJhdGlvblxuICBjb25zdCBoYW5kbGVSZWdlbmVyYXRlID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmIChjYW52YXNSZWYuY3VycmVudCkge1xuICAgICAgLy8gVGVtcG9yYXJpbHkgcmVzZXQgaGFzR2VuZXJhdGVkQ29udGVudCBzbyBwbGFjZWhvbGRlciBzaG93cyBkdXJpbmcgbG9hZGluZ1xuICAgICAgc2V0SGFzR2VuZXJhdGVkQ29udGVudChmYWxzZSk7XG4gICAgICBhd2FpdCBoYW5kbGVHZW5lcmF0aW9uKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEFkZCB1c2VFZmZlY3QgdG8gd2F0Y2ggZm9yIHN0eWxlTW9kZSBjaGFuZ2VzIGFuZCByZWdlbmVyYXRlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gT25seSB0cmlnZ2VyIGlmIHdlIGhhdmUgc29tZXRoaW5nIGRyYXduIChjaGVjayBpZiBjYW52YXMgaXMgbm90IGVtcHR5KVxuICAgIGNvbnN0IGNoZWNrQ2FudmFzQW5kR2VuZXJhdGUgPSBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoIWNhbnZhc1JlZi5jdXJyZW50KSByZXR1cm47XG4gICAgICBcbiAgICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50O1xuICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICBjb25zdCBpbWFnZURhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIGNhbnZhcyBoYXMgYW55IG5vbi13aGl0ZSBwaXhlbHNcbiAgICAgIGNvbnN0IGhhc0RyYXdpbmcgPSBBcnJheS5mcm9tKGltYWdlRGF0YS5kYXRhKS5zb21lKChwaXhlbCwgaW5kZXgpID0+IHtcbiAgICAgICAgLy8gQ2hlY2sgb25seSBSR0IgdmFsdWVzIChza2lwIGFscGhhKVxuICAgICAgICByZXR1cm4gaW5kZXggJSA0ICE9PSAzICYmIHBpeGVsICE9PSAyNTU7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGhhc0RyYXdpbmcpIHtcbiAgICAgICAgYXdhaXQgaGFuZGxlR2VuZXJhdGlvbigpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBTa2lwIG9uIGZpcnN0IHJlbmRlclxuICAgIGlmIChzdHlsZU1vZGUpIHtcbiAgICAgIGNoZWNrQ2FudmFzQW5kR2VuZXJhdGUoKTtcbiAgICB9XG4gIH0sIFtzdHlsZU1vZGUsIGhhbmRsZUdlbmVyYXRpb25dKTsgLy8gQWRkZWQgaGFuZGxlR2VuZXJhdGlvbiB0byBkZXBlbmRlbmN5IGFycmF5XG5cbiAgLy8gQ2xlYW51cCBmdW5jdGlvbiAtIGtlZXAgdGhpcyB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoc3Ryb2tlVGltZW91dFJlZi5jdXJyZW50KSB7XG4gICAgICAgIGNsZWFyVGltZW91dChzdHJva2VUaW1lb3V0UmVmLmN1cnJlbnQpO1xuICAgICAgICBzdHJva2VUaW1lb3V0UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtaW4taC1zY3JlZW4gZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktc3RhcnQgYmctZ3JheS01MCBwLTYgbWQ6cC04XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIHctZnVsbCBtYXgtdy03eGxcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgICAgPEhlYWRlciAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBnYXAtNiBtZDpnYXAtOFwiPlxuICAgICAgICAgICAgPENhbnZhcyBcbiAgICAgICAgICAgICAgY2FudmFzUmVmPXtjYW52YXNSZWZ9XG4gICAgICAgICAgICAgIGN1cnJlbnRUb29sPXtjdXJyZW50VG9vbH1cbiAgICAgICAgICAgICAgaXNEcmF3aW5nPXtpc0RyYXdpbmd9XG4gICAgICAgICAgICAgIHN0YXJ0RHJhd2luZz17c3RhcnREcmF3aW5nfVxuICAgICAgICAgICAgICBkcmF3PXtkcmF3fVxuICAgICAgICAgICAgICBzdG9wRHJhd2luZz17c3RvcERyYXdpbmd9XG4gICAgICAgICAgICAgIGhhbmRsZUNhbnZhc0NsaWNrPXtoYW5kbGVDYW52YXNDbGlja31cbiAgICAgICAgICAgICAgaGFuZGxlUGVuQ2xpY2s9e2hhbmRsZVBlbkNsaWNrfVxuICAgICAgICAgICAgICBoYW5kbGVHZW5lcmF0aW9uPXtoYW5kbGVHZW5lcmF0aW9ufVxuICAgICAgICAgICAgICB0ZW1wUG9pbnRzPXt0ZW1wUG9pbnRzfVxuICAgICAgICAgICAgICBzZXRUZW1wUG9pbnRzPXtzZXRUZW1wUG9pbnRzfVxuICAgICAgICAgICAgICBoYW5kbGVVbmRvPXtoYW5kbGVVbmRvfVxuICAgICAgICAgICAgICBjbGVhckNhbnZhcz17Y2xlYXJDYW52YXN9XG4gICAgICAgICAgICAgIHNldEN1cnJlbnRUb29sPXtzZXRDdXJyZW50VG9vbH1cbiAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgIDxEaXNwbGF5Q2FudmFzIFxuICAgICAgICAgICAgICBkaXNwbGF5Q2FudmFzUmVmPXtkaXNwbGF5Q2FudmFzUmVmfVxuICAgICAgICAgICAgICBpc0xvYWRpbmc9e2lzTG9hZGluZ31cbiAgICAgICAgICAgICAgaGFuZGxlU2F2ZUltYWdlPXtoYW5kbGVTYXZlSW1hZ2V9XG4gICAgICAgICAgICAgIGhhbmRsZVJlZ2VuZXJhdGU9e2hhbmRsZVJlZ2VuZXJhdGV9XG4gICAgICAgICAgICAgIGhhc0dlbmVyYXRlZENvbnRlbnQ9e2hhc0dlbmVyYXRlZENvbnRlbnR9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgbXQtNCBtYi02XCI+XG4gICAgICAgICAgICA8U3R5bGVTZWxlY3RvciBcbiAgICAgICAgICAgICAgc3R5bGVNb2RlPXtzdHlsZU1vZGV9XG4gICAgICAgICAgICAgIHNldFN0eWxlTW9kZT17c2V0U3R5bGVNb2RlfVxuICAgICAgICAgICAgICBoYW5kbGVHZW5lcmF0ZT17aGFuZGxlR2VuZXJhdGlvbn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxFcnJvck1vZGFsIFxuICAgICAgICBzaG93RXJyb3JNb2RhbD17c2hvd0Vycm9yTW9kYWx9XG4gICAgICAgIGNsb3NlRXJyb3JNb2RhbD17Y2xvc2VFcnJvck1vZGFsfVxuICAgICAgICBjdXN0b21BcGlLZXk9e2N1c3RvbUFwaUtleX1cbiAgICAgICAgc2V0Q3VzdG9tQXBpS2V5PXtzZXRDdXN0b21BcGlLZXl9XG4gICAgICAgIGhhbmRsZUFwaUtleVN1Ym1pdD17aGFuZGxlQXBpS2V5U3VibWl0fVxuICAgICAgLz5cblxuICAgICAgPFRleHRJbnB1dCBcbiAgICAgICAgaXNUeXBpbmc9e2lzVHlwaW5nfVxuICAgICAgICB0ZXh0SW5wdXRSZWY9e3RleHRJbnB1dFJlZn1cbiAgICAgICAgdGV4dElucHV0PXt0ZXh0SW5wdXR9XG4gICAgICAgIHNldFRleHRJbnB1dD17c2V0VGV4dElucHV0fVxuICAgICAgICBoYW5kbGVUZXh0SW5wdXQ9e2hhbmRsZVRleHRJbnB1dH1cbiAgICAgICAgdGV4dFBvc2l0aW9uPXt0ZXh0UG9zaXRpb259XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzQ29udGFpbmVyOyAiXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJ1c2VDYWxsYmFjayIsIkNhbnZhcyIsIkRpc3BsYXlDYW52YXMiLCJUb29sQmFyIiwiU3R5bGVTZWxlY3RvciIsImdldFByb21wdEZvclN0eWxlIiwiQWN0aW9uQmFyIiwiRXJyb3JNb2RhbCIsIlRleHRJbnB1dCIsIkhlYWRlciIsImdldENvb3JkaW5hdGVzIiwiaW5pdGlhbGl6ZUNhbnZhcyIsImRyYXdJbWFnZVRvQ2FudmFzIiwiZHJhd0JlemllckN1cnZlIiwiQ2FudmFzQ29udGFpbmVyIiwiY2FudmFzUmVmIiwiZGlzcGxheUNhbnZhc1JlZiIsImJhY2tncm91bmRJbWFnZVJlZiIsImlzRHJhd2luZyIsInNldElzRHJhd2luZyIsInBlbkNvbG9yIiwic2V0UGVuQ29sb3IiLCJjb2xvcklucHV0UmVmIiwicHJvbXB0Iiwic2V0UHJvbXB0IiwiZ2VuZXJhdGVkSW1hZ2UiLCJzZXRHZW5lcmF0ZWRJbWFnZSIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsInNob3dFcnJvck1vZGFsIiwic2V0U2hvd0Vycm9yTW9kYWwiLCJlcnJvck1lc3NhZ2UiLCJzZXRFcnJvck1lc3NhZ2UiLCJjdXN0b21BcGlLZXkiLCJzZXRDdXN0b21BcGlLZXkiLCJzdHlsZU1vZGUiLCJzZXRTdHlsZU1vZGUiLCJzdHJva2VDb3VudCIsInNldFN0cm9rZUNvdW50Iiwic3Ryb2tlVGltZW91dFJlZiIsImxhc3RSZXF1ZXN0VGltZSIsInNldExhc3RSZXF1ZXN0VGltZSIsIk1JTl9SRVFVRVNUX0lOVEVSVkFMIiwiY3VycmVudFRvb2wiLCJzZXRDdXJyZW50VG9vbCIsImlzVHlwaW5nIiwic2V0SXNUeXBpbmciLCJ1bmRvU3RhY2siLCJzZXRVbmRvU3RhY2siLCJiZXppZXJQb2ludHMiLCJzZXRCZXppZXJQb2ludHMiLCJ0ZXh0SW5wdXQiLCJzZXRUZXh0SW5wdXQiLCJ0ZXh0UG9zaXRpb24iLCJzZXRUZXh0UG9zaXRpb24iLCJ4IiwieSIsInRleHRJbnB1dFJlZiIsImlzUGVuRHJhd2luZyIsInNldElzUGVuRHJhd2luZyIsImN1cnJlbnRCZXppZXJQYXRoIiwic2V0Q3VycmVudEJlemllclBhdGgiLCJ0ZW1wUG9pbnRzIiwic2V0VGVtcFBvaW50cyIsImhhc0dlbmVyYXRlZENvbnRlbnQiLCJzZXRIYXNHZW5lcmF0ZWRDb250ZW50IiwiY3VycmVudCIsImltZyIsIndpbmRvdyIsIkltYWdlIiwib25sb2FkIiwic3JjIiwic3RhcnREcmF3aW5nIiwiZSIsInR5cGUiLCJwcmV2ZW50RGVmYXVsdCIsImNvbnNvbGUiLCJsb2ciLCJjdHgiLCJnZXRDb250ZXh0IiwiYmVnaW5QYXRoIiwibW92ZVRvIiwicHJldiIsInNhdmVDYW52YXNTdGF0ZSIsImRyYXciLCJjYW52YXMiLCJNYXRoIiwicmFuZG9tIiwibGluZVdpZHRoIiwibGluZUNhcCIsInN0cm9rZVN0eWxlIiwibGVuZ3RoIiwibGFzdFBvaW50IiwibGluZVRvIiwic3Ryb2tlIiwic3RvcERyYXdpbmciLCJoYXNFdmVudCIsImV2ZW50VHlwZSIsImNsZWFyVGltZW91dCIsImhhbmRsZUdlbmVyYXRpb24iLCJjbGVhckNhbnZhcyIsImRpc3BsYXlDdHgiLCJjbGVhclJlY3QiLCJ3aWR0aCIsImhlaWdodCIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwibm93IiwiRGF0ZSIsInRlbXBDYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0ZW1wQ3R4IiwiZHJhd0ltYWdlIiwiZHJhd2luZ0RhdGEiLCJ0b0RhdGFVUkwiLCJzcGxpdCIsInJlcXVlc3RQYXlsb2FkIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXR1cyIsImRhdGEiLCJqc29uIiwic3VjY2VzcyIsImltYWdlRGF0YSIsImltYWdlVXJsIiwiZGlzcGxheUNhbnZhcyIsImVycm9yIiwiaW5jbHVkZXMiLCJtZXNzYWdlIiwiY2xvc2VFcnJvck1vZGFsIiwiaGFuZGxlQXBpS2V5U3VibWl0IiwiaGFuZGxlVW5kbyIsInByZXZpb3VzU3RhdGUiLCJzbGljZSIsImRhdGFVUkwiLCJoYW5kbGVUZXh0SW5wdXQiLCJrZXkiLCJmb250IiwiZmlsbFRleHQiLCJoYW5kbGVDYW52YXNDbGljayIsImZvY3VzIiwiaGFuZGxlUGVuQ2xpY2siLCJoYW5kbGVTYXZlSW1hZ2UiLCJsaW5rIiwiZG93bmxvYWQiLCJocmVmIiwiY2xpY2siLCJoYW5kbGVSZWdlbmVyYXRlIiwiY2hlY2tDYW52YXNBbmRHZW5lcmF0ZSIsImdldEltYWdlRGF0YSIsImhhc0RyYXdpbmciLCJBcnJheSIsImZyb20iLCJzb21lIiwicGl4ZWwiLCJpbmRleCIsImRpdiIsImNsYXNzTmFtZSIsImhhbmRsZUdlbmVyYXRlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/CanvasContainer.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/DisplayCanvas.js":
/*!*************************************!*\
  !*** ./components/DisplayCanvas.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _barrel_optimize_names_ImageIcon_LoaderCircle_lucide_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,LoaderCircle!=!lucide-react */ \"(pages-dir-node)/__barrel_optimize__?names=ImageIcon,LoaderCircle!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _ActionBar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ActionBar */ \"(pages-dir-node)/./components/ActionBar.js\");\n\n\n\n\nconst DisplayCanvas = ({ displayCanvasRef, isLoading, handleSaveImage, handleRegenerate, hasGeneratedContent = false })=>{\n    // Use a local state that combines props with local state\n    const [showPlaceholder, setShowPlaceholder] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    // Update placeholder visibility when loading or content prop changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"DisplayCanvas.useEffect\": ()=>{\n            if (hasGeneratedContent) {\n                setShowPlaceholder(false);\n            } else if (isLoading) {\n                setShowPlaceholder(true);\n            }\n        }\n    }[\"DisplayCanvas.useEffect\"], [\n        isLoading,\n        hasGeneratedContent\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"relative\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute top-4 right-4 z-10\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ActionBar__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                    handleSaveImage: handleSaveImage,\n                    handleRegenerate: handleRegenerate\n                }, void 0, false, {\n                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/DisplayCanvas.js\",\n                    lineNumber: 28,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/DisplayCanvas.js\",\n                lineNumber: 27,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"canvas\", {\n                ref: displayCanvasRef,\n                width: 960,\n                height: 540,\n                className: \"border border-gray-300 w-full sm:h-[60vh] h-[30vh] min-h-[320px] bg-white rounded-xl shadow-soft\",\n                \"aria-label\": \"Generated image canvas\"\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/DisplayCanvas.js\",\n                lineNumber: 34,\n                columnNumber: 7\n            }, undefined),\n            isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 flex items-center justify-center bg-black/5 rounded-xl\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-white/90 rounded-full p-3 shadow-medium\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_LoaderCircle_lucide_react__WEBPACK_IMPORTED_MODULE_3__.LoaderCircle, {\n                        className: \"w-8 h-8 animate-spin text-gray-700\"\n                    }, void 0, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/DisplayCanvas.js\",\n                        lineNumber: 46,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/DisplayCanvas.js\",\n                    lineNumber: 45,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/DisplayCanvas.js\",\n                lineNumber: 44,\n                columnNumber: 9\n            }, undefined),\n            showPlaceholder && !isLoading && !hasGeneratedContent && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 flex flex-col items-center justify-center pointer-events-none\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_LoaderCircle_lucide_react__WEBPACK_IMPORTED_MODULE_3__.ImageIcon, {\n                        className: \"w-12 h-12 text-gray-300 mb-3\"\n                    }, void 0, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/DisplayCanvas.js\",\n                        lineNumber: 54,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-500 text-xl font-medium\",\n                        children: \"Generation will appear here\"\n                    }, void 0, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/DisplayCanvas.js\",\n                        lineNumber: 55,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/DisplayCanvas.js\",\n                lineNumber: 53,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/DisplayCanvas.js\",\n        lineNumber: 25,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DisplayCanvas);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvRGlzcGxheUNhbnZhcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF1RDtBQUNYO0FBQ1I7QUFFcEMsTUFBTUssZ0JBQWdCLENBQUMsRUFDckJDLGdCQUFnQixFQUNoQkMsU0FBUyxFQUNUQyxlQUFlLEVBQ2ZDLGdCQUFnQixFQUNoQkMsc0JBQXNCLEtBQUssRUFDNUI7SUFDQyx5REFBeUQ7SUFDekQsTUFBTSxDQUFDQyxpQkFBaUJDLG1CQUFtQixHQUFHVCwrQ0FBUUEsQ0FBQztJQUV2RCxxRUFBcUU7SUFDckVELGdEQUFTQTttQ0FBQztZQUNSLElBQUlRLHFCQUFxQjtnQkFDdkJFLG1CQUFtQjtZQUNyQixPQUFPLElBQUlMLFdBQVc7Z0JBQ3BCSyxtQkFBbUI7WUFDckI7UUFDRjtrQ0FBRztRQUFDTDtRQUFXRztLQUFvQjtJQUVuQyxxQkFDRSw4REFBQ0c7UUFBSUMsV0FBVTs7MEJBRWIsOERBQUNEO2dCQUFJQyxXQUFVOzBCQUNiLDRFQUFDVixrREFBU0E7b0JBQ1JJLGlCQUFpQkE7b0JBQ2pCQyxrQkFBa0JBOzs7Ozs7Ozs7OzswQkFJdEIsOERBQUNNO2dCQUNDQyxLQUFLVjtnQkFDTFcsT0FBTztnQkFDUEMsUUFBUTtnQkFDUkosV0FBVTtnQkFDVkssY0FBVzs7Ozs7O1lBSVpaLDJCQUNDLDhEQUFDTTtnQkFBSUMsV0FBVTswQkFDYiw0RUFBQ0Q7b0JBQUlDLFdBQVU7OEJBQ2IsNEVBQUNkLG9HQUFZQTt3QkFBQ2MsV0FBVTs7Ozs7Ozs7Ozs7Ozs7OztZQU03QkgsbUJBQW1CLENBQUNKLGFBQWEsQ0FBQ0cscUNBQ2pDLDhEQUFDRztnQkFBSUMsV0FBVTs7a0NBQ2IsOERBQUNiLGlHQUFTQTt3QkFBQ2EsV0FBVTs7Ozs7O2tDQUNyQiw4REFBQ007d0JBQUVOLFdBQVU7a0NBQW9DOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLM0Q7QUFFQSxpRUFBZVQsYUFBYUEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3RydWR5cC9EZXNrdG9wL2Rldi1nZW1pbmktMi4wL2NvbXBvbmVudHMvRGlzcGxheUNhbnZhcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMb2FkZXJDaXJjbGUsIEltYWdlSWNvbiB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IEFjdGlvbkJhciBmcm9tICcuL0FjdGlvbkJhcic7XG5cbmNvbnN0IERpc3BsYXlDYW52YXMgPSAoeyBcbiAgZGlzcGxheUNhbnZhc1JlZiwgXG4gIGlzTG9hZGluZyxcbiAgaGFuZGxlU2F2ZUltYWdlLFxuICBoYW5kbGVSZWdlbmVyYXRlLFxuICBoYXNHZW5lcmF0ZWRDb250ZW50ID0gZmFsc2Vcbn0pID0+IHtcbiAgLy8gVXNlIGEgbG9jYWwgc3RhdGUgdGhhdCBjb21iaW5lcyBwcm9wcyB3aXRoIGxvY2FsIHN0YXRlXG4gIGNvbnN0IFtzaG93UGxhY2Vob2xkZXIsIHNldFNob3dQbGFjZWhvbGRlcl0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgXG4gIC8vIFVwZGF0ZSBwbGFjZWhvbGRlciB2aXNpYmlsaXR5IHdoZW4gbG9hZGluZyBvciBjb250ZW50IHByb3AgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChoYXNHZW5lcmF0ZWRDb250ZW50KSB7XG4gICAgICBzZXRTaG93UGxhY2Vob2xkZXIoZmFsc2UpO1xuICAgIH0gZWxzZSBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICBzZXRTaG93UGxhY2Vob2xkZXIodHJ1ZSk7XG4gICAgfVxuICB9LCBbaXNMb2FkaW5nLCBoYXNHZW5lcmF0ZWRDb250ZW50XSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XG4gICAgICB7LyogQWN0aW9uQmFyIGNvbXBvbmVudCAtIHBvc2l0aW9uZWQgaW4gdGhlIHRvcCByaWdodCAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTQgcmlnaHQtNCB6LTEwXCI+XG4gICAgICAgIDxBY3Rpb25CYXJcbiAgICAgICAgICBoYW5kbGVTYXZlSW1hZ2U9e2hhbmRsZVNhdmVJbWFnZX1cbiAgICAgICAgICBoYW5kbGVSZWdlbmVyYXRlPXtoYW5kbGVSZWdlbmVyYXRlfVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxjYW52YXNcbiAgICAgICAgcmVmPXtkaXNwbGF5Q2FudmFzUmVmfVxuICAgICAgICB3aWR0aD17OTYwfVxuICAgICAgICBoZWlnaHQ9ezU0MH1cbiAgICAgICAgY2xhc3NOYW1lPVwiYm9yZGVyIGJvcmRlci1ncmF5LTMwMCB3LWZ1bGwgc206aC1bNjB2aF0gaC1bMzB2aF0gbWluLWgtWzMyMHB4XSBiZy13aGl0ZSByb3VuZGVkLXhsIHNoYWRvdy1zb2Z0XCJcbiAgICAgICAgYXJpYS1sYWJlbD1cIkdlbmVyYXRlZCBpbWFnZSBjYW52YXNcIlxuICAgICAgLz5cbiAgICAgIFxuICAgICAgey8qIExvYWRpbmcgb3ZlcmxheSAqL31cbiAgICAgIHtpc0xvYWRpbmcgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctYmxhY2svNSByb3VuZGVkLXhsXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZS85MCByb3VuZGVkLWZ1bGwgcC0zIHNoYWRvdy1tZWRpdW1cIj5cbiAgICAgICAgICAgIDxMb2FkZXJDaXJjbGUgY2xhc3NOYW1lPVwidy04IGgtOCBhbmltYXRlLXNwaW4gdGV4dC1ncmF5LTcwMFwiIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIFxuICAgICAgey8qIFBsYWNlaG9sZGVyIG92ZXJsYXkgLSBvbmx5IHNob3cgd2hlbiBub3QgbG9hZGluZyBhbmQgbm8gY29udGVudCBoYXMgYmVlbiBnZW5lcmF0ZWQgKi99XG4gICAgICB7c2hvd1BsYWNlaG9sZGVyICYmICFpc0xvYWRpbmcgJiYgIWhhc0dlbmVyYXRlZENvbnRlbnQgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcG9pbnRlci1ldmVudHMtbm9uZVwiPlxuICAgICAgICAgIDxJbWFnZUljb24gY2xhc3NOYW1lPVwidy0xMiBoLTEyIHRleHQtZ3JheS0zMDAgbWItM1wiIC8+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMCB0ZXh0LXhsIGZvbnQtbWVkaXVtXCI+R2VuZXJhdGlvbiB3aWxsIGFwcGVhciBoZXJlPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBEaXNwbGF5Q2FudmFzOyAiXSwibmFtZXMiOlsiTG9hZGVyQ2lyY2xlIiwiSW1hZ2VJY29uIiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJBY3Rpb25CYXIiLCJEaXNwbGF5Q2FudmFzIiwiZGlzcGxheUNhbnZhc1JlZiIsImlzTG9hZGluZyIsImhhbmRsZVNhdmVJbWFnZSIsImhhbmRsZVJlZ2VuZXJhdGUiLCJoYXNHZW5lcmF0ZWRDb250ZW50Iiwic2hvd1BsYWNlaG9sZGVyIiwic2V0U2hvd1BsYWNlaG9sZGVyIiwiZGl2IiwiY2xhc3NOYW1lIiwiY2FudmFzIiwicmVmIiwid2lkdGgiLCJoZWlnaHQiLCJhcmlhLWxhYmVsIiwicCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/DisplayCanvas.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/ErrorModal.js":
/*!**********************************!*\
  !*** ./components/ErrorModal.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _barrel_optimize_names_X_lucide_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! __barrel_optimize__?names=X!=!lucide-react */ \"(pages-dir-node)/__barrel_optimize__?names=X!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\n\n\nconst ErrorModal = ({ showErrorModal, closeErrorModal, customApiKey, setCustomApiKey, handleApiKeySubmit })=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: showErrorModal && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"fixed inset-0 bg-black/30 flex items-center justify-center z-50\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-white p-6 rounded-xl shadow-medium max-w-md w-full mx-4\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex flex-col gap-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center justify-between\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                    className: \"text-xl font-medium text-gray-800\",\n                                    children: \"API Quota Exceeded\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                                    lineNumber: 17,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"button\",\n                                    onClick: closeErrorModal,\n                                    className: \"text-gray-500 hover:text-gray-700\",\n                                    \"aria-label\": \"Close\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_X_lucide_react__WEBPACK_IMPORTED_MODULE_1__.X, {\n                                        className: \"w-5 h-5\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                                        lineNumber: 24,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                                    lineNumber: 18,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                            lineNumber: 16,\n                            columnNumber: 15\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-gray-600\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"mb-2\",\n                                    children: \"You've exceeded your API quota. You can:\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                                    lineNumber: 29,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n                                    className: \"list-disc ml-5 mb-4 space-y-1 text-gray-600\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                            children: \"Wait for your quota to reset\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                                            lineNumber: 33,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                            children: \"Use your own API key\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                                            lineNumber: 34,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                                    lineNumber: 32,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                            lineNumber: 28,\n                            columnNumber: 15\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                            onSubmit: handleApiKeySubmit,\n                            className: \"space-y-3\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            htmlFor: \"apiKey\",\n                                            className: \"block text-sm font-medium text-gray-700 mb-1\",\n                                            children: \"Your Gemini API Key\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                                            lineNumber: 40,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            id: \"apiKey\",\n                                            type: \"password\",\n                                            placeholder: \"Enter your Gemini API key\",\n                                            value: customApiKey,\n                                            onChange: (e)=>setCustomApiKey(e.target.value),\n                                            className: \"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-transparent\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                                            lineNumber: 46,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                                    lineNumber: 39,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex justify-end gap-3 pt-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            type: \"button\",\n                                            onClick: closeErrorModal,\n                                            className: \"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors\",\n                                            children: \"Cancel\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                                            lineNumber: 56,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            type: \"submit\",\n                                            className: \"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-800 transition-colors\",\n                                            children: \"Use My Key\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                                            lineNumber: 63,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                                    lineNumber: 55,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                            lineNumber: 38,\n                            columnNumber: 15\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                    lineNumber: 15,\n                    columnNumber: 13\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n                lineNumber: 14,\n                columnNumber: 11\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ErrorModal.js\",\n            lineNumber: 13,\n            columnNumber: 9\n        }, undefined)\n    }, void 0, false);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ErrorModal);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvRXJyb3JNb2RhbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFpQztBQUVqQyxNQUFNQyxhQUFhLENBQUMsRUFDbEJDLGNBQWMsRUFDZEMsZUFBZSxFQUNmQyxZQUFZLEVBQ1pDLGVBQWUsRUFDZkMsa0JBQWtCLEVBQ25CO0lBQ0MscUJBQ0U7a0JBQ0dKLGdDQUNDLDhEQUFDSztZQUFJQyxXQUFVO3NCQUNiLDRFQUFDRDtnQkFBSUMsV0FBVTswQkFDYiw0RUFBQ0Q7b0JBQUlDLFdBQVU7O3NDQUNiLDhEQUFDRDs0QkFBSUMsV0FBVTs7OENBQ2IsOERBQUNDO29DQUFHRCxXQUFVOzhDQUFvQzs7Ozs7OzhDQUNsRCw4REFBQ0U7b0NBQ0NDLE1BQUs7b0NBQ0xDLFNBQVNUO29DQUNUSyxXQUFVO29DQUNWSyxjQUFXOzhDQUVYLDRFQUFDYixvRUFBQ0E7d0NBQUNRLFdBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7O3NDQUlqQiw4REFBQ0Q7NEJBQUlDLFdBQVU7OzhDQUNiLDhEQUFDTTtvQ0FBRU4sV0FBVTs4Q0FBTzs7Ozs7OzhDQUdwQiw4REFBQ087b0NBQUdQLFdBQVU7O3NEQUNaLDhEQUFDUTtzREFBRzs7Ozs7O3NEQUNKLDhEQUFDQTtzREFBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NDQUlSLDhEQUFDQzs0QkFBS0MsVUFBVVo7NEJBQW9CRSxXQUFVOzs4Q0FDNUMsOERBQUNEOztzREFDQyw4REFBQ1k7NENBQ0NDLFNBQVE7NENBQ1JaLFdBQVU7c0RBQ1g7Ozs7OztzREFHRCw4REFBQ2E7NENBQ0NDLElBQUc7NENBQ0hYLE1BQUs7NENBQ0xZLGFBQVk7NENBQ1pDLE9BQU9wQjs0Q0FDUHFCLFVBQVUsQ0FBQ0MsSUFBTXJCLGdCQUFnQnFCLEVBQUVDLE1BQU0sQ0FBQ0gsS0FBSzs0Q0FDL0NoQixXQUFVOzs7Ozs7Ozs7Ozs7OENBR2QsOERBQUNEO29DQUFJQyxXQUFVOztzREFDYiw4REFBQ0U7NENBQ0NDLE1BQUs7NENBQ0xDLFNBQVNUOzRDQUNUSyxXQUFVO3NEQUNYOzs7Ozs7c0RBR0QsOERBQUNFOzRDQUNDQyxNQUFLOzRDQUNMSCxXQUFVO3NEQUNYOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVduQjtBQUVBLGlFQUFlUCxVQUFVQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvdHJ1ZHlwL0Rlc2t0b3AvZGV2LWdlbWluaS0yLjAvY29tcG9uZW50cy9FcnJvck1vZGFsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFggfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuXG5jb25zdCBFcnJvck1vZGFsID0gKHsgXG4gIHNob3dFcnJvck1vZGFsLCBcbiAgY2xvc2VFcnJvck1vZGFsLCBcbiAgY3VzdG9tQXBpS2V5LCBcbiAgc2V0Q3VzdG9tQXBpS2V5LCBcbiAgaGFuZGxlQXBpS2V5U3VibWl0IFxufSkgPT4ge1xuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7c2hvd0Vycm9yTW9kYWwgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgYmctYmxhY2svMzAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgei01MFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcC02IHJvdW5kZWQteGwgc2hhZG93LW1lZGl1bSBtYXgtdy1tZCB3LWZ1bGwgbXgtNFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGdhcC00XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTgwMFwiPkFQSSBRdW90YSBFeGNlZWRlZDwvaDI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17Y2xvc2VFcnJvck1vZGFsfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMCBob3Zlcjp0ZXh0LWdyYXktNzAwXCJcbiAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJDbG9zZVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPFggY2xhc3NOYW1lPVwidy01IGgtNVwiIC8+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNjAwXCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMlwiPlxuICAgICAgICAgICAgICAgICAgWW91J3ZlIGV4Y2VlZGVkIHlvdXIgQVBJIHF1b3RhLiBZb3UgY2FuOlxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwibGlzdC1kaXNjIG1sLTUgbWItNCBzcGFjZS15LTEgdGV4dC1ncmF5LTYwMFwiPlxuICAgICAgICAgICAgICAgICAgPGxpPldhaXQgZm9yIHlvdXIgcXVvdGEgdG8gcmVzZXQ8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPlVzZSB5b3VyIG93biBBUEkga2V5PC9saT5cbiAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVBcGlLZXlTdWJtaXR9IGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICA8bGFiZWwgXG4gICAgICAgICAgICAgICAgICAgIGh0bWxGb3I9XCJhcGlLZXlcIiBcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTFcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBZb3VyIEdlbWluaSBBUEkgS2V5XG4gICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIGlkPVwiYXBpS2V5XCJcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cInBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciB5b3VyIEdlbWluaSBBUEkga2V5XCJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2N1c3RvbUFwaUtleX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRDdXN0b21BcGlLZXkoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcHgtMyBweS0yIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWdyYXktNDAwIGZvY3VzOmJvcmRlci10cmFuc3BhcmVudFwiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWVuZCBnYXAtMyBwdC0yXCI+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtjbG9zZUVycm9yTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTQgcHktMiBiZy1ncmF5LTIwMCB0ZXh0LWdyYXktNzAwIHJvdW5kZWQtbGcgaG92ZXI6YmctZ3JheS0zMDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBDYW5jZWxcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJnLWdyYXktNzAwIHRleHQtd2hpdGUgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmF5LTgwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIFVzZSBNeSBLZXlcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRXJyb3JNb2RhbDsgIl0sIm5hbWVzIjpbIlgiLCJFcnJvck1vZGFsIiwic2hvd0Vycm9yTW9kYWwiLCJjbG9zZUVycm9yTW9kYWwiLCJjdXN0b21BcGlLZXkiLCJzZXRDdXN0b21BcGlLZXkiLCJoYW5kbGVBcGlLZXlTdWJtaXQiLCJkaXYiLCJjbGFzc05hbWUiLCJoMiIsImJ1dHRvbiIsInR5cGUiLCJvbkNsaWNrIiwiYXJpYS1sYWJlbCIsInAiLCJ1bCIsImxpIiwiZm9ybSIsIm9uU3VibWl0IiwibGFiZWwiLCJodG1sRm9yIiwiaW5wdXQiLCJpZCIsInBsYWNlaG9sZGVyIiwidmFsdWUiLCJvbkNoYW5nZSIsImUiLCJ0YXJnZXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/ErrorModal.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/Header.js":
/*!******************************!*\
  !*** ./components/Header.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n\nconst Header = ()=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n        className: \"w-full flex items-center justify-between\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col items-start gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                        className: \"text-2xl font-medium text-gray-800\",\n                        children: \"Material Exploration\"\n                    }, void 0, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Header.js\",\n                        lineNumber: 5,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        children: [\n                            \"By \",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                href: \"https://www.instagram.com/devethanvalladares/?hl=en/\",\n                                className: \"text-gray-600 underline hover:text-gray-800\",\n                                children: \"Dev Valladres\"\n                            }, void 0, false, {\n                                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Header.js\",\n                                lineNumber: 8,\n                                columnNumber: 14\n                            }, undefined),\n                            \" \",\n                            \"and \",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                href: \"https://x.com/trudypainter\",\n                                className: \"text-gray-600 underline hover:text-gray-800\",\n                                children: \"Trudy Painter\"\n                            }, void 0, false, {\n                                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Header.js\",\n                                lineNumber: 9,\n                                columnNumber: 20\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Header.js\",\n                        lineNumber: 7,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Header.js\",\n                lineNumber: 4,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-sm text-gray-500\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"text-sm text-gray-600 bg-gray-200 px-4 py-2 rounded-full\",\n                    children: \"Using Gemini 2.0 Native Image Generation\"\n                }, void 0, false, {\n                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Header.js\",\n                    lineNumber: 13,\n                    columnNumber: 7\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Header.js\",\n                lineNumber: 12,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/Header.js\",\n        lineNumber: 3,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Header);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvSGVhZGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxNQUFNQSxTQUFTO0lBQ2IscUJBQ0UsOERBQUNDO1FBQU9DLFdBQVU7OzBCQUNoQiw4REFBQ0M7Z0JBQUlELFdBQVU7O2tDQUNiLDhEQUFDRTt3QkFBR0YsV0FBVTtrQ0FBcUM7Ozs7OztrQ0FFbkQsOERBQUNHOzs0QkFBRTswQ0FDRSw4REFBQ0M7Z0NBQUVDLE1BQUs7Z0NBQXVETCxXQUFVOzBDQUE4Qzs7Ozs7OzRCQUN6SDs0QkFBSTswQ0FBSSw4REFBQ0k7Z0NBQUVDLE1BQUs7Z0NBQTZCTCxXQUFVOzBDQUE4Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQUcxRyw4REFBQ0M7Z0JBQUlELFdBQVU7MEJBQ2YsNEVBQUNNO29CQUFLTixXQUFVOzhCQUEyRDs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJakY7QUFFQSxpRUFBZUYsTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3RydWR5cC9EZXNrdG9wL2Rldi1nZW1pbmktMi4wL2NvbXBvbmVudHMvSGVhZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEhlYWRlciA9ICgpID0+IHtcbiAgcmV0dXJuIChcbiAgICA8aGVhZGVyIGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1zdGFydCBnYXAtMlwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTgwMFwiPk1hdGVyaWFsIEV4cGxvcmF0aW9uPC9oMT5cbiAgICAgICAgXG4gICAgICAgIDxwPlxuICAgICAgICAgIEJ5IDxhIGhyZWY9XCJodHRwczovL3d3dy5pbnN0YWdyYW0uY29tL2RldmV0aGFudmFsbGFkYXJlcy8/aGw9ZW4vXCIgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTYwMCB1bmRlcmxpbmUgaG92ZXI6dGV4dC1ncmF5LTgwMFwiPkRldiBWYWxsYWRyZXM8L2E+IFxuICAgICAgICAgIHtcIiBcIn1hbmQgPGEgaHJlZj1cImh0dHBzOi8veC5jb20vdHJ1ZHlwYWludGVyXCIgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTYwMCB1bmRlcmxpbmUgaG92ZXI6dGV4dC1ncmF5LTgwMFwiPlRydWR5IFBhaW50ZXI8L2E+XG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cbiAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTYwMCBiZy1ncmF5LTIwMCBweC00IHB5LTIgcm91bmRlZC1mdWxsXCI+VXNpbmcgR2VtaW5pIDIuMCBOYXRpdmUgSW1hZ2UgR2VuZXJhdGlvbjwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvaGVhZGVyPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgSGVhZGVyOyAiXSwibmFtZXMiOlsiSGVhZGVyIiwiaGVhZGVyIiwiY2xhc3NOYW1lIiwiZGl2IiwiaDEiLCJwIiwiYSIsImhyZWYiLCJzcGFuIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/Header.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/StyleSelector.js":
/*!*************************************!*\
  !*** ./components/StyleSelector.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getPromptForStyle: () => (/* binding */ getPromptForStyle),\n/* harmony export */   styleOptions: () => (/* binding */ styleOptions)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n\n\n// Define style options with display names and prompts\nconst styleOptions = {\n    material: {\n        name: \"Chrome\",\n        file: \"chrome.png\",\n        prompt: \"Recreate this doodle as a physical chrome sculpture made of a chromium metal tubes or pipes in a professional studio setting. If it is typography, render it accordingly, but always always have a black background and studio lighting. Render it in Cinema 4D with Octane, using studio lighting against a pure black background. Make it look like a high-end product rendering of a sculptural piece. Flat Black background always\"\n    },\n    honey: {\n        name: \"Honey\",\n        file: \"honey.png\",\n        prompt: \"Transform this sketch into a honey-like substance. Render it as if made entirely of translucent, golden honey with characteristic viscous drips and flows. Add realistic liquid properties including surface tension, reflections, and light refraction. Use studio lighting to highlight the amber tones and glossy surface against a black background. Make it appear as if captured in a high-end commercial photography setup.\"\n    },\n    softbody: {\n        name: \"Soft Body\",\n        file: \"softbody.png\",\n        prompt: \"Convert this drawing / text into a soft body physics render. Render it as if made of a soft, jelly-like material that responds to gravity and motion. Add realistic deformation, bounce, and squash effects typical of soft body dynamics. Use dramatic lighting against a black background to emphasize the material's translucency and surface properties. Make it look like a high-end 3D animation frame.\"\n    }\n};\n// Function to get prompt based on style mode\nconst getPromptForStyle = (styleMode)=>{\n    return styleOptions[styleMode]?.prompt || styleOptions.material.prompt;\n};\nconst StyleSelector = ({ styleMode, setStyleMode, handleGenerate })=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"w-full\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"overflow-x-auto pb-4 p-4 -translate-x-4\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex space-x-4 min-w-max\",\n                children: Object.entries(styleOptions).map(([key, { name, file }])=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setStyleMode(key),\n                        type: \"button\",\n                        \"aria-label\": `Select ${name} style`,\n                        \"aria-pressed\": styleMode === key,\n                        className: \"focus:outline-none focus:ring-2 focus:ring-gray-400\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: `w-36 border border-gray-300 overflow-hidden rounded-xl transition-all hover:scale-105 hover:cursor-pointer duration-200 ${styleMode === key ? 'scale-105 ring-2 ring-gray-400 shadow-medium' : 'opacity-80 hover:opacity-100'}`,\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative pb-[75%]\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                        src: `/samples/${file}`,\n                                        alt: `${name} style example`,\n                                        className: \"absolute inset-0 w-full h-full object-cover\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/StyleSelector.js\",\n                                        lineNumber: 48,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/StyleSelector.js\",\n                                    lineNumber: 47,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: `px-2 py-1.5 text-center text-sm font-medium ${styleMode === key ? 'bg-gray-800 text-white' : 'bg-gray-100 text-gray-700'}`,\n                                    children: name\n                                }, void 0, false, {\n                                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/StyleSelector.js\",\n                                    lineNumber: 54,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/StyleSelector.js\",\n                            lineNumber: 41,\n                            columnNumber: 15\n                        }, undefined)\n                    }, key, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/StyleSelector.js\",\n                        lineNumber: 33,\n                        columnNumber: 13\n                    }, undefined))\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/StyleSelector.js\",\n                lineNumber: 31,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/StyleSelector.js\",\n            lineNumber: 30,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/StyleSelector.js\",\n        lineNumber: 29,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (StyleSelector);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvU3R5bGVTZWxlY3Rvci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBeUM7QUFFekMsc0RBQXNEO0FBQy9DLE1BQU1DLGVBQWU7SUFDMUJDLFVBQVU7UUFDUkMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLFFBQVE7SUFDVjtJQUNBQyxPQUFPO1FBQ0xILE1BQU07UUFDTkMsTUFBTTtRQUNOQyxRQUFRO0lBQ1Y7SUFDQUUsVUFBVTtRQUNSSixNQUFNO1FBQ05DLE1BQU07UUFDTkMsUUFBUTtJQUNWO0FBQ0YsRUFBRTtBQUVGLDZDQUE2QztBQUN0QyxNQUFNRyxvQkFBb0IsQ0FBQ0M7SUFDaEMsT0FBT1IsWUFBWSxDQUFDUSxVQUFVLEVBQUVKLFVBQVVKLGFBQWFDLFFBQVEsQ0FBQ0csTUFBTTtBQUN4RSxFQUFFO0FBRUYsTUFBTUssZ0JBQWdCLENBQUMsRUFBRUQsU0FBUyxFQUFFRSxZQUFZLEVBQUVDLGNBQWMsRUFBRTtJQUNoRSxxQkFDRSw4REFBQ0M7UUFBSUMsV0FBVTtrQkFDYiw0RUFBQ0Q7WUFBSUMsV0FBVTtzQkFDYiw0RUFBQ0Q7Z0JBQUlDLFdBQVU7MEJBQ1pDLE9BQU9DLE9BQU8sQ0FBQ2YsY0FBY2dCLEdBQUcsQ0FBQyxDQUFDLENBQUNDLEtBQUssRUFBRWYsSUFBSSxFQUFFQyxJQUFJLEVBQUUsQ0FBQyxpQkFDdEQsOERBQUNlO3dCQUVDQyxTQUFTLElBQU1ULGFBQWFPO3dCQUM1QkcsTUFBSzt3QkFDTEMsY0FBWSxDQUFDLE9BQU8sRUFBRW5CLEtBQUssTUFBTSxDQUFDO3dCQUNsQ29CLGdCQUFjZCxjQUFjUzt3QkFDNUJKLFdBQVU7a0NBRVYsNEVBQUNEOzRCQUFJQyxXQUFXLENBQUMsd0hBQXdILEVBQ3ZJTCxjQUFjUyxNQUNWLGlEQUNBLGdDQUNKOzs4Q0FFQSw4REFBQ0w7b0NBQUlDLFdBQVU7OENBQ2IsNEVBQUNVO3dDQUNDQyxLQUFLLENBQUMsU0FBUyxFQUFFckIsTUFBTTt3Q0FDdkJzQixLQUFLLEdBQUd2QixLQUFLLGNBQWMsQ0FBQzt3Q0FDNUJXLFdBQVU7Ozs7Ozs7Ozs7OzhDQUdkLDhEQUFDRDtvQ0FBSUMsV0FBVyxDQUFDLDRDQUE0QyxFQUMzREwsY0FBY1MsTUFBTSwyQkFBMkIsNkJBQy9DOzhDQUNDZjs7Ozs7Ozs7Ozs7O3VCQXZCQWU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBZ0NuQjtBQUVBLGlFQUFlUixhQUFhQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvdHJ1ZHlwL0Rlc2t0b3AvZGV2LWdlbWluaS0yLjAvY29tcG9uZW50cy9TdHlsZVNlbGVjdG9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlZnJlc2hDdyB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5cbi8vIERlZmluZSBzdHlsZSBvcHRpb25zIHdpdGggZGlzcGxheSBuYW1lcyBhbmQgcHJvbXB0c1xuZXhwb3J0IGNvbnN0IHN0eWxlT3B0aW9ucyA9IHtcbiAgbWF0ZXJpYWw6IHtcbiAgICBuYW1lOiBcIkNocm9tZVwiLFxuICAgIGZpbGU6IFwiY2hyb21lLnBuZ1wiLFxuICAgIHByb21wdDogXCJSZWNyZWF0ZSB0aGlzIGRvb2RsZSBhcyBhIHBoeXNpY2FsIGNocm9tZSBzY3VscHR1cmUgbWFkZSBvZiBhIGNocm9taXVtIG1ldGFsIHR1YmVzIG9yIHBpcGVzIGluIGEgcHJvZmVzc2lvbmFsIHN0dWRpbyBzZXR0aW5nLiBJZiBpdCBpcyB0eXBvZ3JhcGh5LCByZW5kZXIgaXQgYWNjb3JkaW5nbHksIGJ1dCBhbHdheXMgYWx3YXlzIGhhdmUgYSBibGFjayBiYWNrZ3JvdW5kIGFuZCBzdHVkaW8gbGlnaHRpbmcuIFJlbmRlciBpdCBpbiBDaW5lbWEgNEQgd2l0aCBPY3RhbmUsIHVzaW5nIHN0dWRpbyBsaWdodGluZyBhZ2FpbnN0IGEgcHVyZSBibGFjayBiYWNrZ3JvdW5kLiBNYWtlIGl0IGxvb2sgbGlrZSBhIGhpZ2gtZW5kIHByb2R1Y3QgcmVuZGVyaW5nIG9mIGEgc2N1bHB0dXJhbCBwaWVjZS4gRmxhdCBCbGFjayBiYWNrZ3JvdW5kIGFsd2F5c1wiXG4gIH0sXG4gIGhvbmV5OiB7XG4gICAgbmFtZTogXCJIb25leVwiLFxuICAgIGZpbGU6IFwiaG9uZXkucG5nXCIsXG4gICAgcHJvbXB0OiBcIlRyYW5zZm9ybSB0aGlzIHNrZXRjaCBpbnRvIGEgaG9uZXktbGlrZSBzdWJzdGFuY2UuIFJlbmRlciBpdCBhcyBpZiBtYWRlIGVudGlyZWx5IG9mIHRyYW5zbHVjZW50LCBnb2xkZW4gaG9uZXkgd2l0aCBjaGFyYWN0ZXJpc3RpYyB2aXNjb3VzIGRyaXBzIGFuZCBmbG93cy4gQWRkIHJlYWxpc3RpYyBsaXF1aWQgcHJvcGVydGllcyBpbmNsdWRpbmcgc3VyZmFjZSB0ZW5zaW9uLCByZWZsZWN0aW9ucywgYW5kIGxpZ2h0IHJlZnJhY3Rpb24uIFVzZSBzdHVkaW8gbGlnaHRpbmcgdG8gaGlnaGxpZ2h0IHRoZSBhbWJlciB0b25lcyBhbmQgZ2xvc3N5IHN1cmZhY2UgYWdhaW5zdCBhIGJsYWNrIGJhY2tncm91bmQuIE1ha2UgaXQgYXBwZWFyIGFzIGlmIGNhcHR1cmVkIGluIGEgaGlnaC1lbmQgY29tbWVyY2lhbCBwaG90b2dyYXBoeSBzZXR1cC5cIlxuICB9LFxuICBzb2Z0Ym9keToge1xuICAgIG5hbWU6IFwiU29mdCBCb2R5XCIsXG4gICAgZmlsZTogXCJzb2Z0Ym9keS5wbmdcIixcbiAgICBwcm9tcHQ6IFwiQ29udmVydCB0aGlzIGRyYXdpbmcgLyB0ZXh0IGludG8gYSBzb2Z0IGJvZHkgcGh5c2ljcyByZW5kZXIuIFJlbmRlciBpdCBhcyBpZiBtYWRlIG9mIGEgc29mdCwgamVsbHktbGlrZSBtYXRlcmlhbCB0aGF0IHJlc3BvbmRzIHRvIGdyYXZpdHkgYW5kIG1vdGlvbi4gQWRkIHJlYWxpc3RpYyBkZWZvcm1hdGlvbiwgYm91bmNlLCBhbmQgc3F1YXNoIGVmZmVjdHMgdHlwaWNhbCBvZiBzb2Z0IGJvZHkgZHluYW1pY3MuIFVzZSBkcmFtYXRpYyBsaWdodGluZyBhZ2FpbnN0IGEgYmxhY2sgYmFja2dyb3VuZCB0byBlbXBoYXNpemUgdGhlIG1hdGVyaWFsJ3MgdHJhbnNsdWNlbmN5IGFuZCBzdXJmYWNlIHByb3BlcnRpZXMuIE1ha2UgaXQgbG9vayBsaWtlIGEgaGlnaC1lbmQgM0QgYW5pbWF0aW9uIGZyYW1lLlwiXG4gIH1cbn07XG5cbi8vIEZ1bmN0aW9uIHRvIGdldCBwcm9tcHQgYmFzZWQgb24gc3R5bGUgbW9kZVxuZXhwb3J0IGNvbnN0IGdldFByb21wdEZvclN0eWxlID0gKHN0eWxlTW9kZSkgPT4ge1xuICByZXR1cm4gc3R5bGVPcHRpb25zW3N0eWxlTW9kZV0/LnByb21wdCB8fCBzdHlsZU9wdGlvbnMubWF0ZXJpYWwucHJvbXB0O1xufTtcblxuY29uc3QgU3R5bGVTZWxlY3RvciA9ICh7IHN0eWxlTW9kZSwgc2V0U3R5bGVNb2RlLCBoYW5kbGVHZW5lcmF0ZSB9KSA9PiB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGxcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3ZlcmZsb3cteC1hdXRvIHBiLTQgcC00IC10cmFuc2xhdGUteC00XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTQgbWluLXctbWF4XCI+XG4gICAgICAgICAge09iamVjdC5lbnRyaWVzKHN0eWxlT3B0aW9ucykubWFwKChba2V5LCB7IG5hbWUsIGZpbGUgfV0pID0+IChcbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAga2V5PXtrZXl9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFN0eWxlTW9kZShrZXkpfVxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD17YFNlbGVjdCAke25hbWV9IHN0eWxlYH1cbiAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtzdHlsZU1vZGUgPT09IGtleX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWdyYXktNDAwXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2B3LTM2IGJvcmRlciBib3JkZXItZ3JheS0zMDAgb3ZlcmZsb3ctaGlkZGVuIHJvdW5kZWQteGwgdHJhbnNpdGlvbi1hbGwgaG92ZXI6c2NhbGUtMTA1IGhvdmVyOmN1cnNvci1wb2ludGVyIGR1cmF0aW9uLTIwMCAke1xuICAgICAgICAgICAgICAgIHN0eWxlTW9kZSA9PT0ga2V5IFxuICAgICAgICAgICAgICAgICAgPyAnc2NhbGUtMTA1IHJpbmctMiByaW5nLWdyYXktNDAwIHNoYWRvdy1tZWRpdW0nIFxuICAgICAgICAgICAgICAgICAgOiAnb3BhY2l0eS04MCBob3ZlcjpvcGFjaXR5LTEwMCdcbiAgICAgICAgICAgICAgfWB9PlxuICAgICAgICAgICAgICAgIHsvKiA0OjMgYXNwZWN0IHJhdGlvIGNvbnRhaW5lciB3aXRoIGltYWdlICovfVxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgcGItWzc1JV1cIj5cbiAgICAgICAgICAgICAgICAgIDxpbWcgXG4gICAgICAgICAgICAgICAgICAgIHNyYz17YC9zYW1wbGVzLyR7ZmlsZX1gfVxuICAgICAgICAgICAgICAgICAgICBhbHQ9e2Ake25hbWV9IHN0eWxlIGV4YW1wbGVgfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIHctZnVsbCBoLWZ1bGwgb2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BweC0yIHB5LTEuNSB0ZXh0LWNlbnRlciB0ZXh0LXNtIGZvbnQtbWVkaXVtICR7XG4gICAgICAgICAgICAgICAgICBzdHlsZU1vZGUgPT09IGtleSA/ICdiZy1ncmF5LTgwMCB0ZXh0LXdoaXRlJyA6ICdiZy1ncmF5LTEwMCB0ZXh0LWdyYXktNzAwJ1xuICAgICAgICAgICAgICAgIH1gfT5cbiAgICAgICAgICAgICAgICAgIHtuYW1lfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU3R5bGVTZWxlY3RvcjsgIl0sIm5hbWVzIjpbIlJlZnJlc2hDdyIsInN0eWxlT3B0aW9ucyIsIm1hdGVyaWFsIiwibmFtZSIsImZpbGUiLCJwcm9tcHQiLCJob25leSIsInNvZnRib2R5IiwiZ2V0UHJvbXB0Rm9yU3R5bGUiLCJzdHlsZU1vZGUiLCJTdHlsZVNlbGVjdG9yIiwic2V0U3R5bGVNb2RlIiwiaGFuZGxlR2VuZXJhdGUiLCJkaXYiLCJjbGFzc05hbWUiLCJPYmplY3QiLCJlbnRyaWVzIiwibWFwIiwia2V5IiwiYnV0dG9uIiwib25DbGljayIsInR5cGUiLCJhcmlhLWxhYmVsIiwiYXJpYS1wcmVzc2VkIiwiaW1nIiwic3JjIiwiYWx0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/StyleSelector.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/TextInput.js":
/*!*********************************!*\
  !*** ./components/TextInput.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst TextInput = ({ isTyping, textInputRef, textInput, setTextInput, handleTextInput, textPosition })=>{\n    if (!isTyping) {\n        return null;\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"absolute z-50 bg-white border border-gray-300 rounded-lg shadow-medium p-2\",\n        style: {\n            top: textPosition.y,\n            left: textPosition.x,\n            transform: 'translateY(-100%)'\n        },\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n            ref: textInputRef,\n            type: \"text\",\n            value: textInput,\n            onChange: (e)=>setTextInput(e.target.value),\n            onKeyDown: handleTextInput,\n            placeholder: \"Type text...\",\n            className: \"w-full p-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-400\",\n            \"aria-label\": \"Text input for canvas\"\n        }, void 0, false, {\n            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/TextInput.js\",\n            lineNumber: 24,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/TextInput.js\",\n        lineNumber: 16,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TextInput);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvVGV4dElucHV0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEwQztBQUUxQyxNQUFNRSxZQUFZLENBQUMsRUFDakJDLFFBQVEsRUFDUkMsWUFBWSxFQUNaQyxTQUFTLEVBQ1RDLFlBQVksRUFDWkMsZUFBZSxFQUNmQyxZQUFZLEVBQ2I7SUFDQyxJQUFJLENBQUNMLFVBQVU7UUFDYixPQUFPO0lBQ1Q7SUFFQSxxQkFDRSw4REFBQ007UUFDQ0MsV0FBVTtRQUNWQyxPQUFPO1lBQ0xDLEtBQUtKLGFBQWFLLENBQUM7WUFDbkJDLE1BQU1OLGFBQWFPLENBQUM7WUFDcEJDLFdBQVc7UUFDYjtrQkFFQSw0RUFBQ0M7WUFDQ0MsS0FBS2Q7WUFDTGUsTUFBSztZQUNMQyxPQUFPZjtZQUNQZ0IsVUFBVSxDQUFDQyxJQUFNaEIsYUFBYWdCLEVBQUVDLE1BQU0sQ0FBQ0gsS0FBSztZQUM1Q0ksV0FBV2pCO1lBQ1hrQixhQUFZO1lBQ1pmLFdBQVU7WUFDVmdCLGNBQVc7Ozs7Ozs7Ozs7O0FBSW5CO0FBRUEsaUVBQWV4QixTQUFTQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvdHJ1ZHlwL0Rlc2t0b3AvZGV2LWdlbWluaS0yLjAvY29tcG9uZW50cy9UZXh0SW5wdXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IFRleHRJbnB1dCA9ICh7IFxuICBpc1R5cGluZywgXG4gIHRleHRJbnB1dFJlZiwgXG4gIHRleHRJbnB1dCwgXG4gIHNldFRleHRJbnB1dCwgXG4gIGhhbmRsZVRleHRJbnB1dCwgXG4gIHRleHRQb3NpdGlvbiBcbn0pID0+IHtcbiAgaWYgKCFpc1R5cGluZykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIFxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHotNTAgYmctd2hpdGUgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1tZWRpdW0gcC0yXCJcbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHRvcDogdGV4dFBvc2l0aW9uLnksXG4gICAgICAgIGxlZnQ6IHRleHRQb3NpdGlvbi54LFxuICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKC0xMDAlKSdcbiAgICAgIH19XG4gICAgPlxuICAgICAgPGlucHV0XG4gICAgICAgIHJlZj17dGV4dElucHV0UmVmfVxuICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgIHZhbHVlPXt0ZXh0SW5wdXR9XG4gICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0VGV4dElucHV0KGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgb25LZXlEb3duPXtoYW5kbGVUZXh0SW5wdXR9XG4gICAgICAgIHBsYWNlaG9sZGVyPVwiVHlwZSB0ZXh0Li4uXCJcbiAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHAtMiBiZy1ncmF5LTUwIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZC1sZyB0ZXh0LWdyYXktODAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ncmF5LTQwMFwiXG4gICAgICAgIGFyaWEtbGFiZWw9XCJUZXh0IGlucHV0IGZvciBjYW52YXNcIlxuICAgICAgLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRleHRJbnB1dDsgIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVJlZiIsIlRleHRJbnB1dCIsImlzVHlwaW5nIiwidGV4dElucHV0UmVmIiwidGV4dElucHV0Iiwic2V0VGV4dElucHV0IiwiaGFuZGxlVGV4dElucHV0IiwidGV4dFBvc2l0aW9uIiwiZGl2IiwiY2xhc3NOYW1lIiwic3R5bGUiLCJ0b3AiLCJ5IiwibGVmdCIsIngiLCJ0cmFuc2Zvcm0iLCJpbnB1dCIsInJlZiIsInR5cGUiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwiZSIsInRhcmdldCIsIm9uS2V5RG93biIsInBsYWNlaG9sZGVyIiwiYXJpYS1sYWJlbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/TextInput.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/ToolBar.js":
/*!*******************************!*\
  !*** ./components/ToolBar.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _barrel_optimize_names_Eraser_PenLine_Pencil_Trash2_Type_Undo_lucide_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! __barrel_optimize__?names=Eraser,PenLine,Pencil,Trash2,Type,Undo!=!lucide-react */ \"(pages-dir-node)/__barrel_optimize__?names=Eraser,PenLine,Pencil,Trash2,Type,Undo!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\n\n\nconst ToolBar = ({ currentTool, setCurrentTool, handleUndo, clearCanvas })=>{\n    const tools = [\n        {\n            id: \"pencil\",\n            label: \"Pencil\",\n            icon: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Eraser_PenLine_Pencil_Trash2_Type_Undo_lucide_react__WEBPACK_IMPORTED_MODULE_1__.Pencil, {\n                className: \"w-4 h-4\"\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ToolBar.js\",\n                lineNumber: 8,\n                columnNumber: 13\n            }, undefined)\n        },\n        // {\n        //   id: \"pen\",\n        //   label: \"Pen\",\n        //   icon: <PenLine className=\"w-4 h-4\" />,\n        // },\n        {\n            id: \"eraser\",\n            label: \"Eraser\",\n            icon: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Eraser_PenLine_Pencil_Trash2_Type_Undo_lucide_react__WEBPACK_IMPORTED_MODULE_1__.Eraser, {\n                className: \"w-4 h-4\"\n            }, void 0, false, {\n                fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ToolBar.js\",\n                lineNumber: 18,\n                columnNumber: 13\n            }, undefined)\n        }\n    ];\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex justify-end mb-4\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"menu\", {\n            className: \"flex items-center bg-gray-200 rounded-full p-2 shadow-soft gap-2\",\n            children: [\n                tools.map((tool)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        type: \"button\",\n                        onClick: ()=>setCurrentTool(tool.id),\n                        className: `w-10 h-10 rounded-full flex items-center justify-center ${currentTool === tool.id ? \"bg-gray-700 text-white\" : \"bg-white text-gray-600 hover:bg-gray-50\"} shadow-soft transition-all hover:scale-110`,\n                        \"aria-label\": tool.label,\n                        \"aria-pressed\": currentTool === tool.id,\n                        children: tool.icon\n                    }, tool.id, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ToolBar.js\",\n                        lineNumber: 31,\n                        columnNumber: 11\n                    }, undefined)),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    type: \"button\",\n                    onClick: handleUndo,\n                    className: \"w-10 h-10 rounded-full flex items-center justify-center bg-white text-gray-600 shadow-soft transition-all hover:scale-110 hover:bg-gray-50\",\n                    \"aria-label\": \"Undo\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Eraser_PenLine_Pencil_Trash2_Type_Undo_lucide_react__WEBPACK_IMPORTED_MODULE_1__.Undo, {\n                        className: \"w-4 h-4\"\n                    }, void 0, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ToolBar.js\",\n                        lineNumber: 55,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ToolBar.js\",\n                    lineNumber: 49,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    type: \"button\",\n                    onClick: clearCanvas,\n                    className: \"w-10 h-10 rounded-full flex items-center justify-center bg-white text-gray-600 shadow-soft transition-all hover:scale-110 hover:bg-gray-50\",\n                    \"aria-label\": \"Clear Canvas\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Eraser_PenLine_Pencil_Trash2_Type_Undo_lucide_react__WEBPACK_IMPORTED_MODULE_1__.Trash2, {\n                        className: \"w-4 h-4\"\n                    }, void 0, false, {\n                        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ToolBar.js\",\n                        lineNumber: 64,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ToolBar.js\",\n                    lineNumber: 58,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ToolBar.js\",\n            lineNumber: 29,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/trudyp/Desktop/dev-gemini-2.0/components/ToolBar.js\",\n        lineNumber: 28,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ToolBar);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvVG9vbEJhci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEyRTtBQUUzRSxNQUFNTSxVQUFVLENBQUMsRUFBRUMsV0FBVyxFQUFFQyxjQUFjLEVBQUVDLFVBQVUsRUFBRUMsV0FBVyxFQUFFO0lBQ3ZFLE1BQU1DLFFBQVE7UUFDWjtZQUNFQyxJQUFJO1lBQ0pDLE9BQU87WUFDUEMsb0JBQU0sOERBQUNkLDhHQUFNQTtnQkFBQ2UsV0FBVTs7Ozs7O1FBQzFCO1FBQ0EsSUFBSTtRQUNKLGVBQWU7UUFDZixrQkFBa0I7UUFDbEIsMkNBQTJDO1FBQzNDLEtBQUs7UUFDTDtZQUNFSCxJQUFJO1lBQ0pDLE9BQU87WUFDUEMsb0JBQU0sOERBQUNiLDhHQUFNQTtnQkFBQ2MsV0FBVTs7Ozs7O1FBQzFCO0tBTUQ7SUFFRCxxQkFDRSw4REFBQ0M7UUFBSUQsV0FBVTtrQkFDYiw0RUFBQ0U7WUFBS0YsV0FBVTs7Z0JBQ2JKLE1BQU1PLEdBQUcsQ0FBQyxDQUFDQyxxQkFDViw4REFBQ0M7d0JBRUNDLE1BQUs7d0JBQ0xDLFNBQVMsSUFBTWQsZUFBZVcsS0FBS1AsRUFBRTt3QkFDckNHLFdBQVcsQ0FBQyx3REFBd0QsRUFDbEVSLGdCQUFnQlksS0FBS1AsRUFBRSxHQUNuQiwyQkFDQSwwQ0FDTCwyQ0FBMkMsQ0FBQzt3QkFDN0NXLGNBQVlKLEtBQUtOLEtBQUs7d0JBQ3RCVyxnQkFBY2pCLGdCQUFnQlksS0FBS1AsRUFBRTtrQ0FFcENPLEtBQUtMLElBQUk7dUJBWExLLEtBQUtQLEVBQUU7Ozs7OzhCQWlCaEIsOERBQUNRO29CQUNDQyxNQUFLO29CQUNMQyxTQUFTYjtvQkFDVE0sV0FBVTtvQkFDVlEsY0FBVzs4QkFFWCw0RUFBQ3BCLDRHQUFJQTt3QkFBQ1ksV0FBVTs7Ozs7Ozs7Ozs7OEJBR2xCLDhEQUFDSztvQkFDQ0MsTUFBSztvQkFDTEMsU0FBU1o7b0JBQ1RLLFdBQVU7b0JBQ1ZRLGNBQVc7OEJBRVgsNEVBQUNuQiw4R0FBTUE7d0JBQUNXLFdBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLNUI7QUFFQSxpRUFBZVQsT0FBT0EsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3RydWR5cC9EZXNrdG9wL2Rldi1nZW1pbmktMi4wL2NvbXBvbmVudHMvVG9vbEJhci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQZW5jaWwsIEVyYXNlciwgVHlwZSwgVW5kbywgVHJhc2gyLCBQZW5MaW5lIH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcblxuY29uc3QgVG9vbEJhciA9ICh7IGN1cnJlbnRUb29sLCBzZXRDdXJyZW50VG9vbCwgaGFuZGxlVW5kbywgY2xlYXJDYW52YXMgfSkgPT4ge1xuICBjb25zdCB0b29scyA9IFtcbiAgICB7XG4gICAgICBpZDogXCJwZW5jaWxcIixcbiAgICAgIGxhYmVsOiBcIlBlbmNpbFwiLFxuICAgICAgaWNvbjogPFBlbmNpbCBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz4sXG4gICAgfSxcbiAgICAvLyB7XG4gICAgLy8gICBpZDogXCJwZW5cIixcbiAgICAvLyAgIGxhYmVsOiBcIlBlblwiLFxuICAgIC8vICAgaWNvbjogPFBlbkxpbmUgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+LFxuICAgIC8vIH0sXG4gICAge1xuICAgICAgaWQ6IFwiZXJhc2VyXCIsXG4gICAgICBsYWJlbDogXCJFcmFzZXJcIixcbiAgICAgIGljb246IDxFcmFzZXIgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+LFxuICAgIH0sXG4gICAgLy8ge1xuICAgIC8vICAgaWQ6IFwidGV4dFwiLFxuICAgIC8vICAgbGFiZWw6IFwiVGV4dFwiLFxuICAgIC8vICAgaWNvbjogPFR5cGUgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+LFxuICAgIC8vIH0sXG4gIF07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1lbmQgbWItNFwiPlxuICAgICAgPG1lbnUgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgYmctZ3JheS0yMDAgcm91bmRlZC1mdWxsIHAtMiBzaGFkb3ctc29mdCBnYXAtMlwiPlxuICAgICAgICB7dG9vbHMubWFwKCh0b29sKSA9PiAoXG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAga2V5PXt0b29sLmlkfVxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRDdXJyZW50VG9vbCh0b29sLmlkKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17YHctMTAgaC0xMCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgJHtcbiAgICAgICAgICAgICAgY3VycmVudFRvb2wgPT09IHRvb2wuaWRcbiAgICAgICAgICAgICAgICA/IFwiYmctZ3JheS03MDAgdGV4dC13aGl0ZVwiXG4gICAgICAgICAgICAgICAgOiBcImJnLXdoaXRlIHRleHQtZ3JheS02MDAgaG92ZXI6YmctZ3JheS01MFwiXG4gICAgICAgICAgICB9IHNoYWRvdy1zb2Z0IHRyYW5zaXRpb24tYWxsIGhvdmVyOnNjYWxlLTExMGB9XG4gICAgICAgICAgICBhcmlhLWxhYmVsPXt0b29sLmxhYmVsfVxuICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtjdXJyZW50VG9vbCA9PT0gdG9vbC5pZH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7dG9vbC5pY29ufVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICApKX1cblxuICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJ3LVsxcHhdIGgtNiBiZy1ncmF5LTMwMCBteC0xXCIgLz4gKi99XG5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVVuZG99XG4gICAgICAgICAgY2xhc3NOYW1lPVwidy0xMCBoLTEwIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy13aGl0ZSB0ZXh0LWdyYXktNjAwIHNoYWRvdy1zb2Z0IHRyYW5zaXRpb24tYWxsIGhvdmVyOnNjYWxlLTExMCBob3ZlcjpiZy1ncmF5LTUwXCJcbiAgICAgICAgICBhcmlhLWxhYmVsPVwiVW5kb1wiXG4gICAgICAgID5cbiAgICAgICAgICA8VW5kbyBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cbiAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIG9uQ2xpY2s9e2NsZWFyQ2FudmFzfVxuICAgICAgICAgIGNsYXNzTmFtZT1cInctMTAgaC0xMCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctd2hpdGUgdGV4dC1ncmF5LTYwMCBzaGFkb3ctc29mdCB0cmFuc2l0aW9uLWFsbCBob3ZlcjpzY2FsZS0xMTAgaG92ZXI6YmctZ3JheS01MFwiXG4gICAgICAgICAgYXJpYS1sYWJlbD1cIkNsZWFyIENhbnZhc1wiXG4gICAgICAgID5cbiAgICAgICAgICA8VHJhc2gyIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvbWVudT5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRvb2xCYXI7ICJdLCJuYW1lcyI6WyJQZW5jaWwiLCJFcmFzZXIiLCJUeXBlIiwiVW5kbyIsIlRyYXNoMiIsIlBlbkxpbmUiLCJUb29sQmFyIiwiY3VycmVudFRvb2wiLCJzZXRDdXJyZW50VG9vbCIsImhhbmRsZVVuZG8iLCJjbGVhckNhbnZhcyIsInRvb2xzIiwiaWQiLCJsYWJlbCIsImljb24iLCJjbGFzc05hbWUiLCJkaXYiLCJtZW51IiwibWFwIiwidG9vbCIsImJ1dHRvbiIsInR5cGUiLCJvbkNsaWNrIiwiYXJpYS1sYWJlbCIsImFyaWEtcHJlc3NlZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/ToolBar.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/utils/canvasUtils.js":
/*!*****************************************!*\
  !*** ./components/utils/canvasUtils.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAnchorPoint: () => (/* binding */ createAnchorPoint),\n/* harmony export */   drawBezierCurve: () => (/* binding */ drawBezierCurve),\n/* harmony export */   drawBezierGuides: () => (/* binding */ drawBezierGuides),\n/* harmony export */   drawImageToCanvas: () => (/* binding */ drawImageToCanvas),\n/* harmony export */   getCoordinates: () => (/* binding */ getCoordinates),\n/* harmony export */   initializeCanvas: () => (/* binding */ initializeCanvas),\n/* harmony export */   isNearHandle: () => (/* binding */ isNearHandle),\n/* harmony export */   updateHandle: () => (/* binding */ updateHandle)\n/* harmony export */ });\n// Get the correct coordinates based on canvas scaling\nconst getCoordinates = (e, canvas)=>{\n    const rect = canvas.getBoundingClientRect();\n    // Calculate the scaling factor between the internal canvas size and displayed size\n    const scaleX = canvas.width / rect.width;\n    const scaleY = canvas.height / rect.height;\n    // Apply the scaling to get accurate coordinates\n    return {\n        x: (e.nativeEvent.offsetX || e.nativeEvent.touches?.[0]?.clientX - rect.left) * scaleX,\n        y: (e.nativeEvent.offsetY || e.nativeEvent.touches?.[0]?.clientY - rect.top) * scaleY\n    };\n};\n// Initialize canvas with white background\nconst initializeCanvas = (canvas)=>{\n    const ctx = canvas.getContext(\"2d\");\n    // Fill canvas with white background\n    ctx.fillStyle = \"#FFFFFF\";\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n};\n// Draw the background image to the canvas\nconst drawImageToCanvas = (canvas, backgroundImage)=>{\n    if (!canvas || !backgroundImage) return;\n    const ctx = canvas.getContext(\"2d\");\n    // Fill with white background first\n    ctx.fillStyle = \"#FFFFFF\";\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    // Draw the background image\n    ctx.drawImage(backgroundImage, 0, 0, canvas.width, canvas.height);\n};\n// Draw bezier curve\nconst drawBezierCurve = (canvas, points)=>{\n    const ctx = canvas.getContext('2d');\n    if (!points || points.length < 2) {\n        console.error('Need at least 2 points to draw a path');\n        return;\n    }\n    ctx.beginPath();\n    ctx.strokeStyle = '#000000';\n    ctx.lineWidth = 3;\n    // Start at the first anchor point\n    ctx.moveTo(points[0].x, points[0].y);\n    // For each pair of anchor points (and their control points)\n    for(let i = 0; i < points.length - 1; i++){\n        const current = points[i];\n        const next = points[i + 1];\n        if (current.handleOut && next.handleIn) {\n            // If both points have handles, draw a cubic bezier\n            ctx.bezierCurveTo(current.x + (current.handleOut?.x || 0), current.y + (current.handleOut?.y || 0), next.x + (next.handleIn?.x || 0), next.y + (next.handleIn?.y || 0), next.x, next.y);\n        } else {\n            // If no handles, draw a straight line\n            ctx.lineTo(next.x, next.y);\n        }\n    }\n    ctx.stroke();\n};\n// Draw bezier guides (control points and lines)\nconst drawBezierGuides = (ctx, points)=>{\n    if (!points || points.length === 0) return;\n    // Draw the path itself first (as a light preview)\n    ctx.save();\n    ctx.globalAlpha = 0.3;\n    ctx.strokeStyle = '#888888';\n    ctx.lineWidth = 1.5;\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n    // For each pair of anchor points (and their control points)\n    for(let i = 0; i < points.length - 1; i++){\n        const current = points[i];\n        const next = points[i + 1];\n        if (current.handleOut && next.handleIn) {\n            // If both points have handles, draw a cubic bezier\n            ctx.bezierCurveTo(current.x + (current.handleOut?.x || 0), current.y + (current.handleOut?.y || 0), next.x + (next.handleIn?.x || 0), next.y + (next.handleIn?.y || 0), next.x, next.y);\n        } else {\n            // If no handles, draw a straight line\n            ctx.lineTo(next.x, next.y);\n        }\n    }\n    ctx.stroke();\n    ctx.restore();\n    // Draw guide lines between anchor points and their handles\n    ctx.strokeStyle = 'rgba(100, 100, 255, 0.5)';\n    ctx.lineWidth = 1;\n    for (const point of points){\n        // Draw line from anchor to in-handle if it exists\n        if (point.handleIn) {\n            ctx.beginPath();\n            ctx.moveTo(point.x, point.y);\n            ctx.lineTo(point.x + point.handleIn.x, point.y + point.handleIn.y);\n            ctx.stroke();\n        }\n        // Draw line from anchor to out-handle if it exists\n        if (point.handleOut) {\n            ctx.beginPath();\n            ctx.moveTo(point.x, point.y);\n            ctx.lineTo(point.x + point.handleOut.x, point.y + point.handleOut.y);\n            ctx.stroke();\n        }\n    }\n    // Draw anchor points (main points of the path)\n    for (const point of points){\n        // Draw the main anchor point\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';\n        ctx.strokeStyle = 'rgba(0, 0, 0, 0.8)';\n        ctx.lineWidth = 1;\n        ctx.beginPath();\n        ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);\n        ctx.fill();\n        ctx.stroke();\n        // Draw the handle points if they exist\n        if (point.handleIn) {\n            ctx.fillStyle = 'rgba(100, 100, 255, 0.8)';\n            ctx.beginPath();\n            ctx.arc(point.x + point.handleIn.x, point.y + point.handleIn.y, 4, 0, Math.PI * 2);\n            ctx.fill();\n        }\n        if (point.handleOut) {\n            ctx.fillStyle = 'rgba(100, 100, 255, 0.8)';\n            ctx.beginPath();\n            ctx.arc(point.x + point.handleOut.x, point.y + point.handleOut.y, 4, 0, Math.PI * 2);\n            ctx.fill();\n        }\n    }\n};\n// Helper to create a new anchor point with handles\nconst createAnchorPoint = (x, y, prevPoint = null)=>{\n    // By default, create a point with no handles\n    const point = {\n        x,\n        y,\n        handleIn: null,\n        handleOut: null\n    };\n    // If there's a previous point, automatically add symmetric handles\n    if (prevPoint) {\n        // Calculate the default handle length (as a percentage of distance to previous point)\n        const dx = x - prevPoint.x;\n        const dy = y - prevPoint.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        const handleLength = distance * 0.3; // 30% of distance between points\n        // Create handles perpendicular to the line between points\n        // For a smooth curve, make the previous point's out handle opposite to this point's in handle\n        const angle = Math.atan2(dy, dx);\n        // Add an out handle to the previous point (if it doesn't already have one)\n        if (!prevPoint.handleOut) {\n            prevPoint.handleOut = {\n                x: Math.cos(angle) * -handleLength,\n                y: Math.sin(angle) * -handleLength\n            };\n        }\n        // Add an in handle to the current point\n        point.handleIn = {\n            x: Math.cos(angle) * -handleLength,\n            y: Math.sin(angle) * -handleLength\n        };\n    }\n    return point;\n};\n// Helper to check if a point is near a handle\nconst isNearHandle = (point, handleType, x, y, radius = 10)=>{\n    if (!point || !point[handleType]) return false;\n    const handleX = point.x + point[handleType].x;\n    const handleY = point.y + point[handleType].y;\n    const dx = handleX - x;\n    const dy = handleY - y;\n    return dx * dx + dy * dy <= radius * radius;\n};\n// Helper to update a handle position\nconst updateHandle = (point, handleType, dx, dy, symmetric = true)=>{\n    if (!point || !point[handleType]) return;\n    // Update the target handle\n    point[handleType].x += dx;\n    point[handleType].y += dy;\n    // If symmetric and the other handle exists, update it to be symmetrical\n    if (symmetric) {\n        const otherType = handleType === 'handleIn' ? 'handleOut' : 'handleIn';\n        if (point[otherType]) {\n            point[otherType].x = -point[handleType].x;\n            point[otherType].y = -point[handleType].y;\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvdXRpbHMvY2FudmFzVXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxzREFBc0Q7QUFDL0MsTUFBTUEsaUJBQWlCLENBQUNDLEdBQUdDO0lBQ2hDLE1BQU1DLE9BQU9ELE9BQU9FLHFCQUFxQjtJQUV6QyxtRkFBbUY7SUFDbkYsTUFBTUMsU0FBU0gsT0FBT0ksS0FBSyxHQUFHSCxLQUFLRyxLQUFLO0lBQ3hDLE1BQU1DLFNBQVNMLE9BQU9NLE1BQU0sR0FBR0wsS0FBS0ssTUFBTTtJQUUxQyxnREFBZ0Q7SUFDaEQsT0FBTztRQUNMQyxHQUFHLENBQUNSLEVBQUVTLFdBQVcsQ0FBQ0MsT0FBTyxJQUFLVixFQUFFUyxXQUFXLENBQUNFLE9BQU8sRUFBRSxDQUFDLEVBQUUsRUFBRUMsVUFBVVYsS0FBS1csSUFBSSxJQUFLVDtRQUNsRlUsR0FBRyxDQUFDZCxFQUFFUyxXQUFXLENBQUNNLE9BQU8sSUFBS2YsRUFBRVMsV0FBVyxDQUFDRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLEVBQUVLLFVBQVVkLEtBQUtlLEdBQUcsSUFBS1g7SUFDbkY7QUFDRixFQUFFO0FBRUYsMENBQTBDO0FBQ25DLE1BQU1ZLG1CQUFtQixDQUFDakI7SUFDL0IsTUFBTWtCLE1BQU1sQixPQUFPbUIsVUFBVSxDQUFDO0lBRTlCLG9DQUFvQztJQUNwQ0QsSUFBSUUsU0FBUyxHQUFHO0lBQ2hCRixJQUFJRyxRQUFRLENBQUMsR0FBRyxHQUFHckIsT0FBT0ksS0FBSyxFQUFFSixPQUFPTSxNQUFNO0FBQ2hELEVBQUU7QUFFRiwwQ0FBMEM7QUFDbkMsTUFBTWdCLG9CQUFvQixDQUFDdEIsUUFBUXVCO0lBQ3hDLElBQUksQ0FBQ3ZCLFVBQVUsQ0FBQ3VCLGlCQUFpQjtJQUVqQyxNQUFNTCxNQUFNbEIsT0FBT21CLFVBQVUsQ0FBQztJQUU5QixtQ0FBbUM7SUFDbkNELElBQUlFLFNBQVMsR0FBRztJQUNoQkYsSUFBSUcsUUFBUSxDQUFD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QVksSUFBSTtJQUN0RSxJQUFJLENBQUN0QixTQUFTLENBQUNBLEtBQUssQ0FBQ2lCLFdBQVcsRUFBRTtJQUVsQywyQkFBMkI7SUFDM0JqQixLQUFLLENBQUNpQixXQUFXLENBQUN4RCxDQUFDLElBQUk4QztJQUN2QlAsS0FBSyxDQUFDaUIsV0FBVyxDQUFDbEQsQ0FBQyxJQUFJeUM7SUFFdkIsd0VBQXdFO0lBQ3hFLElBQUljLFdBQVc7UUFDYixNQUFNQyxZQUFZTixlQUFlLGFBQWEsY0FBYztRQUU1RCxJQUFJakIsS0FBSyxDQUFDdUIsVUFBVSxFQUFFO1lBQ3BCdkIsS0FBSyxDQUFDdUIsVUFBVSxDQUFDOUQsQ0FBQyxHQUFHLENBQUN1QyxLQUFLLENBQUNpQixXQUFXLENBQUN4RCxDQUFDO1lBQ3pDdUMsS0FBSyxDQUFDdUIsVUFBVSxDQUFDeEQsQ0FBQyxHQUFHLENBQUNpQyxLQUFLLENBQUNpQixXQUFXLENBQUNsRCxDQUFDO1FBQzNDO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyIvVXNlcnMvdHJ1ZHlwL0Rlc2t0b3AvZGV2LWdlbWluaS0yLjAvY29tcG9uZW50cy91dGlscy9jYW52YXNVdGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBHZXQgdGhlIGNvcnJlY3QgY29vcmRpbmF0ZXMgYmFzZWQgb24gY2FudmFzIHNjYWxpbmdcbmV4cG9ydCBjb25zdCBnZXRDb29yZGluYXRlcyA9IChlLCBjYW52YXMpID0+IHtcbiAgY29uc3QgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgXG4gIC8vIENhbGN1bGF0ZSB0aGUgc2NhbGluZyBmYWN0b3IgYmV0d2VlbiB0aGUgaW50ZXJuYWwgY2FudmFzIHNpemUgYW5kIGRpc3BsYXllZCBzaXplXG4gIGNvbnN0IHNjYWxlWCA9IGNhbnZhcy53aWR0aCAvIHJlY3Qud2lkdGg7XG4gIGNvbnN0IHNjYWxlWSA9IGNhbnZhcy5oZWlnaHQgLyByZWN0LmhlaWdodDtcbiAgXG4gIC8vIEFwcGx5IHRoZSBzY2FsaW5nIHRvIGdldCBhY2N1cmF0ZSBjb29yZGluYXRlc1xuICByZXR1cm4ge1xuICAgIHg6IChlLm5hdGl2ZUV2ZW50Lm9mZnNldFggfHwgKGUubmF0aXZlRXZlbnQudG91Y2hlcz8uWzBdPy5jbGllbnRYIC0gcmVjdC5sZWZ0KSkgKiBzY2FsZVgsXG4gICAgeTogKGUubmF0aXZlRXZlbnQub2Zmc2V0WSB8fCAoZS5uYXRpdmVFdmVudC50b3VjaGVzPy5bMF0/LmNsaWVudFkgLSByZWN0LnRvcCkpICogc2NhbGVZXG4gIH07XG59O1xuXG4vLyBJbml0aWFsaXplIGNhbnZhcyB3aXRoIHdoaXRlIGJhY2tncm91bmRcbmV4cG9ydCBjb25zdCBpbml0aWFsaXplQ2FudmFzID0gKGNhbnZhcykgPT4ge1xuICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICBcbiAgLy8gRmlsbCBjYW52YXMgd2l0aCB3aGl0ZSBiYWNrZ3JvdW5kXG4gIGN0eC5maWxsU3R5bGUgPSBcIiNGRkZGRkZcIjtcbiAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG59O1xuXG4vLyBEcmF3IHRoZSBiYWNrZ3JvdW5kIGltYWdlIHRvIHRoZSBjYW52YXNcbmV4cG9ydCBjb25zdCBkcmF3SW1hZ2VUb0NhbnZhcyA9IChjYW52YXMsIGJhY2tncm91bmRJbWFnZSkgPT4ge1xuICBpZiAoIWNhbnZhcyB8fCAhYmFja2dyb3VuZEltYWdlKSByZXR1cm47XG4gIFxuICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICBcbiAgLy8gRmlsbCB3aXRoIHdoaXRlIGJhY2tncm91bmQgZmlyc3RcbiAgY3R4LmZpbGxTdHlsZSA9IFwiI0ZGRkZGRlwiO1xuICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgXG4gIC8vIERyYXcgdGhlIGJhY2tncm91bmQgaW1hZ2VcbiAgY3R4LmRyYXdJbWFnZShcbiAgICBiYWNrZ3JvdW5kSW1hZ2UsXG4gICAgMCwgMCxcbiAgICBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHRcbiAgKTtcbn07XG5cbi8vIERyYXcgYmV6aWVyIGN1cnZlXG5leHBvcnQgY29uc3QgZHJhd0JlemllckN1cnZlID0gKGNhbnZhcywgcG9pbnRzKSA9PiB7XG4gIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICBcbiAgaWYgKCFwb2ludHMgfHwgcG9pbnRzLmxlbmd0aCA8IDIpIHtcbiAgICBjb25zb2xlLmVycm9yKCdOZWVkIGF0IGxlYXN0IDIgcG9pbnRzIHRvIGRyYXcgYSBwYXRoJyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIFxuICBjdHguYmVnaW5QYXRoKCk7XG4gIGN0eC5zdHJva2VTdHlsZSA9ICcjMDAwMDAwJztcbiAgY3R4LmxpbmVXaWR0aCA9IDM7XG4gIFxuICAvLyBTdGFydCBhdCB0aGUgZmlyc3QgYW5jaG9yIHBvaW50XG4gIGN0eC5tb3ZlVG8ocG9pbnRzWzBdLngsIHBvaW50c1swXS55KTtcbiAgXG4gIC8vIEZvciBlYWNoIHBhaXIgb2YgYW5jaG9yIHBvaW50cyAoYW5kIHRoZWlyIGNvbnRyb2wgcG9pbnRzKVxuICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICBjb25zdCBjdXJyZW50ID0gcG9pbnRzW2ldO1xuICAgIGNvbnN0IG5leHQgPSBwb2ludHNbaSArIDFdO1xuICAgIFxuICAgIGlmIChjdXJyZW50LmhhbmRsZU91dCAmJiBuZXh0LmhhbmRsZUluKSB7XG4gICAgICAvLyBJZiBib3RoIHBvaW50cyBoYXZlIGhhbmRsZXMsIGRyYXcgYSBjdWJpYyBiZXppZXJcbiAgICAgIGN0eC5iZXppZXJDdXJ2ZVRvKFxuICAgICAgICBjdXJyZW50LnggKyAoY3VycmVudC5oYW5kbGVPdXQ/LnggfHwgMCksIGN1cnJlbnQueSArIChjdXJyZW50LmhhbmRsZU91dD8ueSB8fCAwKSxcbiAgICAgICAgbmV4dC54ICsgKG5leHQuaGFuZGxlSW4/LnggfHwgMCksIG5leHQueSArIChuZXh0LmhhbmRsZUluPy55IHx8IDApLFxuICAgICAgICBuZXh0LngsIG5leHQueVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgbm8gaGFuZGxlcywgZHJhdyBhIHN0cmFpZ2h0IGxpbmVcbiAgICAgIGN0eC5saW5lVG8obmV4dC54LCBuZXh0LnkpO1xuICAgIH1cbiAgfVxuICBcbiAgY3R4LnN0cm9rZSgpO1xufTtcblxuLy8gRHJhdyBiZXppZXIgZ3VpZGVzIChjb250cm9sIHBvaW50cyBhbmQgbGluZXMpXG5leHBvcnQgY29uc3QgZHJhd0Jlemllckd1aWRlcyA9IChjdHgsIHBvaW50cykgPT4ge1xuICBpZiAoIXBvaW50cyB8fCBwb2ludHMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gIFxuICAvLyBEcmF3IHRoZSBwYXRoIGl0c2VsZiBmaXJzdCAoYXMgYSBsaWdodCBwcmV2aWV3KVxuICBjdHguc2F2ZSgpO1xuICBjdHguZ2xvYmFsQWxwaGEgPSAwLjM7XG4gIGN0eC5zdHJva2VTdHlsZSA9ICcjODg4ODg4JztcbiAgY3R4LmxpbmVXaWR0aCA9IDEuNTtcbiAgXG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgY3R4Lm1vdmVUbyhwb2ludHNbMF0ueCwgcG9pbnRzWzBdLnkpO1xuICBcbiAgLy8gRm9yIGVhY2ggcGFpciBvZiBhbmNob3IgcG9pbnRzIChhbmQgdGhlaXIgY29udHJvbCBwb2ludHMpXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBwb2ludHNbaV07XG4gICAgY29uc3QgbmV4dCA9IHBvaW50c1tpICsgMV07XG4gICAgXG4gICAgaWYgKGN1cnJlbnQuaGFuZGxlT3V0ICYmIG5leHQuaGFuZGxlSW4pIHtcbiAgICAgIC8vIElmIGJvdGggcG9pbnRzIGhhdmUgaGFuZGxlcywgZHJhdyBhIGN1YmljIGJlemllclxuICAgICAgY3R4LmJlemllckN1cnZlVG8oXG4gICAgICAgIGN1cnJlbnQueCArIChjdXJyZW50LmhhbmRsZU91dD8ueCB8fCAwKSwgY3VycmVudC55ICsgKGN1cnJlbnQuaGFuZGxlT3V0Py55IHx8IDApLFxuICAgICAgICBuZXh0LnggKyAobmV4dC5oYW5kbGVJbj8ueCB8fCAwKSwgbmV4dC55ICsgKG5leHQuaGFuZGxlSW4/LnkgfHwgMCksXG4gICAgICAgIG5leHQueCwgbmV4dC55XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiBubyBoYW5kbGVzLCBkcmF3IGEgc3RyYWlnaHQgbGluZVxuICAgICAgY3R4LmxpbmVUbyhuZXh0LngsIG5leHQueSk7XG4gICAgfVxuICB9XG4gIFxuICBjdHguc3Ryb2tlKCk7XG4gIGN0eC5yZXN0b3JlKCk7XG4gIFxuICAvLyBEcmF3IGd1aWRlIGxpbmVzIGJldHdlZW4gYW5jaG9yIHBvaW50cyBhbmQgdGhlaXIgaGFuZGxlc1xuICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgxMDAsIDEwMCwgMjU1LCAwLjUpJztcbiAgY3R4LmxpbmVXaWR0aCA9IDE7XG4gIFxuICBmb3IgKGNvbnN0IHBvaW50IG9mIHBvaW50cykge1xuICAgIC8vIERyYXcgbGluZSBmcm9tIGFuY2hvciB0byBpbi1oYW5kbGUgaWYgaXQgZXhpc3RzXG4gICAgaWYgKHBvaW50LmhhbmRsZUluKSB7XG4gICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICBjdHgubW92ZVRvKHBvaW50LngsIHBvaW50LnkpO1xuICAgICAgY3R4LmxpbmVUbyhwb2ludC54ICsgcG9pbnQuaGFuZGxlSW4ueCwgcG9pbnQueSArIHBvaW50LmhhbmRsZUluLnkpO1xuICAgICAgY3R4LnN0cm9rZSgpO1xuICAgIH1cbiAgICBcbiAgICAvLyBEcmF3IGxpbmUgZnJvbSBhbmNob3IgdG8gb3V0LWhhbmRsZSBpZiBpdCBleGlzdHNcbiAgICBpZiAocG9pbnQuaGFuZGxlT3V0KSB7XG4gICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICBjdHgubW92ZVRvKHBvaW50LngsIHBvaW50LnkpO1xuICAgICAgY3R4LmxpbmVUbyhwb2ludC54ICsgcG9pbnQuaGFuZGxlT3V0LngsIHBvaW50LnkgKyBwb2ludC5oYW5kbGVPdXQueSk7XG4gICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfVxuICB9XG4gIFxuICAvLyBEcmF3IGFuY2hvciBwb2ludHMgKG1haW4gcG9pbnRzIG9mIHRoZSBwYXRoKVxuICBmb3IgKGNvbnN0IHBvaW50IG9mIHBvaW50cykge1xuICAgIC8vIERyYXcgdGhlIG1haW4gYW5jaG9yIHBvaW50XG4gICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOSknO1xuICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDAsIDAsIDAsIDAuOCknO1xuICAgIGN0eC5saW5lV2lkdGggPSAxO1xuICAgIFxuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHguYXJjKHBvaW50LngsIHBvaW50LnksIDUsIDAsIE1hdGguUEkgKiAyKTtcbiAgICBjdHguZmlsbCgpO1xuICAgIGN0eC5zdHJva2UoKTtcbiAgICBcbiAgICAvLyBEcmF3IHRoZSBoYW5kbGUgcG9pbnRzIGlmIHRoZXkgZXhpc3RcbiAgICBpZiAocG9pbnQuaGFuZGxlSW4pIHtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgxMDAsIDEwMCwgMjU1LCAwLjgpJztcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgIGN0eC5hcmMocG9pbnQueCArIHBvaW50LmhhbmRsZUluLngsIHBvaW50LnkgKyBwb2ludC5oYW5kbGVJbi55LCA0LCAwLCBNYXRoLlBJICogMik7XG4gICAgICBjdHguZmlsbCgpO1xuICAgIH1cbiAgICBcbiAgICBpZiAocG9pbnQuaGFuZGxlT3V0KSB7XG4gICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMTAwLCAxMDAsIDI1NSwgMC44KSc7XG4gICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICBjdHguYXJjKHBvaW50LnggKyBwb2ludC5oYW5kbGVPdXQueCwgcG9pbnQueSArIHBvaW50LmhhbmRsZU91dC55LCA0LCAwLCBNYXRoLlBJICogMik7XG4gICAgICBjdHguZmlsbCgpO1xuICAgIH1cbiAgfVxufTtcblxuLy8gSGVscGVyIHRvIGNyZWF0ZSBhIG5ldyBhbmNob3IgcG9pbnQgd2l0aCBoYW5kbGVzXG5leHBvcnQgY29uc3QgY3JlYXRlQW5jaG9yUG9pbnQgPSAoeCwgeSwgcHJldlBvaW50ID0gbnVsbCkgPT4ge1xuICAvLyBCeSBkZWZhdWx0LCBjcmVhdGUgYSBwb2ludCB3aXRoIG5vIGhhbmRsZXNcbiAgY29uc3QgcG9pbnQgPSB7IHgsIHksIGhhbmRsZUluOiBudWxsLCBoYW5kbGVPdXQ6IG51bGwgfTtcbiAgXG4gIC8vIElmIHRoZXJlJ3MgYSBwcmV2aW91cyBwb2ludCwgYXV0b21hdGljYWxseSBhZGQgc3ltbWV0cmljIGhhbmRsZXNcbiAgaWYgKHByZXZQb2ludCkge1xuICAgIC8vIENhbGN1bGF0ZSB0aGUgZGVmYXVsdCBoYW5kbGUgbGVuZ3RoIChhcyBhIHBlcmNlbnRhZ2Ugb2YgZGlzdGFuY2UgdG8gcHJldmlvdXMgcG9pbnQpXG4gICAgY29uc3QgZHggPSB4IC0gcHJldlBvaW50Lng7XG4gICAgY29uc3QgZHkgPSB5IC0gcHJldlBvaW50Lnk7XG4gICAgY29uc3QgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgIGNvbnN0IGhhbmRsZUxlbmd0aCA9IGRpc3RhbmNlICogMC4zOyAvLyAzMCUgb2YgZGlzdGFuY2UgYmV0d2VlbiBwb2ludHNcbiAgICBcbiAgICAvLyBDcmVhdGUgaGFuZGxlcyBwZXJwZW5kaWN1bGFyIHRvIHRoZSBsaW5lIGJldHdlZW4gcG9pbnRzXG4gICAgLy8gRm9yIGEgc21vb3RoIGN1cnZlLCBtYWtlIHRoZSBwcmV2aW91cyBwb2ludCdzIG91dCBoYW5kbGUgb3Bwb3NpdGUgdG8gdGhpcyBwb2ludCdzIGluIGhhbmRsZVxuICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5hdGFuMihkeSwgZHgpO1xuICAgIFxuICAgIC8vIEFkZCBhbiBvdXQgaGFuZGxlIHRvIHRoZSBwcmV2aW91cyBwb2ludCAoaWYgaXQgZG9lc24ndCBhbHJlYWR5IGhhdmUgb25lKVxuICAgIGlmICghcHJldlBvaW50LmhhbmRsZU91dCkge1xuICAgICAgcHJldlBvaW50LmhhbmRsZU91dCA9IHtcbiAgICAgICAgeDogTWF0aC5jb3MoYW5nbGUpICogLWhhbmRsZUxlbmd0aCxcbiAgICAgICAgeTogTWF0aC5zaW4oYW5nbGUpICogLWhhbmRsZUxlbmd0aFxuICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgLy8gQWRkIGFuIGluIGhhbmRsZSB0byB0aGUgY3VycmVudCBwb2ludFxuICAgIHBvaW50LmhhbmRsZUluID0ge1xuICAgICAgeDogTWF0aC5jb3MoYW5nbGUpICogLWhhbmRsZUxlbmd0aCxcbiAgICAgIHk6IE1hdGguc2luKGFuZ2xlKSAqIC1oYW5kbGVMZW5ndGhcbiAgICB9O1xuICB9XG4gIFxuICByZXR1cm4gcG9pbnQ7XG59O1xuXG4vLyBIZWxwZXIgdG8gY2hlY2sgaWYgYSBwb2ludCBpcyBuZWFyIGEgaGFuZGxlXG5leHBvcnQgY29uc3QgaXNOZWFySGFuZGxlID0gKHBvaW50LCBoYW5kbGVUeXBlLCB4LCB5LCByYWRpdXMgPSAxMCkgPT4ge1xuICBpZiAoIXBvaW50IHx8ICFwb2ludFtoYW5kbGVUeXBlXSkgcmV0dXJuIGZhbHNlO1xuICBcbiAgY29uc3QgaGFuZGxlWCA9IHBvaW50LnggKyBwb2ludFtoYW5kbGVUeXBlXS54O1xuICBjb25zdCBoYW5kbGVZID0gcG9pbnQueSArIHBvaW50W2hhbmRsZVR5cGVdLnk7XG4gIFxuICBjb25zdCBkeCA9IGhhbmRsZVggLSB4O1xuICBjb25zdCBkeSA9IGhhbmRsZVkgLSB5O1xuICBcbiAgcmV0dXJuIChkeCAqIGR4ICsgZHkgKiBkeSkgPD0gcmFkaXVzICogcmFkaXVzO1xufTtcblxuLy8gSGVscGVyIHRvIHVwZGF0ZSBhIGhhbmRsZSBwb3NpdGlvblxuZXhwb3J0IGNvbnN0IHVwZGF0ZUhhbmRsZSA9IChwb2ludCwgaGFuZGxlVHlwZSwgZHgsIGR5LCBzeW1tZXRyaWMgPSB0cnVlKSA9PiB7XG4gIGlmICghcG9pbnQgfHwgIXBvaW50W2hhbmRsZVR5cGVdKSByZXR1cm47XG4gIFxuICAvLyBVcGRhdGUgdGhlIHRhcmdldCBoYW5kbGVcbiAgcG9pbnRbaGFuZGxlVHlwZV0ueCArPSBkeDtcbiAgcG9pbnRbaGFuZGxlVHlwZV0ueSArPSBkeTtcbiAgXG4gIC8vIElmIHN5bW1ldHJpYyBhbmQgdGhlIG90aGVyIGhhbmRsZSBleGlzdHMsIHVwZGF0ZSBpdCB0byBiZSBzeW1tZXRyaWNhbFxuICBpZiAoc3ltbWV0cmljKSB7XG4gICAgY29uc3Qgb3RoZXJUeXBlID0gaGFuZGxlVHlwZSA9PT0gJ2hhbmRsZUluJyA/ICdoYW5kbGVPdXQnIDogJ2hhbmRsZUluJztcbiAgICBcbiAgICBpZiAocG9pbnRbb3RoZXJUeXBlXSkge1xuICAgICAgcG9pbnRbb3RoZXJUeXBlXS54ID0gLXBvaW50W2hhbmRsZVR5cGVdLng7XG4gICAgICBwb2ludFtvdGhlclR5cGVdLnkgPSAtcG9pbnRbaGFuZGxlVHlwZV0ueTtcbiAgICB9XG4gIH1cbn07ICJdLCJuYW1lcyI6WyJnZXRDb29yZGluYXRlcyIsImUiLCJjYW52YXMiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwic2NhbGVYIiwid2lkdGgiLCJzY2FsZVkiLCJoZWlnaHQiLCJ4IiwibmF0aXZlRXZlbnQiLCJvZmZzZXRYIiwidG91Y2hlcyIsImNsaWVudFgiLCJsZWZ0IiwieSIsIm9mZnNldFkiLCJjbGllbnRZIiwidG9wIiwiaW5pdGlhbGl6ZUNhbnZhcyIsImN0eCIsImdldENvbnRleHQiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImRyYXdJbWFnZVRvQ2FudmFzIiwiYmFja2dyb3VuZEltYWdlIiwiZHJhd0ltYWdlIiwiZHJhd0JlemllckN1cnZlIiwicG9pbnRzIiwibGVuZ3RoIiwiY29uc29sZSIsImVycm9yIiwiYmVnaW5QYXRoIiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJtb3ZlVG8iLCJpIiwiY3VycmVudCIsIm5leHQiLCJoYW5kbGVPdXQiLCJoYW5kbGVJbiIsImJlemllckN1cnZlVG8iLCJsaW5lVG8iLCJzdHJva2UiLCJkcmF3QmV6aWVyR3VpZGVzIiwic2F2ZSIsImdsb2JhbEFscGhhIiwicmVzdG9yZSIsInBvaW50IiwiYXJjIiwiTWF0aCIsIlBJIiwiZmlsbCIsImNyZWF0ZUFuY2hvclBvaW50IiwicHJldlBvaW50IiwiZHgiLCJkeSIsImRpc3RhbmNlIiwic3FydCIsImhhbmRsZUxlbmd0aCIsImFuZ2xlIiwiYXRhbjIiLCJjb3MiLCJzaW4iLCJpc05lYXJIYW5kbGUiLCJoYW5kbGVUeXBlIiwicmFkaXVzIiwiaGFuZGxlWCIsImhhbmRsZVkiLCJ1cGRhdGVIYW5kbGUiLCJzeW1tZXRyaWMiLCJvdGhlclR5cGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/utils/canvasUtils.js\n");

/***/ }),

/***/ "(pages-dir-node)/__barrel_optimize__?names=Download,RefreshCw!=!./node_modules/lucide-react/dist/esm/lucide-react.js":
/*!***********************************************************************************************************!*\
  !*** __barrel_optimize__?names=Download,RefreshCw!=!./node_modules/lucide-react/dist/esm/lucide-react.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Download: () => (/* reexport safe */ _icons_download_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   RefreshCw: () => (/* reexport safe */ _icons_refresh_cw_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _icons_download_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons/download.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/download.js\");\n/* harmony import */ var _icons_refresh_cw_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icons/refresh-cw.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/refresh-cw.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS9fX2JhcnJlbF9vcHRpbWl6ZV9fP25hbWVzPURvd25sb2FkLFJlZnJlc2hDdyE9IS4vbm9kZV9tb2R1bGVzL2x1Y2lkZS1yZWFjdC9kaXN0L2VzbS9sdWNpZGUtcmVhY3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDeUQiLCJzb3VyY2VzIjpbIi9Vc2Vycy90cnVkeXAvRGVza3RvcC9kZXYtZ2VtaW5pLTIuMC9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2x1Y2lkZS1yZWFjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRG93bmxvYWQgfSBmcm9tIFwiLi9pY29ucy9kb3dubG9hZC5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIFJlZnJlc2hDdyB9IGZyb20gXCIuL2ljb25zL3JlZnJlc2gtY3cuanNcIiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/__barrel_optimize__?names=Download,RefreshCw!=!./node_modules/lucide-react/dist/esm/lucide-react.js\n");

/***/ }),

/***/ "(pages-dir-node)/__barrel_optimize__?names=Eraser,PenLine,Pencil,Trash2,Type,Undo!=!./node_modules/lucide-react/dist/esm/lucide-react.js":
/*!*******************************************************************************************************************************!*\
  !*** __barrel_optimize__?names=Eraser,PenLine,Pencil,Trash2,Type,Undo!=!./node_modules/lucide-react/dist/esm/lucide-react.js ***!
  \*******************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Eraser: () => (/* reexport safe */ _icons_eraser_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   PenLine: () => (/* reexport safe */ _icons_pen_line_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   Pencil: () => (/* reexport safe */ _icons_pencil_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]),\n/* harmony export */   Trash2: () => (/* reexport safe */ _icons_trash_2_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]),\n/* harmony export */   Type: () => (/* reexport safe */ _icons_type_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]),\n/* harmony export */   Undo: () => (/* reexport safe */ _icons_undo_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _icons_eraser_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons/eraser.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/eraser.js\");\n/* harmony import */ var _icons_pen_line_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icons/pen-line.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/pen-line.js\");\n/* harmony import */ var _icons_pencil_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icons/pencil.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/pencil.js\");\n/* harmony import */ var _icons_trash_2_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icons/trash-2.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/trash-2.js\");\n/* harmony import */ var _icons_type_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./icons/type.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/type.js\");\n/* harmony import */ var _icons_undo_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./icons/undo.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/undo.js\");\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS9fX2JhcnJlbF9vcHRpbWl6ZV9fP25hbWVzPUVyYXNlcixQZW5MaW5lLFBlbmNpbCxUcmFzaDIsVHlwZSxVbmRvIT0hLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2x1Y2lkZS1yZWFjdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQ3FEO0FBQ0c7QUFDSDtBQUNDO0FBQ0wiLCJzb3VyY2VzIjpbIi9Vc2Vycy90cnVkeXAvRGVza3RvcC9kZXYtZ2VtaW5pLTIuMC9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2x1Y2lkZS1yZWFjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRXJhc2VyIH0gZnJvbSBcIi4vaWNvbnMvZXJhc2VyLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUGVuTGluZSB9IGZyb20gXCIuL2ljb25zL3Blbi1saW5lLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUGVuY2lsIH0gZnJvbSBcIi4vaWNvbnMvcGVuY2lsLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgVHJhc2gyIH0gZnJvbSBcIi4vaWNvbnMvdHJhc2gtMi5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIFR5cGUgfSBmcm9tIFwiLi9pY29ucy90eXBlLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgVW5kbyB9IGZyb20gXCIuL2ljb25zL3VuZG8uanNcIiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/__barrel_optimize__?names=Eraser,PenLine,Pencil,Trash2,Type,Undo!=!./node_modules/lucide-react/dist/esm/lucide-react.js\n");

/***/ }),

/***/ "(pages-dir-node)/__barrel_optimize__?names=ImageIcon,LoaderCircle!=!./node_modules/lucide-react/dist/esm/lucide-react.js":
/*!***************************************************************************************************************!*\
  !*** __barrel_optimize__?names=ImageIcon,LoaderCircle!=!./node_modules/lucide-react/dist/esm/lucide-react.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImageIcon: () => (/* reexport safe */ _icons_image_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   LoaderCircle: () => (/* reexport safe */ _icons_loader_circle_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _icons_image_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons/image.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/image.js\");\n/* harmony import */ var _icons_loader_circle_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icons/loader-circle.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS9fX2JhcnJlbF9vcHRpbWl6ZV9fP25hbWVzPUltYWdlSWNvbixMb2FkZXJDaXJjbGUhPSEuL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vbHVjaWRlLXJlYWN0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQ3VEIiwic291cmNlcyI6WyIvVXNlcnMvdHJ1ZHlwL0Rlc2t0b3AvZGV2LWdlbWluaS0yLjAvbm9kZV9tb2R1bGVzL2x1Y2lkZS1yZWFjdC9kaXN0L2VzbS9sdWNpZGUtcmVhY3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5leHBvcnQgeyBkZWZhdWx0IGFzIEltYWdlSWNvbiB9IGZyb20gXCIuL2ljb25zL2ltYWdlLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgTG9hZGVyQ2lyY2xlIH0gZnJvbSBcIi4vaWNvbnMvbG9hZGVyLWNpcmNsZS5qc1wiIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/__barrel_optimize__?names=ImageIcon,LoaderCircle!=!./node_modules/lucide-react/dist/esm/lucide-react.js\n");

/***/ }),

/***/ "(pages-dir-node)/__barrel_optimize__?names=PencilLine!=!./node_modules/lucide-react/dist/esm/lucide-react.js":
/*!***************************************************************************************************!*\
  !*** __barrel_optimize__?names=PencilLine!=!./node_modules/lucide-react/dist/esm/lucide-react.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PencilLine: () => (/* reexport safe */ _icons_pencil_line_js__WEBPACK_IMPORTED_MODULE_0__["default"])
/* harmony export */ });
/* harmony import */ var _icons_pencil_line_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons/pencil-line.js */ "(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/pencil-line.js");



/***/ }),

/***/ "(pages-dir-node)/__barrel_optimize__?names=X!=!./node_modules/lucide-react/dist/esm/lucide-react.js":
/*!******************************************************************************************!*\
  !*** __barrel_optimize__?names=X!=!./node_modules/lucide-react/dist/esm/lucide-react.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   X: () => (/* reexport safe */ _icons_x_js__WEBPACK_IMPORTED_MODULE_0__["default"])
/* harmony export */ });
/* harmony import */ var _icons_x_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons/x.js */ "(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/x.js");



/***/ })

};
;